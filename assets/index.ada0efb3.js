import{V as rt}from"./chunk-vue.e8abc0df.js";import{V as ja,a as Pm,_ as Ce,b as Et,c as Rm,d as Hm,e as Cl,f as to,g as $f,h as $m,i as pi,j as Ts,k as zf,l as Jr,m as jf,n as zm,o as jm,p as Wm,q as Ms,r as Al,s as qm,t as Um,u as Km,v as xl,w as Jm,x as Eu,y as Su,z as Gm}from"./chunk-vuetify.cd378ea6.js";const Ym=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Ym();var Wa=function(t,e){return Wa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Wa(t,e)};function Xm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wa(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yn=function(){return Yn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Yn.apply(this,arguments)};function Wf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qf(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Uf(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Zm(t){var e;ce(t,(e=dr())===null||e===void 0?void 0:e.proxy)}var Vo,vo=[],Kf=function(){function t(e){this.active=!0,this.effects=[],this.cleanups=[],this.vm=e}return t.prototype.run=function(e){if(this.active)try{return this.on(),e()}finally{this.off()}else Zm("cannot run an inactive effect scope.")},t.prototype.on=function(){this.active&&(vo.push(this),Vo=this)},t.prototype.off=function(){this.active&&(vo.pop(),Vo=vo[vo.length-1])},t.prototype.stop=function(){this.active&&(this.vm.$destroy(),this.effects.forEach(function(e){return e.stop()}),this.cleanups.forEach(function(e){return e()}),this.active=!1)},t}();(function(t){Xm(e,t);function e(n){n===void 0&&(n=!1);var r=this,i=void 0;return ig(function(){i=hi(Gt())}),r=t.call(this,i)||this,n||Qm(r),r}return e})(Kf);function Qm(t,e){var n;if(e=e||Vo,e&&e.active){e.effects.push(t);return}var r=(n=dr())===null||n===void 0?void 0:n.proxy;r&&r.$on("hook:destroyed",function(){return t.stop()})}function eg(){return Vo}function Jf(){var t,e;return((t=eg())===null||t===void 0?void 0:t.vm)||((e=dr())===null||e===void 0?void 0:e.proxy)}function tg(t){if(!t.scope){var e=new Kf(t.proxy);t.scope=e,t.proxy.$on("hook:destroyed",function(){return e.stop()})}return t.scope}var qa=void 0;try{var qn=require("vue");qn&&_u(qn)?qa=qn:qn&&"default"in qn&&_u(qn.default)&&(qa=qn.default)}catch{}var Qn=null,_r=null,To=!0,Gf="__composition_api_installed__";function _u(t){return t&&kt(t)&&t.name==="Vue"}function ng(t){return Qn&&qt(t,Gf)}function Gt(){return Fs(Qn,"must call Vue.use(VueCompositionAPI) before using any function."),Qn}function Yf(){var t=Qn||qa;return Fs(t,"No vue dependency found."),t}function rg(t){Qn&&t.__proto__!==Qn.__proto__&&ce("[vue-composition-api] another instance of Vue installed"),Qn=t,Object.defineProperty(t,Gf,{configurable:!0,writable:!0,value:!0})}function ig(t){var e=To;To=!1;try{t()}finally{To=e}}function Po(t){if(!!To){var e=_r;e==null||e.scope.off(),_r=t,_r==null||_r.scope.on()}}function dr(){return _r}var ua=new WeakMap;function Ro(t){if(ua.has(t))return ua.get(t);var e={proxy:t,update:t.$forceUpdate,type:t.$options,uid:t._uid,emit:t.$emit.bind(t),parent:null,root:null};tg(e);var n=["data","props","attrs","refs","vnode","slots"];return n.forEach(function(r){ze(e,r,{get:function(){return t["$".concat(r)]}})}),ze(e,"isMounted",{get:function(){return t._isMounted}}),ze(e,"isUnmounted",{get:function(){return t._isDestroyed}}),ze(e,"isDeactivated",{get:function(){return t._inactive}}),ze(e,"emitted",{get:function(){return t._events}}),ua.set(t,e),t.$parent&&(e.parent=Ro(t.$parent)),t.$root&&(e.root=Ro(t.$root)),e}var og=function(t){return Object.prototype.toString.call(t)};function Ou(t){return typeof t=="function"&&/native code/.test(t.toString())}var Xf=typeof Symbol!="undefined"&&Ou(Symbol)&&typeof Reflect!="undefined"&&Ou(Reflect.ownKeys),Pt=function(t){return t};function ze(t,e,n){var r=n.get,i=n.set;Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:r||Pt,set:i||Pt})}function Zf(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function qt(t,e){return Object.hasOwnProperty.call(t,e)}function Fs(t,e){if(!t)throw new Error("[vue-composition-api] ".concat(e))}function sg(t){return typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="boolean"}function un(t){return Array.isArray(t)}var ag=Object.prototype.toString,Qf=function(t){return ag.call(t)},lg=function(t){return Qf(t)==="[object Map]"},ug=function(t){return Qf(t)==="[object Set]"},cg=4294967295;function fg(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)&&e<=cg}function Ui(t){return t!==null&&typeof t=="object"}function cn(t){return og(t)==="[object Object]"}function kt(t){return typeof t=="function"}function dg(t){return t==null}function ce(t,e){var n=Yf();!n||!n.util?console.warn("[vue-composition-api] ".concat(t)):n.util.warn(t,e)}function pg(t,e,n){if(ce("Error in ".concat(n,': "').concat(t.toString(),'"'),e),typeof window!="undefined"&&typeof console!="undefined")console.error(t);else throw t}function hg(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function mg(t,e){return e=e||dr(),e||ce("".concat(t," is called when there is no active component instance to be ")+"associated with. Lifecycle injection APIs can only be used during execution of setup()."),e}function hi(t,e){e===void 0&&(e={});var n=t.config.silent;t.config.silent=!0;var r=new t(e);return t.config.silent=n,r}function gg(t){var e=Gt();return e&&t instanceof e}function vg(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.$scopedSlots[e]?t.$scopedSlots[e].apply(t,n):ce("slots.".concat(e,'() got called outside of the "render()" scope'),t)}}function yg(t,e){var n;if(!t)n={};else{if(t._normalized)return t._normalized;n={};for(var r in t)t[r]&&r[0]!=="$"&&(n[r]=!0)}for(var r in e)r in n||(n[r]=!0);return n}var ca,bg=function(){if(!ca){var t=hi(Gt(),{computed:{value:function(){return 0}}}),e=t._computedWatchers.value.constructor,n=t._data.__ob__.dep.constructor;ca={Watcher:e,Dep:n},t.$destroy()}return ca};function ed(t){return Xf?Symbol.for(t):t}var Wr=ed("composition-api.preFlushQueue"),Mi=ed("composition-api.postFlushQueue"),Fi="composition-api.refKey",Tu=new WeakMap,Dg=new WeakMap,Cg=new WeakMap;function Ag(t,e,n){var r=Gt(),i=r.util,o=i.warn,s=i.defineReactive;(dg(t)||sg(t))&&o("Cannot set reactive property on undefined, null, or primitive value: ".concat(t));var a=t.__ob__;function l(){a&&Ui(n)&&!qt(n,"__ob__")&&wl(n)}if(un(t)){if(fg(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),l(),n;if(e==="length"&&n!==t.length)return t.length=n,a==null||a.dep.notify(),n}return e in t&&!(e in Object.prototype)?(t[e]=n,l(),n):t._isVue||a&&a.vmCount?(o("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),n):a?(s(a.value,e,n),rd(t,e,n),l(),a.dep.notify(),n):(t[e]=n,n)}var td=function(){function t(e){var n=e.get,r=e.set;ze(this,"value",{get:n,set:r})}return t}();function kl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=new td(t);n&&(r.effect=!0);var i=Object.seal(r);return e&&Cg.set(i,!0),i}function se(t){var e;if(Ae(t))return t;var n=El((e={},e[Fi]=t,e));return kl({get:function(){return n[Fi]},set:function(r){return n[Fi]=r}})}function Ae(t){return t instanceof td}function A(t){return Ae(t)?t.value:t}function xg(t){if(an(t)||ce("toRefs() expects a reactive object but received a plain one."),!cn(t))return t;var e={};for(var n in t)e[n]=kg(t,n);return e}function kg(t,e){e in t||Ag(t,e,void 0);var n=t[e];return Ae(n)?n:kl({get:function(){return t[e]},set:function(r){return t[e]=r}})}var nd="__v_skip";function Gr(t){var e;return Boolean(t&&qt(t,"__ob__")&&typeof t.__ob__=="object"&&((e=t.__ob__)===null||e===void 0?void 0:e[nd]))}function an(t){var e;return Boolean(t&&qt(t,"__ob__")&&typeof t.__ob__=="object"&&!(!((e=t.__ob__)===null||e===void 0)&&e[nd]))}function Ua(t){if(!(!cn(t)||Gr(t)||un(t)||Ae(t)||gg(t)||Tu.has(t))){Tu.set(t,!0);for(var e=Object.keys(t),n=0;n<e.length;n++)rd(t,e[n])}}function rd(t,e,n){if(e!=="__ob__"&&!Gr(t[e])){var r,i,o=Object.getOwnPropertyDescriptor(t,e);if(o){if(o.configurable===!1)return;r=o.get,i=o.set,(!r||i)&&arguments.length===2&&(n=t[e])}Ua(n),ze(t,e,{get:function(){var a=r?r.call(t):n;return e!==Fi&&Ae(a)?a.value:a},set:function(a){r&&!i||(e!==Fi&&Ae(n)&&!Ae(a)?n.value=a:(i&&i.call(t,a),n=a),Ua(a))}})}}function id(t){var e=Yf(),n;if(e.observable)n=e.observable(t);else{var r=hi(e,{data:{$$state:t}});n=r._data.$$state}return qt(n,"__ob__")||wl(n),n}function wl(t,e){var n,r;if(e===void 0&&(e=new Set),!(e.has(t)||qt(t,"__ob__")||!Object.isExtensible(t))){Zf(t,"__ob__",wg(t)),e.add(t);try{for(var i=Wf(Object.keys(t)),o=i.next();!o.done;o=i.next()){var s=o.value,a=t[s];!(cn(a)||un(a))||Gr(a)||!Object.isExtensible(a)||wl(a,e)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}function wg(t){return t===void 0&&(t={}),{value:t,dep:{notify:Pt,depend:Pt,addSub:Pt,removeSub:Pt}}}function Eg(){return id({}).__ob__}function El(t){if(!Ui(t))return ce('"reactive()" must be called on an object.'),t;if(!(cn(t)||un(t))||Gr(t)||!Object.isExtensible(t))return t;var e=id(t);return Ua(e),e}var Sg=function(t){return"on".concat(t[0].toUpperCase()+t.slice(1))};function od(t){return function(e,n){var r=mg(Sg(t),n);return r&&_g(Gt(),r,t,e)}}function _g(t,e,n,r){var i=e.proxy.$options,o=t.config.optionMergeStrategies[n],s=Og(e,r);return i[n]=o(i[n],s),s}function Og(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=dr();Po(t);try{return e.apply(void 0,Uf([],qf(n),!1))}finally{Po(i)}}}var sd=od("mounted"),Sl=od("destroyed"),Mo;function Tg(){Ho(this,Wr)}function Mg(){Ho(this,Mi)}function Fg(t){return t[Wr]!==void 0}function Bg(t){t[Wr]=[],t[Mi]=[],t.$on("hook:beforeUpdate",Tg),t.$on("hook:updated",Mg)}function Lg(t){return Yn({immediate:!1,deep:!1,flush:"pre"},t)}function Ng(){var t=Jf();return t?Fg(t)||Bg(t):(Mo||(Mo=hi(Gt())),t=Mo),t}function Ho(t,e){for(var n=t[e],r=0;r<n.length;r++)n[r]();n.length=0}function Ig(t,e,n){var r=function(){t.$nextTick(function(){t[Wr].length&&Ho(t,Wr),t[Mi].length&&Ho(t,Mi)})};switch(n){case"pre":r(),t[Wr].push(e);break;case"post":r(),t[Mi].push(e);break;default:Fs(!1,'flush must be one of ["post", "pre", "sync"], but got '.concat(n));break}}function Vg(t,e,n,r){var i=t._watchers.length;return t.$watch(e,n,{immediate:r.immediateInvokeCallback,deep:r.deep,lazy:r.noRun,sync:r.sync,before:r.before}),t._watchers[i]}function Mu(t,e){var n=t.teardown;t.teardown=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n.apply(t,r),e()}}function Pg(t,e,n,r){var i;n||(r.immediate!==void 0&&ce('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),r.deep!==void 0&&ce('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));var o=r.flush,s=o==="sync",a,l=function(B){a=function(){try{B()}catch(R){pg(R,t,"onCleanup()")}}},u=function(){a&&(a(),a=null)},c=function(B){return s||t===Mo?B:function(){for(var R=[],K=0;K<arguments.length;K++)R[K]=arguments[K];return Ig(t,function(){B.apply(void 0,Uf([],qf(R),!1))},o)}};if(n===null){var f=!1,d=function(){if(!f)try{f=!0,e(l)}finally{f=!1}},p=Vg(t,d,Pt,{deep:r.deep||!1,sync:s,before:u});Mu(p,u),p.lazy=!1;var h=p.get.bind(p);return p.get=c(h),function(){p.teardown()}}var m=r.deep,y=!1,D;if(Ae(e)?D=function(){return e.value}:an(e)?(D=function(){return e},m=!0):un(e)?(y=!0,D=function(){return e.map(function(B){return Ae(B)?B.value:an(B)?Br(B):kt(B)?B():(ce("Invalid watch source: ".concat(JSON.stringify(B),`.
          A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`),t),Pt)})}):kt(e)?D=e:(D=Pt,ce("Invalid watch source: ".concat(JSON.stringify(e),`.
      A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`),t)),m){var w=D;D=function(){return Br(w())}}var M=function(B,R){if(!(!m&&y&&B.every(function(K,$){return hg(K,R[$])})))return u(),n(B,R,l)},v=c(M);if(r.immediate){var F=v,E=function(B,R){return E=F,M(B,un(B)?[]:R)};v=function(B,R){return E(B,R)}}var O=t.$watch(D,v,{immediate:r.immediate,deep:m,sync:s}),S=t._watchers[t._watchers.length-1];return an(S.value)&&((i=S.value.__ob__)===null||i===void 0?void 0:i.dep)&&m&&S.value.__ob__.dep.addSub({update:function(){S.run()}}),Mu(S,u),function(){O()}}function Fu(t,e,n){var r=null;kt(e)?r=e:(ce("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),n=e,r=null);var i=Lg(n),o=Ng();return Pg(o,t,r,i)}function Br(t,e){if(e===void 0&&(e=new Set),!Ui(t)||e.has(t)||Dg.has(t))return t;if(e.add(t),Ae(t))Br(t.value,e);else if(un(t))for(var n=0;n<t.length;n++)Br(t[n],e);else if(ug(t)||lg(t))t.forEach(function(i){Br(i,e)});else if(cn(t))for(var r in t)Br(t[r],e);return t}function ue(t){var e=Jf(),n,r;kt(t)?n=t:(n=t.get,r=t.set);var i,o;if(e&&!e.$isServer){var s=bg(),a=s.Watcher,l=s.Dep,u;o=function(){return u||(u=new a(e,n,Pt,{lazy:!0})),u.dirty&&u.evaluate(),l.target&&u.depend(),u.value},i=function(f){if(!r){ce("Write operation failed: computed value is readonly.",e);return}r&&r(f)}}else{var c=hi(Gt(),{computed:{$$state:{get:n,set:r}}});e&&e.$on("hook:destroyed",function(){return c.$destroy()}),o=function(){return c.$$state},i=function(f){if(!r){ce("Write operation failed: computed value is readonly.",e);return}c.$$state=f}}return kl({get:o,set:i},!r,!0)}Object.freeze({});function Rg(t,e){e===void 0&&(e=void 0);var n=Gt(),r=void 0,i={},o={config:n.config,use:n.use.bind(n),mixin:n.mixin.bind(n),component:n.component.bind(n),provide:function(s,a){return i[s]=a,this},directive:function(s,a){return a?(n.directive(s,a),o):n.directive(s)},mount:function(s,a){return r?(ce("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`"),r):(r=new n(Yn(Yn({propsData:e},t),{provide:Yn(Yn({},i),t.provide)})),r.$mount(s,a),r)},unmount:function(){r?(r.$destroy(),r=void 0):ce("Cannot unmount an app that is not mounted.")}};return o}var yo,Hg=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=(this===null||this===void 0?void 0:this.proxy)||((e=dr())===null||e===void 0?void 0:e.proxy);return i?i.$createElement.apply(i,n):(ce("`createElement()` has been called outside of render function."),yo||(yo=hi(Gt()).$createElement),yo.apply(yo,n))};function $g(t,e,n){var r=t.__composition_api_state__=t.__composition_api_state__||{};r[e]=n}function zg(t,e){return(t.__composition_api_state__||{})[e]}var wn={set:$g,get:zg};function jg(t,e,n){var r=t.$options.props;!(e in t)&&!(r&&qt(r,e))?(Ae(n)?ze(t,e,{get:function(){return n.value},set:function(i){n.value=i}}):ze(t,e,{get:function(){return an(n)&&n.__ob__.dep.depend(),n},set:function(i){n=i}}),t.$nextTick(function(){Object.keys(t._data).indexOf(e)===-1&&(Ae(n)?ze(t._data,e,{get:function(){return n.value},set:function(i){n.value=i}}):ze(t._data,e,{get:function(){return n},set:function(i){n=i}}))})):r&&qt(r,e)?ce('The setup binding property "'.concat(e,'" is already declared as a prop.'),t):ce('The setup binding property "'.concat(e,'" is already declared.'),t)}function Wg(t){var e=wn.get(t,"rawBindings")||{};if(!(!e||!Object.keys(e).length)){for(var n=t.$refs,r=wn.get(t,"refs")||[],i=0;i<r.length;i++){var o=r[i],s=e[o];!n[o]&&s&&Ae(s)&&(s.value=null)}for(var a=Object.keys(n),l=[],i=0;i<a.length;i++){var o=a[i],s=e[o];n[o]&&s&&Ae(s)&&(s.value=n[o],l.push(o))}wn.set(t,"refs",l)}}function Bu(t){for(var e=[t._vnode];e.length;){var n=e.pop();if(n&&(n.context&&Wg(n.context),n.children))for(var r=0;r<n.children.length;++r)e.push(n.children[r])}}function Lu(t,e){var n,r;if(!!t){var i=wn.get(t,"attrBindings");if(!(!i&&!e)){if(!i){var o=El({});i={ctx:e,data:o},wn.set(t,"attrBindings",i),ze(e,"attrs",{get:function(){return i==null?void 0:i.data},set:function(){ce("Cannot assign to '$attrs' because it is a read-only property",t)}})}var s=t.$attrs,a=function(f){qt(i.data,f)||ze(i.data,f,{get:function(){return t.$attrs[f]}})};try{for(var l=Wf(Object.keys(s)),u=l.next();!u.done;u=l.next()){var c=u.value;a(c)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}}}function Nu(t,e){var n=t.$options._parentVnode;if(!!n){for(var r=wn.get(t,"slots")||[],i=yg(n.data.scopedSlots,t.$slots),o=0;o<r.length;o++){var s=r[o];i[s]||delete e[s]}for(var a=Object.keys(i),o=0;o<a.length;o++){var s=a[o];e[s]||(e[s]=vg(t,s))}wn.set(t,"slots",a)}}function fa(t,e,n){var r=dr();Po(t);try{return e(t)}catch(i){if(n)n(i);else throw i}finally{Po(r)}}function qg(t){t.mixin({beforeCreate:e,mounted:function(){Bu(this)},beforeUpdate:function(){Lu(this)},updated:function(){Bu(this)}});function e(){var s=this,a=s.$options,l=a.setup,u=a.render;if(u&&(a.render=function(){for(var f=this,d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];return fa(Ro(s),function(){return u.apply(f,d)})}),!!l){if(!kt(l)){ce('The "setup" option should be a function that returns a object in component definitions.',s);return}var c=a.data;a.data=function(){return n(s,s.$props),kt(c)?c.call(s,s):c||{}}}}function n(s,a){a===void 0&&(a={});var l=s.$options.setup,u=o(s),c=Ro(s);c.setupContext=u,Zf(a,"__ob__",Eg()),Nu(s,u.slots);var f;if(fa(c,function(){f=l(a,u)}),!!f){if(kt(f)){var d=f;s.$options.render=function(){return Nu(s,u.slots),fa(c,function(){return d()})};return}else if(Ui(f)){an(f)&&(f=xg(f)),wn.set(s,"rawBindings",f);var p=f;Object.keys(p).forEach(function(h){var m=p[h];if(!Ae(m))if(an(m))un(m)&&(m=se(m));else if(kt(m)){var y=m;m=m.bind(s),Object.keys(y).forEach(function(D){m[D]=y[D]})}else Ui(m)?i(m)&&r(m):m=se(m);jg(s,h,m)});return}Fs(!1,'"setup" must return a "Object" or a "Function", got "'.concat(Object.prototype.toString.call(f).slice(8,-1),'"'))}}function r(s,a){if(a===void 0&&(a=new Set),!a.has(s)&&!(!cn(s)||Ae(s)||an(s)||Gr(s))){var l=Gt(),u=l.util.defineReactive;Object.keys(s).forEach(function(c){var f=s[c];u(s,c,f),f&&(a.add(f),r(f,a))})}}function i(s,a){return a===void 0&&(a=new Map),a.has(s)?a.get(s):(a.set(s,!1),un(s)&&an(s)?(a.set(s,!0),!0):!cn(s)||Gr(s)||Ae(s)?!1:Object.keys(s).some(function(l){return i(s[l],a)}))}function o(s){var a={slots:{}},l=["root","parent","refs","listeners","isServer","ssrContext"],u=["emit"];return l.forEach(function(c){var f="$".concat(c);ze(a,c,{get:function(){return s[f]},set:function(){ce("Cannot assign to '".concat(c,"' because it is a read-only property"),s)}})}),Lu(s,a),u.forEach(function(c){var f="$".concat(c);ze(a,c,{get:function(){return function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];var h=s[f];h.apply(s,d)}}})}),a}}function ad(t,e){if(!t)return e;if(!e)return t;for(var n,r,i,o=Xf?Reflect.ownKeys(t):Object.keys(t),s=0;s<o.length;s++)n=o[s],n!=="__ob__"&&(r=e[n],i=t[n],qt(e,n)?r!==i&&cn(r)&&!Ae(r)&&cn(i)&&!Ae(i)&&ad(i,r):e[n]=i);return e}function Ug(t){if(ng(t)){ce("[vue-composition-api] already installed. Vue.use(VueCompositionAPI) should be called only once.");return}t.version?(t.version[0]!=="2"||t.version[1]!==".")&&ce("[vue-composition-api] only works with Vue 2, v".concat(t.version," found.")):ce("[vue-composition-api] no Vue version found"),t.config.optionMergeStrategies.setup=function(e,n){return function(i,o){return ad(kt(e)?e(i,o)||{}:void 0,kt(n)?n(i,o)||{}:void 0)}},rg(t),qg(t)}var ld={install:function(t){return Ug(t)}};typeof window!="undefined"&&window.Vue&&window.Vue.use(ld);const Kg=t=>(t.use(ja),new ja);var Jg="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M16,10V17A1,1 0 0,1 15,18H9A1,1 0 0,1 8,17V10H16M13.5,6L14.5,7H17V9H7V7H9.5L10.5,6H13.5Z",Gg="M14 2H6C4.89 2 4 2.9 4 4V20C4 21.11 4.89 22 6 22H18C19.11 22 20 21.11 20 20V8L14 2M18 20H6V4H13V9H18V20M9.54 15.65L11.63 17.74L10.35 19L7 15.65L10.35 12.3L11.63 13.56L9.54 15.65M17 15.65L13.65 19L12.38 17.74L14.47 15.65L12.38 13.56L13.65 12.3L17 15.65Z",Yg="M2,21L23,12L2,3V10L17,12L2,14V21Z",Xg=Object.defineProperty,Zg=Object.defineProperties,Qg=Object.getOwnPropertyDescriptors,$o=Object.getOwnPropertySymbols,ud=Object.prototype.hasOwnProperty,cd=Object.prototype.propertyIsEnumerable,Ka=(t,e,n)=>e in t?Xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||(e={}))ud.call(e,n)&&Ka(t,n,e[n]);if($o)for(var n of $o(e))cd.call(e,n)&&Ka(t,n,e[n]);return t},xe=(t,e)=>Zg(t,Qg(e)),e0=(t,e)=>{var n={};for(var r in t)ud.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&$o)for(var r of $o(t))e.indexOf(r)<0&&cd.call(t,r)&&(n[r]=t[r]);return n},t0=(t,e,n)=>(Ka(t,typeof e!="symbol"?e+"":e,n),n);const Iu="[vuetify-pro-tiptap]";class _l{static warn(e){console.warn(`${Iu}: ${e}`)}static error(e){console.error(`${Iu}: ${e}`)}}let Si;function n0(t){return typeof t.framework.rtl=="boolean"&&(t.preset.rtl=t.framework.rtl),t}function Ol(t,e){return Si?n0(Si):t?Si=t:Si=new ja(e||{})}function r0(t){return t?(Si=t,!0):(_l.warn("invalid vuetify instance"),!1)}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Vu(t){return Object.prototype.toString.call(t)==="[object Object]"}function i0(t){var e,n;return Vu(t)===!1?!1:(e=t.constructor,e===void 0?!0:(n=e.prototype,!(Vu(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}function Bi(){return Bi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bi.apply(this,arguments)}function fd(t,e){if(t==null)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}const o0={silent:!1,logLevel:"warn"},s0=["validator"],dd=Object.prototype,pd=dd.toString,a0=dd.hasOwnProperty,hd=/^\s*function (\w+)/;function Pu(t){var e;const n=(e=t==null?void 0:t.type)!==null&&e!==void 0?e:t;if(n){const r=n.toString().match(hd);return r?r[1]:""}return""}const or=i0,l0=t=>t;let Pe=l0;const Yr=(t,e)=>a0.call(t,e),u0=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Xr=Array.isArray||function(t){return pd.call(t)==="[object Array]"},Zr=t=>pd.call(t)==="[object Function]",zo=t=>or(t)&&Yr(t,"_vueTypes_name"),md=t=>or(t)&&(Yr(t,"type")||["_vueTypes_name","validator","default","required"].some(e=>Yr(t,e)));function Tl(t,e){return Object.defineProperty(t.bind(e),"__original",{value:t})}function pr(t,e,n=!1){let r,i=!0,o="";r=or(t)?t:{type:t};const s=zo(r)?r._vueTypes_name+" - ":"";if(md(r)&&r.type!==null){if(r.type===void 0||r.type===!0||!r.required&&e===void 0)return i;Xr(r.type)?(i=r.type.some(a=>pr(a,e,!0)===!0),o=r.type.map(a=>Pu(a)).join(" or ")):(o=Pu(r),i=o==="Array"?Xr(e):o==="Object"?or(e):o==="String"||o==="Number"||o==="Boolean"||o==="Function"?function(a){if(a==null)return"";const l=a.constructor.toString().match(hd);return l?l[1]:""}(e)===o:e instanceof r.type)}if(!i){const a=`${s}value "${e}" should be of type "${o}"`;return n===!1?(Pe(a),!1):a}if(Yr(r,"validator")&&Zr(r.validator)){const a=Pe,l=[];if(Pe=u=>{l.push(u)},i=r.validator(e),Pe=a,!i){const u=(l.length>1?"* ":"")+l.join(`
* `);return l.length=0,n===!1?(Pe(u),i):u}}return i}function ot(t,e){const n=Object.defineProperties(e,{_vueTypes_name:{value:t,writable:!0},isRequired:{get(){return this.required=!0,this}},def:{value(i){return i===void 0?(Yr(this,"default")&&delete this.default,this):Zr(i)||pr(this,i,!0)===!0?(this.default=Xr(i)?()=>[...i]:or(i)?()=>Object.assign({},i):i,this):(Pe(`${this._vueTypes_name} - invalid default value: "${i}"`),this)}}}),{validator:r}=n;return Zr(r)&&(n.validator=Tl(r,n)),n}function $t(t,e){const n=ot(t,e);return Object.defineProperty(n,"validate",{value(r){return Zr(this.validator)&&Pe(`${this._vueTypes_name} - calling .validate() will overwrite the current custom validator function. Validator info:
${JSON.stringify(this)}`),this.validator=Tl(r,this),this}})}function Ru(t,e,n){const r=function(l){const u={};return Object.getOwnPropertyNames(l).forEach(c=>{u[c]=Object.getOwnPropertyDescriptor(l,c)}),Object.defineProperties({},u)}(e);if(r._vueTypes_name=t,!or(n))return r;const{validator:i}=n,o=fd(n,s0);if(Zr(i)){let{validator:l}=r;l&&(l=(a=(s=l).__original)!==null&&a!==void 0?a:s),r.validator=Tl(l?function(u){return l.call(this,u)&&i.call(this,u)}:i,r)}var s,a;return Object.assign(r,o)}function Bs(t){return t.replace(/^(?!\s*$)/gm,"  ")}const c0=()=>$t("any",{}),En=()=>$t("function",{type:Function}),ge=()=>$t("boolean",{type:Boolean}),Sn=()=>$t("string",{type:String}),f0=()=>$t("number",{type:Number}),sr=()=>$t("array",{type:Array}),Ke=()=>$t("object",{type:Object}),d0=()=>ot("integer",{type:Number,validator:t=>u0(t)}),p0=()=>ot("symbol",{validator:t=>typeof t=="symbol"});function h0(t,e="custom validation failed"){if(typeof t!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return ot(t.name||"<<anonymous function>>",{type:null,validator(n){const r=t(n);return r||Pe(`${this._vueTypes_name} - ${e}`),r}})}function m0(t){if(!Xr(t))throw new TypeError("[VueTypes error]: You must provide an array as argument.");const e=`oneOf - value should be one of "${t.join('", "')}".`,n=t.reduce((r,i)=>{if(i!=null){const o=i.constructor;r.indexOf(o)===-1&&r.push(o)}return r},[]);return ot("oneOf",{type:n.length>0?n:void 0,validator(r){const i=t.indexOf(r)!==-1;return i||Pe(e),i}})}function An(t){if(!Xr(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");let e=!1,n=[];for(let i=0;i<t.length;i+=1){const o=t[i];if(md(o)){if(zo(o)&&o._vueTypes_name==="oneOf"&&o.type){n=n.concat(o.type);continue}if(Zr(o.validator)&&(e=!0),o.type===!0||!o.type){Pe('oneOfType - invalid usage of "true" or "null" as types.');continue}n=n.concat(o.type)}else n.push(o)}n=n.filter((i,o)=>n.indexOf(i)===o);const r=n.length>0?n:null;return ot("oneOfType",e?{type:r,validator(i){const o=[],s=t.some(a=>{const l=pr(zo(a)&&a._vueTypes_name==="oneOf"?a.type||null:a,i,!0);return typeof l=="string"&&o.push(l),l===!0});return s||Pe(`oneOfType - provided value does not match any of the ${o.length} passed-in validators:
${Bs(o.join(`
`))}`),s}}:{type:r})}function g0(t){return ot("arrayOf",{type:Array,validator(e){let n="";const r=e.every(i=>(n=pr(t,i,!0),n===!0));return r||Pe(`arrayOf - value validation error:
${Bs(n)}`),r}})}function v0(t){return ot("instanceOf",{type:t})}function y0(t){return ot("objectOf",{type:Object,validator(e){let n="";const r=Object.keys(e).every(i=>(n=pr(t,e[i],!0),n===!0));return r||Pe(`objectOf - value validation error:
${Bs(n)}`),r}})}function b0(t){const e=Object.keys(t),n=e.filter(i=>{var o;return!((o=t[i])===null||o===void 0||!o.required)}),r=ot("shape",{type:Object,validator(i){if(!or(i))return!1;const o=Object.keys(i);if(n.length>0&&n.some(s=>o.indexOf(s)===-1)){const s=n.filter(a=>o.indexOf(a)===-1);return Pe(s.length===1?`shape - required property "${s[0]}" is not defined.`:`shape - required properties "${s.join('", "')}" are not defined.`),!1}return o.every(s=>{if(e.indexOf(s)===-1)return this._vueTypes_isLoose===!0||(Pe(`shape - shape definition does not include a "${s}" property. Allowed keys: "${e.join('", "')}".`),!1);const a=pr(t[s],i[s],!0);return typeof a=="string"&&Pe(`shape - "${s}" property validation error:
 ${Bs(a)}`),a===!0})}});return Object.defineProperty(r,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(r,"loose",{get(){return this._vueTypes_isLoose=!0,this}}),r}const D0=["name","validate","getter"],C0=(()=>{var t,e;return e=t=class{static get any(){return c0()}static get func(){return En().def(this.defaults.func)}static get bool(){return ge().def(this.defaults.bool)}static get string(){return Sn().def(this.defaults.string)}static get number(){return f0().def(this.defaults.number)}static get array(){return sr().def(this.defaults.array)}static get object(){return Ke().def(this.defaults.object)}static get integer(){return d0().def(this.defaults.integer)}static get symbol(){return p0()}static extend(n){if(Xr(n))return n.forEach(u=>this.extend(u)),this;const{name:r,validate:i=!1,getter:o=!1}=n,s=fd(n,D0);if(Yr(this,r))throw new TypeError(`[VueTypes error]: Type "${r}" already defined`);const{type:a}=s;if(zo(a))return delete s.type,Object.defineProperty(this,r,o?{get:()=>Ru(r,a,s)}:{value(...u){const c=Ru(r,a,s);return c.validator&&(c.validator=c.validator.bind(c,...u)),c}});let l;return l=o?{get(){const u=Object.assign({},s);return i?$t(r,u):ot(r,u)},enumerable:!0}:{value(...u){const c=Object.assign({},s);let f;return f=i?$t(r,c):ot(r,c),c.validator&&(f.validator=c.validator.bind(f,...u)),f},enumerable:!0},Object.defineProperty(this,r,l)}},t.defaults={},t.sensibleDefaults=void 0,t.config=o0,t.custom=h0,t.oneOf=m0,t.instanceOf=v0,t.oneOfType=An,t.arrayOf=g0,t.objectOf=y0,t.shape=b0,t.utils={validate:(n,r)=>pr(r,n,!0)===!0,toType:(n,r,i=!1)=>i?$t(n,r):ot(n,r)},e})();function A0(t={func:()=>{},bool:!0,string:"",number:0,array:()=>[],object:()=>({}),integer:0}){var e,n;return n=e=class extends C0{static get sensibleDefaults(){return Bi({},this.defaults)}static set sensibleDefaults(r){this.defaults=r!==!1?Bi({},r!==!0?r:t):{}}},e.defaults=Bi({},t),n}class u_ extends A0(){}var xn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},gd="Expected a function",Hu=0/0,x0="[object Symbol]",k0=/^\s+|\s+$/g,w0=/^[-+]0x[0-9a-f]+$/i,E0=/^0b[01]+$/i,S0=/^0o[0-7]+$/i,_0=parseInt,O0=typeof xn=="object"&&xn&&xn.Object===Object&&xn,T0=typeof self=="object"&&self&&self.Object===Object&&self,M0=O0||T0||Function("return this")(),F0=Object.prototype,B0=F0.toString,L0=Math.max,N0=Math.min,da=function(){return M0.Date.now()};function I0(t,e,n){var r,i,o,s,a,l,u=0,c=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(gd);e=$u(e)||0,jo(n)&&(c=!!n.leading,f="maxWait"in n,o=f?L0($u(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d);function p(E){var O=r,S=i;return r=i=void 0,u=E,s=t.apply(S,O),s}function h(E){return u=E,a=setTimeout(D,e),c?p(E):s}function m(E){var O=E-l,S=E-u,B=e-O;return f?N0(B,o-S):B}function y(E){var O=E-l,S=E-u;return l===void 0||O>=e||O<0||f&&S>=o}function D(){var E=da();if(y(E))return w(E);a=setTimeout(D,m(E))}function w(E){return a=void 0,d&&r?p(E):(r=i=void 0,s)}function M(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function v(){return a===void 0?s:w(da())}function F(){var E=da(),O=y(E);if(r=arguments,i=this,l=E,O){if(a===void 0)return h(l);if(f)return a=setTimeout(D,e),p(l)}return a===void 0&&(a=setTimeout(D,e)),s}return F.cancel=M,F.flush=v,F}function V0(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(gd);return jo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),I0(t,e,{leading:r,maxWait:e,trailing:i})}function jo(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function P0(t){return!!t&&typeof t=="object"}function R0(t){return typeof t=="symbol"||P0(t)&&B0.call(t)==x0}function $u(t){if(typeof t=="number")return t;if(R0(t))return Hu;if(jo(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=jo(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(k0,"");var n=E0.test(t);return n||S0.test(t)?_0(t.slice(2),n?2:8):w0.test(t)?Hu:+t}var Lr=V0,Ja={exports:{}};(function(t,e){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",h="[object GeneratorFunction]",m="[object Map]",y="[object Number]",D="[object Null]",w="[object Object]",M="[object Proxy]",v="[object RegExp]",F="[object Set]",E="[object String]",O="[object Undefined]",S="[object WeakMap]",B="[object ArrayBuffer]",R="[object DataView]",K="[object Float32Array]",$="[object Float64Array]",j="[object Int8Array]",te="[object Int16Array]",he="[object Int32Array]",le="[object Uint8Array]",ye="[object Uint8ClampedArray]",be="[object Uint16Array]",ne="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,Re=/^\[object .+?Constructor\]$/,lt=/^(?:0|[1-9]\d*)$/,Q={};Q[K]=Q[$]=Q[j]=Q[te]=Q[he]=Q[le]=Q[ye]=Q[be]=Q[ne]=!0,Q[a]=Q[l]=Q[B]=Q[c]=Q[R]=Q[f]=Q[d]=Q[p]=Q[m]=Q[y]=Q[w]=Q[v]=Q[F]=Q[E]=Q[S]=!1;var ut=typeof xn=="object"&&xn&&xn.Object===Object&&xn,et=typeof self=="object"&&self&&self.Object===Object&&self,He=ut||et||Function("return this")(),Yt=e&&!e.nodeType&&e,$e=Yt&&!0&&t&&!t.nodeType&&t,Xt=$e&&$e.exports===Yt,ct=Xt&&ut.process,Zt=function(){try{var g=$e&&$e.require&&$e.require("util").types;return g||ct&&ct.binding&&ct.binding("util")}catch{}}(),Rn=Zt&&Zt.isTypedArray;function Hn(g,b,C){switch(C.length){case 0:return g.call(b);case 1:return g.call(b,C[0]);case 2:return g.call(b,C[0],C[1]);case 3:return g.call(b,C[0],C[1],C[2])}return g.apply(b,C)}function vr(g,b){for(var C=-1,N=Array(g);++C<g;)N[C]=b(C);return N}function yr(g){return function(b){return g(b)}}function $n(g,b){return g==null?void 0:g[b]}function zn(g,b){return function(C){return g(b(C))}}var br=Array.prototype,Dr=Function.prototype,qe=Object.prototype,ft=He["__core-js_shared__"],Ft=Dr.toString,Me=qe.hasOwnProperty,dn=function(){var g=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),jn=qe.toString,Cr=Ft.call(Object),Ar=RegExp("^"+Ft.call(Me).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qt=Xt?He.Buffer:void 0,ao=He.Symbol,lo=He.Uint8Array,uo=Qt?Qt.allocUnsafe:void 0,co=zn(Object.getPrototypeOf,Object),fo=Object.create,x=qe.propertyIsEnumerable,V=br.splice,P=ao?ao.toStringTag:void 0,X=function(){try{var g=ta(Object,"defineProperty");return g({},"",{}),g}catch{}}(),G=Qt?Qt.isBuffer:void 0,Ee=Math.max,Ue=Date.now,en=ta(He,"Map"),pn=ta(Object,"create"),tn=function(){function g(){}return function(b){if(!Wn(b))return{};if(fo)return fo(b);g.prototype=b;var C=new g;return g.prototype=void 0,C}}();function yt(g){var b=-1,C=g==null?0:g.length;for(this.clear();++b<C;){var N=g[b];this.set(N[0],N[1])}}function xr(){this.__data__=pn?pn(null):{},this.size=0}function hn(g){var b=this.has(g)&&delete this.__data__[g];return this.size-=b?1:0,b}function Zs(g){var b=this.__data__;if(pn){var C=b[g];return C===r?void 0:C}return Me.call(b,g)?b[g]:void 0}function vi(g){var b=this.__data__;return pn?b[g]!==void 0:Me.call(b,g)}function kr(g,b){var C=this.__data__;return this.size+=this.has(g)?0:1,C[g]=pn&&b===void 0?r:b,this}yt.prototype.clear=xr,yt.prototype.delete=hn,yt.prototype.get=Zs,yt.prototype.has=vi,yt.prototype.set=kr;function nn(g){var b=-1,C=g==null?0:g.length;for(this.clear();++b<C;){var N=g[b];this.set(N[0],N[1])}}function Wh(){this.__data__=[],this.size=0}function qh(g){var b=this.__data__,C=po(b,g);if(C<0)return!1;var N=b.length-1;return C==N?b.pop():V.call(b,C,1),--this.size,!0}function Uh(g){var b=this.__data__,C=po(b,g);return C<0?void 0:b[C][1]}function Kh(g){return po(this.__data__,g)>-1}function Jh(g,b){var C=this.__data__,N=po(C,g);return N<0?(++this.size,C.push([g,b])):C[N][1]=b,this}nn.prototype.clear=Wh,nn.prototype.delete=qh,nn.prototype.get=Uh,nn.prototype.has=Kh,nn.prototype.set=Jh;function wr(g){var b=-1,C=g==null?0:g.length;for(this.clear();++b<C;){var N=g[b];this.set(N[0],N[1])}}function Gh(){this.size=0,this.__data__={hash:new yt,map:new(en||nn),string:new yt}}function Yh(g){var b=mo(this,g).delete(g);return this.size-=b?1:0,b}function Xh(g){return mo(this,g).get(g)}function Zh(g){return mo(this,g).has(g)}function Qh(g,b){var C=mo(this,g),N=C.size;return C.set(g,b),this.size+=C.size==N?0:1,this}wr.prototype.clear=Gh,wr.prototype.delete=Yh,wr.prototype.get=Xh,wr.prototype.has=Zh,wr.prototype.set=Qh;function Er(g){var b=this.__data__=new nn(g);this.size=b.size}function em(){this.__data__=new nn,this.size=0}function tm(g){var b=this.__data__,C=b.delete(g);return this.size=b.size,C}function nm(g){return this.__data__.get(g)}function rm(g){return this.__data__.has(g)}function im(g,b){var C=this.__data__;if(C instanceof nn){var N=C.__data__;if(!en||N.length<n-1)return N.push([g,b]),this.size=++C.size,this;C=this.__data__=new wr(N)}return C.set(g,b),this.size=C.size,this}Er.prototype.clear=em,Er.prototype.delete=tm,Er.prototype.get=nm,Er.prototype.has=rm,Er.prototype.set=im;function om(g,b){var C=ia(g),N=!C&&ra(g),Z=!C&&!N&&Du(g),ae=!C&&!N&&!Z&&Au(g),fe=C||N||Z||ae,Y=fe?vr(g.length,String):[],de=Y.length;for(var dt in g)(b||Me.call(g,dt))&&!(fe&&(dt=="length"||Z&&(dt=="offset"||dt=="parent")||ae&&(dt=="buffer"||dt=="byteLength"||dt=="byteOffset")||yu(dt,de)))&&Y.push(dt);return Y}function Qs(g,b,C){(C!==void 0&&!go(g[b],C)||C===void 0&&!(b in g))&&ea(g,b,C)}function sm(g,b,C){var N=g[b];(!(Me.call(g,b)&&go(N,C))||C===void 0&&!(b in g))&&ea(g,b,C)}function po(g,b){for(var C=g.length;C--;)if(go(g[C][0],b))return C;return-1}function ea(g,b,C){b=="__proto__"&&X?X(g,b,{configurable:!0,enumerable:!0,value:C,writable:!0}):g[b]=C}var am=Dm();function ho(g){return g==null?g===void 0?O:D:P&&P in Object(g)?Cm(g):Sm(g)}function gu(g){return yi(g)&&ho(g)==a}function lm(g){if(!Wn(g)||wm(g))return!1;var b=sa(g)?Ar:Re;return b.test(Mm(g))}function um(g){return yi(g)&&Cu(g.length)&&!!Q[ho(g)]}function cm(g){if(!Wn(g))return Em(g);var b=bu(g),C=[];for(var N in g)N=="constructor"&&(b||!Me.call(g,N))||C.push(N);return C}function vu(g,b,C,N,Z){g!==b&&am(b,function(ae,fe){if(Z||(Z=new Er),Wn(ae))fm(g,b,fe,C,vu,N,Z);else{var Y=N?N(na(g,fe),ae,fe+"",g,b,Z):void 0;Y===void 0&&(Y=ae),Qs(g,fe,Y)}},xu)}function fm(g,b,C,N,Z,ae,fe){var Y=na(g,C),de=na(b,C),dt=fe.get(de);if(dt){Qs(g,C,dt);return}var tt=ae?ae(Y,de,C+"",g,b,fe):void 0,bi=tt===void 0;if(bi){var aa=ia(de),la=!aa&&Du(de),wu=!aa&&!la&&Au(de);tt=de,aa||la||wu?ia(Y)?tt=Y:Fm(Y)?tt=vm(Y):la?(bi=!1,tt=hm(de,!0)):wu?(bi=!1,tt=gm(de,!0)):tt=[]:Bm(de)||ra(de)?(tt=Y,ra(Y)?tt=Lm(Y):(!Wn(Y)||sa(Y))&&(tt=Am(de))):bi=!1}bi&&(fe.set(de,tt),Z(tt,de,N,ae,fe),fe.delete(de)),Qs(g,C,tt)}function dm(g,b){return Om(_m(g,b,ku),g+"")}var pm=X?function(g,b){return X(g,"toString",{configurable:!0,enumerable:!1,value:Im(b),writable:!0})}:ku;function hm(g,b){if(b)return g.slice();var C=g.length,N=uo?uo(C):new g.constructor(C);return g.copy(N),N}function mm(g){var b=new g.constructor(g.byteLength);return new lo(b).set(new lo(g)),b}function gm(g,b){var C=b?mm(g.buffer):g.buffer;return new g.constructor(C,g.byteOffset,g.length)}function vm(g,b){var C=-1,N=g.length;for(b||(b=Array(N));++C<N;)b[C]=g[C];return b}function ym(g,b,C,N){var Z=!C;C||(C={});for(var ae=-1,fe=b.length;++ae<fe;){var Y=b[ae],de=N?N(C[Y],g[Y],Y,C,g):void 0;de===void 0&&(de=g[Y]),Z?ea(C,Y,de):sm(C,Y,de)}return C}function bm(g){return dm(function(b,C){var N=-1,Z=C.length,ae=Z>1?C[Z-1]:void 0,fe=Z>2?C[2]:void 0;for(ae=g.length>3&&typeof ae=="function"?(Z--,ae):void 0,fe&&xm(C[0],C[1],fe)&&(ae=Z<3?void 0:ae,Z=1),b=Object(b);++N<Z;){var Y=C[N];Y&&g(b,Y,N,ae)}return b})}function Dm(g){return function(b,C,N){for(var Z=-1,ae=Object(b),fe=N(b),Y=fe.length;Y--;){var de=fe[g?Y:++Z];if(C(ae[de],de,ae)===!1)break}return b}}function mo(g,b){var C=g.__data__;return km(b)?C[typeof b=="string"?"string":"hash"]:C.map}function ta(g,b){var C=$n(g,b);return lm(C)?C:void 0}function Cm(g){var b=Me.call(g,P),C=g[P];try{g[P]=void 0;var N=!0}catch{}var Z=jn.call(g);return N&&(b?g[P]=C:delete g[P]),Z}function Am(g){return typeof g.constructor=="function"&&!bu(g)?tn(co(g)):{}}function yu(g,b){var C=typeof g;return b=b==null?s:b,!!b&&(C=="number"||C!="symbol"&&lt.test(g))&&g>-1&&g%1==0&&g<b}function xm(g,b,C){if(!Wn(C))return!1;var N=typeof b;return(N=="number"?oa(C)&&yu(b,C.length):N=="string"&&b in C)?go(C[b],g):!1}function km(g){var b=typeof g;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?g!=="__proto__":g===null}function wm(g){return!!dn&&dn in g}function bu(g){var b=g&&g.constructor,C=typeof b=="function"&&b.prototype||qe;return g===C}function Em(g){var b=[];if(g!=null)for(var C in Object(g))b.push(C);return b}function Sm(g){return jn.call(g)}function _m(g,b,C){return b=Ee(b===void 0?g.length-1:b,0),function(){for(var N=arguments,Z=-1,ae=Ee(N.length-b,0),fe=Array(ae);++Z<ae;)fe[Z]=N[b+Z];Z=-1;for(var Y=Array(b+1);++Z<b;)Y[Z]=N[Z];return Y[b]=C(fe),Hn(g,this,Y)}}function na(g,b){if(!(b==="constructor"&&typeof g[b]=="function")&&b!="__proto__")return g[b]}var Om=Tm(pm);function Tm(g){var b=0,C=0;return function(){var N=Ue(),Z=o-(N-C);if(C=N,Z>0){if(++b>=i)return arguments[0]}else b=0;return g.apply(void 0,arguments)}}function Mm(g){if(g!=null){try{return Ft.call(g)}catch{}try{return g+""}catch{}}return""}function go(g,b){return g===b||g!==g&&b!==b}var ra=gu(function(){return arguments}())?gu:function(g){return yi(g)&&Me.call(g,"callee")&&!x.call(g,"callee")},ia=Array.isArray;function oa(g){return g!=null&&Cu(g.length)&&!sa(g)}function Fm(g){return yi(g)&&oa(g)}var Du=G||Vm;function sa(g){if(!Wn(g))return!1;var b=ho(g);return b==p||b==h||b==u||b==M}function Cu(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=s}function Wn(g){var b=typeof g;return g!=null&&(b=="object"||b=="function")}function yi(g){return g!=null&&typeof g=="object"}function Bm(g){if(!yi(g)||ho(g)!=w)return!1;var b=co(g);if(b===null)return!0;var C=Me.call(b,"constructor")&&b.constructor;return typeof C=="function"&&C instanceof C&&Ft.call(C)==Cr}var Au=Rn?yr(Rn):um;function Lm(g){return ym(g,xu(g))}function xu(g){return oa(g)?om(g,!0):cm(g)}var Nm=bm(function(g,b,C){vu(g,b,C)});function Im(g){return function(){return g}}function ku(g){return g}function Vm(){return!1}t.exports=Nm})(Ja,Ja.exports);var H0=Ja.exports;function Fe(t){this.content=t}Fe.prototype={constructor:Fe,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Fe(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Fe(n)},addToStart:function(t,e){return new Fe([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Fe(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Fe(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Fe.from(t),t.size?new Fe(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Fe.from(t),t.size?new Fe(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Fe.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}};Fe.from=function(t){if(t instanceof Fe)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Fe(e)};function vd(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=vd(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function yd(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let u=0,c=Math.min(s.text.length,a.text.length);for(;u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let u=yd(s.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class _{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],u=a+l.nodeSize;if(u>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(o+=a.text.slice(Math.max(e,l)-l,n-l),s=!r):a.isLeaf?(i?o+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(o+=a.type.spec.leafText(a)),s=!r):!s&&a.isBlock&&(o+=r,s=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new _(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new _(r,i)}cutByIndex(e,n){return e==n?_.empty:e==0&&n==this.content.length?this:new _(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new _(i,o)}addToStart(e){return new _([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return vd(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return yd(this,e,n,r)}findIndex(e,n=-1){if(e==0)return bo(0,e);if(e==this.size)return bo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?bo(r+1,s):bo(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return _.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new _(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new _(n||e,r)}static from(e){if(!e)return _.empty;if(e instanceof _)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_.empty=new _([],0);const pa={index:0,offset:0};function bo(t,e){return pa.index=t,pa.offset=e,pa}function Wo(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Wo(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Wo(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class ie{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Wo(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ie.none;if(e instanceof ie)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}ie.none=[];class Ki extends Error{}class L{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Dd(this.content,e+this.openStart,n);return r&&new L(r,this.openStart,this.openEnd)}removeBetween(e,n){return new L(bd(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return L.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new L(_.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new L(e,r,i)}}L.empty=new L(_.empty,0,0);function bd(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(bd(o.content,e-i-1,n-i-1)))}function Dd(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Dd(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function $0(t,e,n){if(n.openStart>t.depth)throw new Ki("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ki("Inconsistent open depths");return Cd(t,e,n,0)}function Cd(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=Cd(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return tr(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=z0(n,t);return tr(o,xd(t,s,a,e,r))}else return tr(o,qo(t,e,r))}function Ad(t,e){if(!e.type.compatibleContent(t.type))throw new Ki("Cannot join "+e.type.name+" onto "+t.type.name)}function Ga(t,e,n){let r=t.node(n);return Ad(r,e.node(n)),r}function er(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Li(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(er(t.nodeAfter,r),o++));for(let a=o;a<s;a++)er(i.child(a),r);e&&e.depth==n&&e.textOffset&&er(e.nodeBefore,r)}function tr(t,e){if(!t.type.validContent(e))throw new Ki("Invalid content for node "+t.type.name);return t.copy(e)}function xd(t,e,n,r,i){let o=t.depth>i&&Ga(t,e,i+1),s=r.depth>i&&Ga(n,r,i+1),a=[];return Li(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(Ad(o,s),er(tr(o,xd(t,e,n,r,i+1)),a)):(o&&er(tr(o,qo(t,e,i+1)),a),Li(e,n,i,a),s&&er(tr(s,qo(n,r,i+1)),a)),Li(r,null,i,a),new _(a)}function qo(t,e,n){let r=[];if(Li(null,t,n,r),t.depth>n){let i=Ga(t,e,n+1);er(tr(i,qo(t,e,n+1)),r)}return Li(e,null,n,r),new _(r)}function z0(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(_.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Ji{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ie.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Uo(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),u=o-l;if(r.push(s,a,i+l),!u||(s=s.child(a),s.isText))break;o=u-1,i+=l+1}return new Ji(n,r,o)}static resolveCached(e,n){for(let i=0;i<ha.length;i++){let o=ha[i];if(o.pos==n&&o.doc==e)return o}let r=ha[ma]=Ji.resolve(e,n);return ma=(ma+1)%j0,r}}let ha=[],ma=0,j0=12;class Uo{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const W0=Object.create(null);class zt{constructor(e,n,r,i=ie.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||_.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Wo(this.attrs,n||e.defaultAttrs||W0)&&ie.sameSet(this.marks,r||ie.none)}copy(e=null){return e==this.content?this:new zt(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new zt(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return L.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),u=i.node(s).content.cut(i.pos-a,o.pos-a);return new L(u,i.depth-s,o.depth-s)}replace(e,n,r){return $0(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Ji.resolveCached(this,e)}resolveNoCache(e){return Ji.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),kd(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=_.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let e=ie.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!ie.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=_.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}}zt.prototype.text=void 0;class Ko extends zt{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):kd(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ko(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ko(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function kd(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ar{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new q0(e,n);if(r.next==null)return ar.empty;let i=wd(r);r.next&&r.err("Unexpected trailing text");let o=Z0(X0(i));return Q0(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return _.from(a.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:f}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,a.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}ar.empty=new ar(!0);class q0{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function wd(t){let e=[];do e.push(U0(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function U0(t){let e=[];do e.push(K0(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function K0(t){let e=Y0(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=J0(t,e);else break;return e}function zu(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function J0(t,e){let n=zu(t),r=n;return t.eat(",")&&(t.next!="}"?r=zu(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function G0(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Y0(t){if(t.eat("(")){let e=wd(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=G0(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function X0(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let u={term:l,to:a};return e[s].push(u),u}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(o(u,a)),[]);if(s.type=="seq")for(let l=0;;l++){let u=o(s.exprs[l],a);if(l==s.exprs.length-1)return u;i(u,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,l),c),l=c}if(s.max==-1)i(o(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let c=n();r(l,c),i(o(s.expr,l),c),l=c}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Ed(t,e){return e-t}function ju(t,e){let n=[];return r(e),n.sort(Ed);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function Z0(t){let e=Object.create(null);return n(ju(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);ju(t,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new ar(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(Ed);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function Q0(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Sd(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function _d(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Od(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new ev(t[n]);return e}class Jo{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Od(r.attrs),this.defaultAttrs=Sd(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ar.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:_d(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new zt(this,this.computeAttrs(e),_.from(n),ie.setFrom(r))}createChecked(e=null,n,r){if(n=_.from(n),!this.validContent(n))throw new RangeError("Invalid content for node "+this.name);return new zt(this,this.computeAttrs(e),n,ie.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=_.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(_.empty,!0);return o?new zt(this,e,n.append(o),ie.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ie.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new Jo(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class ev{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Ls{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Od(i.attrs),this.excluded=null;let o=Sd(this.attrs);this.instance=o?new ie(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ie(this,_d(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Ls(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class tv{constructor(e){this.cached=Object.create(null),this.spec={nodes:Fe.from(e.nodes),marks:Fe.from(e.marks||{}),topNode:e.topNode},this.nodes=Jo.compile(this.spec.nodes,this),this.marks=Ls.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let i=this.nodes[r],o=i.spec.content||"",s=i.spec.marks;i.contentMatch=n[o]||(n[o]=ar.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=s=="_"?null:s?Wu(this,s.split(" ")):s==""||!i.inlineContent?[]:null}for(let r in this.marks){let i=this.marks[r],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Wu(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Jo){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ko(r,r.defaultAttrs,e,ie.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return zt.fromJSON(this,e)}markFromJSON(e){return ie.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Wu(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class Qr{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new Uu(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Uu(this,n,!0);return r.addAll(e,n.from,n.to),L.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(iv(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Ku(s)),s.mark=i})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Ku(s)),s.node=i})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Qr(e,Qr.schemaRules(e)))}}const Td={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nv={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Md={ol:!0,ul:!0},Go=1,Yo=2,Ni=4;function qu(t,e,n){return e!=null?(e?Go:0)|(e==="full"?Yo:0):t&&t.whitespace=="pre"?Go|Yo:n&~Ni}class Do{constructor(e,n,r,i,o,s,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=ie.none,this.stashMarks=[],this.match=s||(a&Ni?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(_.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Go)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=_.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(_.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):sv(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Td.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Uu{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=qu(null,n.preserveWhitespace,0)|(r?Ni:0);i?o=new Do(i.type,i.attrs,ie.none,ie.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Do(null,null,ie.none,ie.none,!0,null,s):o=new Do(e.schema.topNodeType,null,ie.none,ie.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let n=e.getAttribute("style"),r=n?this.readStyles(ov(n)):null,i=this.top;if(r!=null)for(let o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(e),r!=null)for(let o=0;o<r.length;o++)this.removePendingMark(r[o],i)}}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Yo||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Go)r.options&Yo?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;Md.hasOwnProperty(r)&&this.parser.normalizeLists&&rv(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:nv.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,a=this.top,l=this.needsBlock;if(Td.hasOwnProperty(r))s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),s&&this.sync(a),this.needsBlock=l}else this.addElementByRule(e,o,o.consuming===!1?i:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=ie.none;e:for(let r=0;r<e.length;r+=2)for(let i=void 0;;){let o=this.parser.matchStyle(e[r],e[r+1],this,i);if(!o)continue e;if(o.ignore)return null;if(n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)i=o;else break}return n}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=qu(e,i,o.options);o.options&Ni&&o.content.length==0&&(s|=Ni),this.nodes.push(new Do(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=av(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}}function rv(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Md.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function iv(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ov(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function Ku(t){let e={};for(let n in t)e[n]=t[n];return e}function sv(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function av(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class Rt{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=ga(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let u=s.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(o[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let u=s.marks[l++],c=this.serializeMark(u,s.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Rt.renderSpec(ga(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Rt.renderSpec(ga(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(let c in l)if(l[c]!=null){let f=c.indexOf(" ");f>0?a.setAttributeNS(c.slice(0,f),c.slice(f+1),l[c]):a.setAttribute(c,l[c])}}for(let c=u;c<n.length;c++){let f=n[c];if(f===0){if(c<n.length-1||c>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:p}=Rt.renderSpec(e,f,r);if(a.appendChild(d),p){if(s)throw new RangeError("Multiple content holes");s=p}}}return{dom:a,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Rt(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Ju(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Ju(e.marks)}}function Ju(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ga(t){return t.document||window.document}const Fd=65535,Bd=Math.pow(2,16);function lv(t,e){return t+e*Bd}function Gu(t){return t&Fd}function uv(t){return(t-(t&Fd))/Bd}const Ld=1,Nd=2,Fo=4,Id=8;class Ya{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Id)>0}get deletedBefore(){return(this.delInfo&(Ld|Fo))>0}get deletedAfter(){return(this.delInfo&(Nd|Fo))>0}get deletedAcross(){return(this.delInfo&Fo)>0}}class At{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&At.empty)return At.empty}recover(e){let n=0,r=Gu(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+uv(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+o],c=this.ranges[a+s],f=l+u;if(e<=f){let d=u?e==l?-1:e==f?1:n:n,p=l+i+(d<0?0:c);if(r)return p;let h=e==(n<0?l:f)?null:lv(a/3,e-l),m=e==l?Nd:e==f?Ld:Fo;return(n<0?e!=l:e!=f)&&(m|=Id),new Ya(p,m,h)}i+=c-u}return r?e+i:new Ya(e+i,0,null)}touches(e,n){let r=0,i=Gu(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+o],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(a,a+u,l,l+c),o+=c-u}}invert(){return new At(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?At.empty:new At(e<0?[0,-e,0]:[0,0,e])}}At.empty=new At([]);class qr{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new qr(this.maps,this.mirror,e,n)}copy(){return new qr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new qr;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Ya(e,i,null)}}const va=Object.create(null);class Nn{getMap(){return At.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=va[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in va)throw new RangeError("Duplicate use of step JSON ID "+e);return va[e]=n,n.prototype.jsonID=e,n}}class it{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new it(e,null)}static fail(e){return new it(null,e)}static fromReplace(e,n,r,i){try{return it.ok(e.replace(n,r,i))}catch(o){if(o instanceof Ki)return it.fail(o.message);throw o}}}function Ml(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Ml(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return _.fromArray(r)}class kn extends Nn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new L(Ml(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return it.fromReplace(e,this.from,this.to,o)}invert(){return new Ht(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new kn(n.pos,r.pos,this.mark)}merge(e){return e instanceof kn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new kn(n.from,n.to,e.markFromJSON(n.mark))}}Nn.jsonID("addMark",kn);class Ht extends Nn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new L(Ml(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return it.fromReplace(e,this.from,this.to,r)}invert(){return new kn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ht(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ht&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ht(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ht(n.from,n.to,e.markFromJSON(n.mark))}}Nn.jsonID("removeMark",Ht);class Ve extends Nn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Xa(e,this.from,this.to)?it.fail("Structure replace would overwrite content"):it.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new At([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ve(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ve(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ve)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?L.empty:new L(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ve(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?L.empty:new L(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ve(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ve(n.from,n.to,L.fromJSON(e,n.slice),!!n.structure)}}Nn.jsonID("replace",Ve);class _e extends Nn{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Xa(e,this.from,this.gapFrom)||Xa(e,this.gapTo,this.to)))return it.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return it.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?it.fromReplace(e,this.from,this.to,r):it.fail("Content does not fit in gap")}getMap(){return new At([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new _e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new _e(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new _e(n.from,n.to,n.gapFrom,n.gapTo,L.fromJSON(e,n.slice),n.insert,!!n.structure)}}Nn.jsonID("replaceAround",_e);function Xa(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function cv(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&c.type.allowsMarkType(r.type)){let d=Math.max(u,e),p=Math.min(u+l.nodeSize,n),h=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(h)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=p:i.push(s=new Ht(d,p,f[m])));a&&a.to==d?a.to=p:o.push(a=new kn(d,p,r))}}),i.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function fv(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof Ls){let u=s.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let u=Math.min(a+s.nodeSize,n);for(let c=0;c<l.length;c++){let f=l[c],d;for(let p=0;p<i.length;p++){let h=i[p];h.step==o-1&&f.eq(i[p].style)&&(d=h)}d?(d.to=u,d.step=o):i.push({style:f,from:Math.max(a,e),to:u,step:o})}}}),i.forEach(s=>t.step(new Ht(s.from,s.to,s.style)))}function dv(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),o=[],s=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),u=s+l.nodeSize,c=r.matchType(l.type);if(!c)o.push(new Ve(s,u,L.empty));else{r=c;for(let f=0;f<l.marks.length;f++)n.allowsMarkType(l.marks[f].type)||t.step(new Ht(s,u,l.marks[f]))}s=u}if(!r.validEnd){let a=r.fillBefore(_.empty,!0);t.replace(s,s,new L(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function pv(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function mi(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!pv(i,o,s))break}return null}function hv(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,u=a,c=_.empty,f=0;for(let h=o,m=!1;h>n;h--)m||r.index(h)>0?(m=!0,c=_.from(r.node(h).copy(c)),f++):l--;let d=_.empty,p=0;for(let h=o,m=!1;h>n;h--)m||i.after(h+1)<i.end(h)?(m=!0,d=_.from(i.node(h).copy(d)),p++):u++;t.step(new _e(l,u,s,a,new L(c.append(d),f,p),c.size-f,!0))}function Fl(t,e,n=null,r=t){let i=mv(t,e),o=i&&gv(r,e);return o?i.map(Yu).concat({type:e,attrs:n}).concat(o.map(Yu)):null}function Yu(t){return{type:t,attrs:null}}function mv(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function gv(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:s}function vv(t,e,n){let r=_.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new _e(i,o,i,o,new L(r,0,0),n.length,!0))}function yv(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&bv(t.doc,t.mapping.slice(o).map(a),r)){t.clearIncompatible(t.mapping.slice(o).map(a,1),r);let l=t.mapping.slice(o),u=l.map(a,1),c=l.map(a+s.nodeSize,1);return t.step(new _e(u,c,u+1,c-1,new L(_.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function bv(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Dv(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new _e(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new L(_.from(s),0,0),1,!0))}function Ur(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(d,f.childCount),h=r&&r[c]||f;if(h!=f&&(p=p.replaceChild(0,h.type.create(h.attrs))),!f.canReplace(d+1,f.childCount)||!h.type.validContent(p))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function Cv(t,e,n=1,r){let i=t.doc.resolve(e),o=_.empty,s=_.empty;for(let a=i.depth,l=i.depth-n,u=n-1;a>l;a--,u--){o=_.from(i.node(a).copy(o));let c=r&&r[u];s=_.from(c?c.type.create(c.attrs,s):i.node(a).copy(s))}t.step(new Ve(e,e,new L(o.append(s),n,n),!0))}function no(t,e){let n=t.resolve(e),r=n.index();return Av(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Av(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function xv(t,e,n){let r=new Ve(e-n,e+n,L.empty,!0);t.step(r)}function kv(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Vd(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(l,l,f[0])}if(c)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function Bl(t,e,n=e,r=L.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return Pd(i,o,r)?new Ve(e,n,r):new wv(i,o,r).fit()}function Pd(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class wv{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=_.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=_.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new L(o,s,a);return e>-1?new _e(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ve(r.pos,i.pos,l):null}findFittable(){for(let e=1;e<=2;e++)for(let n=this.unplaced.openStart;n>=0;n--){let r,i=null;n?(i=ya(this.unplaced.content,n-1).firstChild,r=i.content):r=this.unplaced.content;let o=r.firstChild;for(let s=this.depth;s>=0;s--){let{type:a,match:l}=this.frontier[s],u,c=null;if(e==1&&(o?l.matchType(o.type)||(c=l.fillBefore(_.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:c};if(e==2&&o&&(u=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:u};if(i&&l.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ya(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new L(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ya(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new L(_i(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new L(_i(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,u=0,c=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));f=f.matchFragment(i)}let p=a.size+e-(s.content.size-s.openEnd);for(;u<a.childCount;){let m=a.child(u),y=f.matchType(m.type);if(!y)break;u++,(u>1||l==0||m.content.size)&&(f=y,c.push(Rd(m.mark(d.allowedMarks(m.marks)),u==1?l:0,u==a.childCount?p:-1)))}let h=u==a.childCount;h||(p=-1),this.placed=Oi(this.placed,n,_.from(c)),this.frontier[n].match=f,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=a;m<p;m++){let D=y.lastChild;this.frontier.push({type:D.type,match:D.contentMatchAt(D.childCount)}),y=D.content}this.unplaced=h?e==0?L.empty:new L(_i(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new L(_i(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!ba(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=ba(e,n,i,r,o);if(!!s){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=ba(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Oi(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Oi(this.placed,this.depth,_.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(_.empty,!0);n.childCount&&(this.placed=Oi(this.placed,this.frontier.length,n))}}function _i(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(_i(t.firstChild.content,e-1,n)))}function Oi(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Oi(t.lastChild.content,e-1,n)))}function ya(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Rd(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Rd(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(_.empty,!0)))),t.copy(r)}function ba(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!Ev(n,o.content,s)?a:null}function Ev(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Sv(t){return t.spec.defining||t.spec.definingForContent}function _v(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(Pd(i,o,r))return t.step(new Ve(e,n,r));let s=$d(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let h=i.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(d)>-1?a=d:i.before(d)==p&&s.splice(1,0,-d)}let l=s.indexOf(a),u=[],c=r.openStart;for(let d=r.content,p=0;;p++){let h=d.firstChild;if(u.push(h),p==r.openStart)break;d=h.content}for(let d=c-1;d>=0;d--){let p=u[d].type,h=Sv(p);if(h&&i.node(l).type!=p)c=d;else if(h||!p.isTextblock)break}for(let d=r.openStart;d>=0;d--){let p=(d+c+1)%(r.openStart+1),h=u[p];if(!!h)for(let m=0;m<s.length;m++){let y=s[(m+l)%s.length],D=!0;y<0&&(D=!1,y=-y);let w=i.node(y-1),M=i.index(y-1);if(w.canReplaceWith(M,M,h.type,h.marks))return t.replace(i.before(y),D?o.after(y):n,new L(Hd(r.content,0,r.openStart,p),p,r.openEnd))}}let f=t.steps.length;for(let d=s.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let p=s[d];p<0||(e=i.before(p),n=o.after(p))}}function Hd(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Hd(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(_.empty,!0))}return t}function Ov(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=kv(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new L(_.from(r),0,0))}function Tv(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=$d(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function $d(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}let ei=class extends Error{};ei=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ei.prototype=Object.create(Error.prototype);ei.prototype.constructor=ei;ei.prototype.name="TransformError";class zd{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new qr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ei(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=L.empty){let i=Bl(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new L(_.from(r),0,0))}delete(e,n){return this.replace(e,n,L.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return _v(this,e,n,r),this}replaceRangeWith(e,n,r){return Ov(this,e,n,r),this}deleteRange(e,n){return Tv(this,e,n),this}lift(e,n){return hv(this,e,n),this}join(e,n=1){return xv(this,e,n),this}wrap(e,n){return vv(this,e,n),this}setBlockType(e,n=e,r,i=null){return yv(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i=[]){return Dv(this,e,n,r,i),this}split(e,n=1,r){return Cv(this,e,n,r),this}addMark(e,n,r){return cv(this,e,n,r),this}removeMark(e,n,r){return fv(this,e,n,r),this}clearIncompatible(e,n,r){return dv(this,e,n,r),this}}const Da=Object.create(null);class q{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Mv(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=L.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],c=e.mapping.slice(o);e.replaceRange(c.map(l.pos),c.map(u.pos),a?L.empty:n),a==0&&Qu(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),u=l.map(s.pos),c=l.map(a.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Qu(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new W(e):Or(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Or(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Or(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new St(e.node(0))}static atStart(e){return Or(e,e,0,0,1)||new St(e)}static atEnd(e){return Or(e,e,e.content.size,e.childCount,-1)||new St(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Da[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Da)throw new RangeError("Duplicate use of selection JSON ID "+e);return Da[e]=n,n.prototype.jsonID=e,n}getBookmark(){return W.between(this.$anchor,this.$head).getBookmark()}}q.prototype.visible=!0;class Mv{constructor(e,n){this.$from=e,this.$to=n}}let Xu=!1;function Zu(t){!Xu&&!t.parent.inlineContent&&(Xu=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class W extends q{constructor(e,n=e){Zu(e),Zu(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return q.near(r);let i=e.resolve(n.map(this.anchor));return new W(i.parent.inlineContent?i:r,r)}replace(e,n=L.empty){if(super.replace(e,n),n==L.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof W&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ns(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new W(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=q.findFrom(n,r,!0)||q.findFrom(n,-r,!0);if(o)n=o.$head;else return q.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(q.findFrom(e,-r,!0)||q.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new W(e,n)}}q.jsonID("text",W);class Ns{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ns(e.map(this.anchor),e.map(this.head))}resolve(e){return W.between(e.resolve(this.anchor),e.resolve(this.head))}}class z extends q{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?q.near(o):new z(o)}content(){return new L(_.from(this.node),0,0)}eq(e){return e instanceof z&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ll(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new z(e.resolve(n.anchor))}static create(e,n){return new z(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}z.prototype.visible=!1;q.jsonID("node",z);class Ll{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ns(r,r):new Ll(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&z.isSelectable(r)?new z(n):q.near(n)}}class St extends q{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=L.empty){if(n==L.empty){e.delete(0,e.doc.content.size);let r=q.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new St(e)}map(e){return new St(e)}eq(e){return e instanceof St}getBookmark(){return Fv}}q.jsonID("all",St);const Fv={map(){return this},resolve(t){return new St(t)}};function Or(t,e,n,r,i,o=!1){if(e.inlineContent)return W.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&z.isSelectable(a))return z.create(t,n-(i<0?a.nodeSize:0))}else{let l=Or(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function Qu(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ve||i instanceof _e))return;let o=t.mapping.maps[r],s;o.forEach((a,l,u,c)=>{s==null&&(s=c)}),t.setSelection(q.near(t.doc.resolve(s),n))}const ec=1,Co=2,tc=4;class Bv extends zd{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ec)&~Co,this.storedMarks=null,this}get selectionSet(){return(this.updated&ec)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Co,this}ensureMarks(e){return ie.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Co)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Co,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ie.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r==null?n:r,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(q.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=tc,this}get scrolledIntoView(){return(this.updated&tc)>0}}function nc(t,e){return!e||!t?t:t.bind(e)}class Ti{constructor(e,n,r){this.name=e,this.init=nc(n.init,r),this.apply=nc(n.apply,r)}}const Lv=[new Ti("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ti("selection",{init(t,e){return t.selection||q.atStart(e.doc)},apply(t){return t.selection}}),new Ti("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ti("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Ca{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Lv.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ti(r.key,r.spec.state,r))})}}class Nr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,u=i?i[s].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Nr(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new Bv(this)}static create(e){let n=new Ca(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Nr(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Ca(this.schema,e.plugins),r=n.fields,i=new Nr(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ca(e.schema,e.plugins),o=new Nr(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=zt.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=q.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=u.fromJSON.call(l,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function jd(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=jd(i,e,{})),n[r]=i}return n}class we{constructor(e){this.spec=e,this.props={},e.props&&jd(e.props,this,this.props),this.key=e.key?e.key.key:Wd("plugin")}getState(e){return e[this.key]}}const Aa=Object.create(null);function Wd(t){return t in Aa?t+"$"+ ++Aa[t]:(Aa[t]=0,t+"$")}class Qe{constructor(e="key"){this.key=Wd(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Za=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0),Nv=(t,e,n)=>{let{$cursor:r}=t.selection;if(!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0))return!1;let i=qd(r);if(!i){let s=r.blockRange(),a=s&&mi(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&Jd(t,i,e))return!0;if(r.parent.content.size==0&&(ti(o,"end")||z.isSelectable(o))){let s=Bl(t.doc,r.before(),r.after(),L.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(ti(o,"end")?q.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):z.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function ti(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Iv=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=qd(r)}let s=o&&o.nodeBefore;return!s||!z.isSelectable(s)?!1:(e&&e(t.tr.setSelection(z.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function qd(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}const Vv=(t,e,n)=>{let{$cursor:r}=t.selection;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;let i=Ud(r);if(!i)return!1;let o=i.nodeAfter;if(Jd(t,i,e))return!0;if(r.parent.content.size==0&&(ti(o,"start")||z.isSelectable(o))){let s=Bl(t.doc,r.before(),r.after(),L.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(ti(o,"start")?q.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):z.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Pv=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Ud(r)}let s=o&&o.nodeAfter;return!s||!z.isSelectable(s)?!1:(e&&e(t.tr.setSelection(z.create(t.doc,o.pos)).scrollIntoView()),!0)};function Ud(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Rv=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&mi(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Hv=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Kd(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const $v=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Kd(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(q.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},zv=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof St||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Kd(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(W.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},jv=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ur(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&mi(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Wv=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(z.create(t.doc,i))),!0)};function qv(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||no(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function Jd(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(qv(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let f=e.pos+i.nodeSize,d=_.empty;for(let m=o.length-1;m>=0;m--)d=_.from(o[m].create(null,d));d=_.from(r.copy(d));let p=t.tr.step(new _e(e.pos-1,f,e.pos,f,new L(d,1,0),o.length,!0)),h=f+2*o.length;no(p.doc,h)&&p.join(h),n(p.scrollIntoView())}return!0}let l=q.findFrom(e,1),u=l&&l.$from.blockRange(l.$to),c=u&&mi(u);if(c!=null&&c>=e.depth)return n&&n(t.tr.lift(u,c).scrollIntoView()),!0;if(a&&ti(i,"start",!0)&&ti(r,"end")){let f=r,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let p=i,h=1;for(;!p.isTextblock;p=p.firstChild)h++;if(f.canReplace(f.childCount,f.childCount,p.content)){if(n){let m=_.empty;for(let D=d.length-1;D>=0;D--)m=_.from(d[D].copy(m));let y=t.tr.step(new _e(e.pos-d.length,e.pos+i.nodeSize,e.pos+h,e.pos+i.nodeSize-h,new L(m,d.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function Gd(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(W.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const Uv=Gd(-1),Kv=Gd(1);function Jv(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&Fl(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function rc(t,e=null){return function(n,r){let{from:i,to:o}=n.selection,s=!1;return n.doc.nodesBetween(i,o,(a,l)=>{if(s)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)s=!0;else{let u=n.doc.resolve(l),c=u.index();s=u.parent.canReplaceWith(c,c+1,t)}}),s?(r&&r(n.tr.setBlockType(i,o,t,e).scrollIntoView()),!0):!1}}typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform&&os.platform()=="darwin";function Gv(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=n.doc.resolve(s.start-2);l=new Uo(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new Uo(i,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let u=Fl(l,t,e,s);return u?(r&&r(Yv(n.tr,s,u,a,t).scrollIntoView()),!0):!1}}function Yv(t,e,n,r,i){let o=_.empty;for(let c=n.length-1;c>=0;c--)o=_.from(n[c].type.create(n[c].attrs,o));t.step(new _e(e.start-(r?2:0),e.end,e.start,e.end,new L(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let a=n.length-s,l=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&Ur(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return t}function Xv(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Zv(e,n,t,o):Qv(e,n,o):!0:!1}}function Zv(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);return o<s&&(i.step(new _e(o-1,s,o,s,new L(_.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Uo(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth)),e(i.lift(r,mi(r)).scrollIntoView()),!0}function Qv(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,h=n.endIndex-1,m=n.startIndex;h>m;h--)p-=i.child(h).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(a?0:1),c+1,s.content.append(l?_.empty:_.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new _e(f-(a?1:0),d+(l?1:0),f+1,d-1,new L((a?_.empty:_.from(i.copy(_.empty))).append(l?_.empty:_.from(i.copy(_.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function e1(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,c=_.from(u?t.create():null),f=new L(_.from(t.create(null,_.from(a.type.create(null,c)))),u?3:1,0),d=o.start,p=o.end;n(e.tr.step(new _e(d-(u?3:1),p,d,p,f,1,!0)).scrollIntoView())}return!0}}const Mn=typeof navigator!="undefined"?navigator:null,ic=typeof document!="undefined"?document:null,In=Mn&&Mn.userAgent||"",Qa=/Edge\/(\d+)/.exec(In),Yd=/MSIE \d/.exec(In),el=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(In),st=!!(Yd||el||Qa),_n=Yd?document.documentMode:el?+el[1]:Qa?+Qa[1]:0,Ut=!st&&/gecko\/(\d+)/i.test(In);Ut&&+(/Firefox\/(\d+)/.exec(In)||[0,0])[1];const tl=!st&&/Chrome\/(\d+)/.exec(In),je=!!tl,t1=tl?+tl[1]:0,Xe=!st&&!!Mn&&/Apple Computer/.test(Mn.vendor),ni=Xe&&(/Mobile\/\w+/.test(In)||!!Mn&&Mn.maxTouchPoints>2),ht=ni||(Mn?/Mac/.test(Mn.platform):!1),It=/Android \d/.test(In),Is=!!ic&&"webkitFontSmoothing"in ic.documentElement.style,n1=Is?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,nt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Nl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let oc=null;const rn=function(t,e,n){let r=oc||(oc=document.createRange());return r.setEnd(t,n==null?t.nodeValue.length:n),r.setStart(t,e||0),r},Gi=function(t,e,n,r){return n&&(sc(t,e,n,r,-1)||sc(t,e,n,r,1))},r1=/^(img|br|input|textarea|hr)$/i;function sc(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Vt(t))){let o=t.parentNode;if(!o||o.nodeType!=1||o1(t)||r1.test(t.nodeName)||t.contentEditable=="false")return!1;e=nt(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Vt(t):0}else return!1}}function Vt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function i1(t,e,n){for(let r=e==0,i=e==Vt(t);r||i;){if(t==n)return!0;let o=nt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Vt(t)}}function o1(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Il=function(t){let e=t.isCollapsed;return e&&je&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function Ir(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function s1(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function mn(t,e){return typeof t=="number"?t:t[e]}function a1(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function ac(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;s=Nl(s)){if(s.nodeType!=1)continue;let a=s,l=a==o.body,u=l?s1(o):a1(a),c=0,f=0;if(e.top<u.top+mn(r,"top")?f=-(u.top-e.top+mn(i,"top")):e.bottom>u.bottom-mn(r,"bottom")&&(f=e.bottom-u.bottom+mn(i,"bottom")),e.left<u.left+mn(r,"left")?c=-(u.left-e.left+mn(i,"left")):e.right>u.right-mn(r,"right")&&(c=e.right-u.right+mn(i,"right")),c||f)if(l)o.defaultView.scrollBy(c,f);else{let d=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),c&&(a.scrollLeft+=c);let h=a.scrollLeft-d,m=a.scrollTop-p;e={left:e.left-h,top:e.top-m,right:e.right-h,bottom:e.bottom-m}}if(l)break}}function l1(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(o,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:Xd(t.dom)}}function Xd(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Nl(r));return e}function u1({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Zd(n,r==0?0:r-e)}function Zd(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Sr=null;function c1(t){if(t.setActive)return t.setActive();if(Sr)return t.focus(Sr);let e=Xd(t);t.focus(Sr==null?{get preventScroll(){return Sr={preventScroll:!0},!0}}:void 0),Sr||(Sr=!1,Zd(e,0))}function Qd(t,e){let n,r=2e8,i,o=0,s=e.top,a=e.top;for(let l=t.firstChild,u=0;l;l=l.nextSibling,u++){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=rn(l).getClientRects();else continue;for(let f=0;f<c.length;f++){let d=c[f];if(d.top<=s&&d.bottom>=a){s=Math.max(d.bottom,s),a=Math.min(d.top,a);let p=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(p<r){n=l,r=p,i=p&&n.nodeType==3?{left:d.right<e.left?d.right:d.left,top:e.top}:e,l.nodeType==1&&p&&(o=u+(e.left>=(d.left+d.right)/2?1:0));continue}}!n&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(o=u+1)}}return n&&n.nodeType==3?f1(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Qd(n,i)}function f1(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=gn(r,1);if(o.top!=o.bottom&&Vl(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Vl(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function d1(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function p1(t,e,n){let{node:r,offset:i}=Qd(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function h1(t,e,n,r){let i=-1;for(let o=e;o!=t.dom;){let s=t.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){let a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else if(a.right<r.left||a.bottom<r.top)i=s.posAfter;else break}o=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,1)}function ep(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(Vl(e,u))return ep(s,e,u)}}if((o=(o+1)%r)==i)break}return t}function m1(t,e){let n=t.dom.ownerDocument,r,i=0;if(n.caretPositionFromPoint)try{let l=n.caretPositionFromPoint(e.left,e.top);l&&({offsetNode:r,offset:i}=l)}catch{}if(!r&&n.caretRangeFromPoint){let l=n.caretRangeFromPoint(e.left,e.top);l&&({startContainer:r,startOffset:i}=l)}let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top+1),s;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let l=t.dom.getBoundingClientRect();if(!Vl(e,l)||(o=ep(t.dom,e,l),!o))return null}if(Xe)for(let l=o;r&&l;l=Nl(l))l.draggable&&(r=void 0);if(o=d1(o,e),r){if(Ut&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let l=r.childNodes[i],u;l.nodeName=="IMG"&&(u=l.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(s=h1(t,r,i,e))}s==null&&(s=p1(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:s,inside:a?a.posAtStart-a.border:-1}}function gn(t,e){let n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}const g1=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function tp(t,e,n){let{node:r,offset:i}=t.docView.domFromPos(e,n<0?-1:1),o=Is||Ut;if(r.nodeType==3)if(o&&(g1.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let s=gn(rn(r,i,i),n);if(Ut&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let a=gn(rn(r,i-1,i-1),-1);if(a.top==s.top){let l=gn(rn(r,i,i+1),-1);if(l.top!=s.top)return Di(l,l.left<a.left)}}return s}else{let s=i,a=i,l=n<0?1:-1;return n<0&&!i?(a++,l=-1):n>=0&&i==r.nodeValue.length?(s--,l=1):n<0?s--:a++,Di(gn(rn(r,s,a),l),l<0)}if(!t.state.doc.resolve(e).parent.inlineContent){if(i&&(n<0||i==Vt(r))){let s=r.childNodes[i-1];if(s.nodeType==1)return xa(s.getBoundingClientRect(),!1)}if(i<Vt(r)){let s=r.childNodes[i];if(s.nodeType==1)return xa(s.getBoundingClientRect(),!0)}return xa(r.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==Vt(r))){let s=r.childNodes[i-1],a=s.nodeType==3?rn(s,Vt(s)-(o?0:1)):s.nodeType==1&&(s.nodeName!="BR"||!s.nextSibling)?s:null;if(a)return Di(gn(a,1),!1)}if(i<Vt(r)){let s=r.childNodes[i];for(;s.pmViewDesc&&s.pmViewDesc.ignoreForCoords;)s=s.nextSibling;let a=s?s.nodeType==3?rn(s,0,o?0:1):s.nodeType==1?s:null:null;if(a)return Di(gn(a,-1),!0)}return Di(gn(r.nodeType==3?rn(r):r,-n),n>=0)}function Di(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function xa(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function np(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function v1(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return np(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.dom;break}o=a.dom.parentNode}let s=tp(t,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=rn(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const y1=/[\u0590-\u08ac]/;function b1(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return!y1.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:np(t,e,()=>{let l=a.getRangeAt(0),u=a.focusNode,c=a.focusOffset,f=a.caretBidiLevel;a.modify("move",n,"character");let p=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(a.focusNode.nodeType==1?a.focusNode:a.focusNode.parentNode)||u==a.focusNode&&c==a.focusOffset;return a.removeAllRanges(),a.addRange(l),f!=null&&(a.caretBidiLevel=f),p})}let lc=null,uc=null,cc=!1;function D1(t,e,n){return lc==e&&uc==n?cc:(lc=e,uc=n,cc=n=="up"||n=="down"?v1(t,e,n):b1(t,e,n))}const _t=0,fc=1,Vr=2,Kt=3;class ro{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=_t,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>nt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof ip){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof rp&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?nt(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?nt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],u=s+l.size;if(i==-1&&e<=u){let c=s+l.border;if(e>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,c);e=s;for(let f=a;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=nt(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(u>n||a==this.children.length-1)){n=u;for(let c=a+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=nt(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let d=0,p=0;d<this.children.length;d++){let h=this.children[d],m=p+h.size;if(o>p&&s<m)return h.setSelection(e-p-h.border,n-p-h.border,r,i);p=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),u=r.getSelection(),c=!1;if((Ut||Xe)&&e==n){let{node:d,offset:p}=a;if(d.nodeType==3){if(c=!!(p&&d.nodeValue[p-1]==`
`),c&&p==d.nodeValue.length)for(let h=d,m;h;h=h.parentNode){if(m=h.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:nt(m)+1});break}let y=h.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let h=d.childNodes[p-1];c=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(Ut&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let d=u.focusNode.childNodes[u.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||c&&Xe)&&Gi(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Gi(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((u.extend||e==n)&&!c){u.collapse(a.node,a.offset);try{e!=n&&u.extend(l.node,l.offset),f=!0}catch(d){if(!(d instanceof DOMException))throw d}}if(!f){if(e>n){let p=a;a=l,l=p}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+o.border,l=s-o.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?Vr:fc,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Kt:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Vr:Kt}r=s}this.dirty=Vr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Vr:fc;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class rp extends ro{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==_t&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class C1 extends ro{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class lr extends ro{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=Rt.renderSpec(document,n.type.spec.toDOM(n,r))),new lr(e,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&Kt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=Kt&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=_t){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=_t}}slice(e,n,r){let i=lr.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=il(o,n,s,r)),e>0&&(o=il(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}}class ur extends ro{constructor(e,n,r,i,o,s,a,l,u){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a,s&&this.updateChildren(l,u)}static create(e,n,r,i,o,s){let a=o.nodeViews[n.type.name],l,u=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=Rt.renderSpec(document,n.type.spec.toDOM(n)));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let d=c;return c=ap(c,r,n),u?l=new A1(e,n,r,i,c,f||null,d,u,o,s+1):n.isText?new Vs(e,n,r,i,c,d,o):new ur(e,n,r,i,c,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_.empty)}return e}matchesNode(e,n,r){return this.dirty==_t&&e.eq(this.node)&&rl(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new k1(this,s&&s.node);S1(this.node,this.innerDeco,(u,c,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&l.syncToMarks(c==this.node.childCount?ie.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,i)},(u,c,f,d)=>{l.syncToMarks(u.marks,r,e);let p;l.findNodeMatch(u,c,f,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(u,c,f,p,e)||l.updateNextNode(u,c,f,e,d)||l.addNode(u,c,f,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Vr)&&(s&&this.protectLocalComposition(e,s),op(this.contentDOM,this.children,e),ni&&_1(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof W)||r<n||i>n+this.node.content.size)return null;let o=e.domSelection(),s=O1(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=T1(this.node.content,a,r-n,i-n);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new C1(this,o,n,i);e.input.compositionNodes.push(s),this.children=il(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Kt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=_t}updateOuterDeco(e){if(rl(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=sp(this.dom,this.nodeDOM,nl(this.outerDeco,this.node,n),nl(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function dc(t,e,n,r,i){return ap(r,e,t),new ur(void 0,t,e,n,r,r,r,i,0)}class Vs extends ur{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Kt||this.dirty!=_t&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=_t||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=_t,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Vs(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Kt)}get domAtom(){return!1}}class ip extends ro{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==_t&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class A1 extends ur{constructor(e,n,r,i,o,s,a,l,u,c){super(e,n,r,i,o,s,a,u,c),this.spec=l}update(e,n,r,i){if(this.dirty==Kt)return!1;if(this.spec.update){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function op(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=pc(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof lr){let l=r?r.previousSibling:t.lastChild;op(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=pc(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Ii=function(t){t&&(this.nodeName=t)};Ii.prototype=Object.create(null);const Xn=[new Ii];function nl(t,e,n){if(t.length==0)return Xn;let r=n?Xn[0]:new Ii,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(!!s){s.nodeName&&i.push(r=new Ii(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&i.length==1&&i.push(r=new Ii(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function sp(t,e,n,r){if(n==Xn&&r==Xn)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Xn[0]),i=l}x1(i,a||Xn[0],s)}return i}function x1(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function ap(t,e,n){return sp(t,t,Xn,nl(e,n,t.nodeType!=1))}function rl(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function pc(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class k1{constructor(e,n){this.lock=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=w1(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=_t,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(this.top.children[l].matchesMark(e[o])){a=l;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=lr.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Kt&&s.dom==s.contentDOM&&(s.dirty=Vr),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index=i+1,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof ur){let l=this.preMatch.matched.get(a);if(l!=null&&l!=o)return!1;let u=a.dom;if(!(this.lock&&(u==this.lock||u.nodeType==1&&u.contains(this.lock.parentNode))&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Kt&&rl(n,a.outerDeco)))&&a.update(e,n,r,i))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,n,r,i,o){this.top.children.splice(this.index++,0,ur.create(this.top,e,n,r,i,o)),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new rp(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof lr;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Vs)||/\n$/.test(e.node.text))&&((Xe||je)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new ip(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}}function w1(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof lr)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(!!l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function E1(t,e){return t.type.side-e.type.side}function S1(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,a=[],l=null;for(let u=0;;){if(s<i.length&&i[s].to==o){let h=i[s++],m;for(;s<i.length&&i[s].to==o;)(m||(m=[h])).push(i[s++]);if(m){m.sort(E1);for(let y=0;y<m.length;y++)n(m[y],u,!!l)}else n(h,u,!!l)}let c,f;if(l)f=-1,c=l,l=null;else if(u<t.childCount)f=u,c=t.child(u++);else break;for(let h=0;h<a.length;h++)a[h].to<=o&&a.splice(h--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let d=o+c.nodeSize;if(c.isText){let h=d;s<i.length&&i[s].from<h&&(h=i[s].from);for(let m=0;m<a.length;m++)a[m].to<h&&(h=a[m].to);h<d&&(l=c.cut(h-o),c=c.cut(0,h-o),d=h,f=-1)}let p=c.isInline&&!c.isLeaf?a.filter(h=>!h.inline):a.slice();r(c,p,e.forChild(o,c),f),o=d}}function _1(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function O1(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=Vt(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function T1(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;l+=u.text}if(o>=n){let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=n)return a+u;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function il(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],u=a,c=a+=l.size;u>=n||c<=e?o.push(l):(u<e&&o.push(l.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>n&&o.push(l.slice(n-u,l.size,r)))}return o}function lp(t,e=null){let n=t.domSelection(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,u;if(Il(n)){for(l=a;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&z.isSelectable(c)&&i.parent&&!(c.isInline&&i1(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new z(s==f?a:r.resolve(f))}}else{let c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null;l=r.resolve(c)}if(!u){let c=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;u=Pl(t,l,a,c)}return u}function up(t){return t.editable?t.hasFocus():fp(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Fn(t,e=!1){let n=t.state.selection;if(cp(t,n),!!up(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&je){let r=t.domSelection(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Gi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)F1(t);else{let{anchor:r,head:i}=n,o,s;hc&&!(n instanceof W)&&(n.$from.parent.inlineContent||(o=mc(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=mc(t,n.to))),t.docView.setSelection(r,i,t.root,e),hc&&(o&&gc(o),s&&gc(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&M1(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const hc=Xe||je&&t1<63;function mc(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Xe&&i&&i.contentEditable=="false")return ka(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return ka(i);if(o)return ka(o)}}function ka(t){return t.contentEditable="true",Xe&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function gc(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function M1(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelection(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!up(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function F1(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,nt(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&st&&_n<=11&&(r.disabled=!0,r.disabled=!1)}function cp(t,e){if(e instanceof z){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(vc(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else vc(t)}function vc(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Pl(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||W.between(e,n,r)}function yc(t){return t.editable&&t.root.activeElement!=t.dom?!1:fp(t)}function fp(t){let e=t.domSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function B1(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelection();return Gi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function ol(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&q.findFrom(o,e)}function Jn(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function bc(t,e,n){let r=t.state.selection;if(r instanceof W){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){let i=ol(t.state,e);return i&&i instanceof z?Jn(t,i):!1}else if(!(ht&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?z.isSelectable(o)?Jn(t,new z(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Is?Jn(t,new W(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else{if(r instanceof z&&r.node.isInline)return Jn(t,new W(e>0?r.$to:r.$from));{let i=ol(t.state,e);return i?Jn(t,i):!1}}}function Xo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Vi(t){let e=t.pmViewDesc;return e&&e.size==0&&(t.nextSibling||t.nodeName!="BR")}function wa(t){let e=t.domSelection(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Ut&&n.nodeType==1&&r<Xo(n)&&Vi(n.childNodes[r])&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Vi(a))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(dp(n))break;{let a=n.previousSibling;for(;a&&Vi(a);)i=n.parentNode,o=nt(a),a=a.previousSibling;if(a)n=a,r=Xo(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?sl(t,e,n,r):i&&sl(t,e,i,o)}function Ea(t){let e=t.domSelection(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Xo(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Vi(a))o=n,s=++r;else break}else{if(dp(n))break;{let a=n.nextSibling;for(;a&&Vi(a);)o=a.parentNode,s=nt(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Xo(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&sl(t,e,o,s)}function dp(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function sl(t,e,n,r){if(Il(e)){let o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Fn(t)},50)}function Dc(t,e,n){let r=t.state.selection;if(r instanceof W&&!r.empty||n.indexOf("s")>-1||ht&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=ol(t.state,e);if(s&&s instanceof z)return Jn(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof St?q.near(s,e):q.findFrom(s,e);return a?Jn(t,a):!1}return!1}function Cc(t,e){if(!(t.state.selection instanceof W))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Ac(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function L1(t){if(!Xe||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelection();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ac(t,r,"true"),setTimeout(()=>Ac(t,r,"false"),20)}return!1}function N1(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function I1(t,e){let n=e.keyCode,r=N1(e);return n==8||ht&&n==72&&r=="c"?Cc(t,-1)||wa(t):n==46||ht&&n==68&&r=="c"?Cc(t,1)||Ea(t):n==13||n==27?!0:n==37||ht&&n==66&&r=="c"?bc(t,-1,r)||wa(t):n==39||ht&&n==70&&r=="c"?bc(t,1,r)||Ea(t):n==38||ht&&n==80&&r=="c"?Dc(t,-1,r)||wa(t):n==40||ht&&n==78&&r=="c"?L1(t)||Dc(t,1,r)||Ea(t):r==(ht?"m":"c")&&(n==66||n==73||n==89||n==90)}function pp(t,e){let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=t.someProp("clipboardSerializer")||Rt.fromSchema(t.state.schema),a=bp(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let u=l.firstChild,c,f=0;for(;u&&u.nodeType==1&&(c=yp[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let h=a.createElement(c[p]);for(;l.firstChild;)h.appendChild(l.firstChild);l.appendChild(h),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",p=>p(e))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function hp(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,o||r)}),o)return e?new L(_.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):L.empty;let f=t.someProp("clipboardTextParser",d=>d(e,i,r));if(f)a=f;else{let d=i.marks(),{schema:p}=t.state,h=Rt.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=s.appendChild(document.createElement("p"));m&&y.appendChild(h.serializeNode(p.text(m,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n)}),s=R1(n),Is&&H1(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0&&s.firstChild;f--)s=s.firstChild;if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Qr.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!V1.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)a=$1(xc(a,+c[1],+c[2]),c[4]);else if(a=L.maxOpen(P1(a.content,i),!0),a.openStart||a.openEnd){let f=0,d=0;for(let p=a.content.firstChild;f<a.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=a.content.lastChild;d<a.openEnd&&!p.type.spec.isolating;d++,p=p.lastChild);a=xc(a,f,d)}return t.someProp("transformPasted",f=>{a=f(a)}),a}const V1=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function P1(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),u;if(!l)return s=null;if(u=s.length&&o.length&&gp(l,o,a,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=vp(s[s.length-1],o.length));let c=mp(a,l);s.push(c),i=i.matchType(c.type),o=l}}),s)return _.from(s)}return t}function mp(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,_.from(t));return t}function gp(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=gp(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(_.from(mp(n,t,i+1))))}}function vp(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,vp(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(_.empty,!0);return t.copy(n.append(r))}function al(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return i<r-1&&(a=al(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(_.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function xc(t,e,n){return e<t.openStart&&(t=new L(al(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new L(al(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const yp={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let kc=null;function bp(){return kc||(kc=document.implementation.createHTMLDocument("title"))}function R1(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=bp().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&yp[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function H1(t){let e=t.querySelectorAll(je?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function $1(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=_.from(l.create(r[a+1],i)),o++,s++}return new L(i,o,s)}const Ze={};let We={};class z1{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function j1(t){for(let e in Ze){let n=Ze[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{q1(t,r)&&!Rl(t,r)&&(t.editable||!(r.type in We))&&n(t,r)})}Xe&&t.dom.addEventListener("input",()=>null),ll(t)}function Zn(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function W1(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ll(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Rl(t,r))})}function Rl(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function q1(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function U1(t,e){!Rl(t,e)&&Ze[e.type]&&(t.editable||!(e.type in We))&&Ze[e.type](t,e)}We.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Cp(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(It&&je&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ni&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Ir(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||I1(t,n)?n.preventDefault():Zn(t,"key")};We.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};We.keypress=(t,e)=>{let n=e;if(Cp(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ht&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof W)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))||t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Ps(t){return{left:t.clientX,top:t.clientY}}function K1(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Hl(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Kr(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function J1(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&z.isSelectable(r)?(Kr(t,new z(n),"pointer"),!0):!1}function G1(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof z&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(z.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Kr(t,z.create(t.state.doc,i),"pointer"),!0):!1}function Y1(t,e,n,r,i){return Hl(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?G1(t,n):J1(t,n))}function X1(t,e,n,r){return Hl(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Z1(t,e,n,r){return Hl(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Q1(t,n,r)}function Q1(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Kr(t,W.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Kr(t,W.create(r,a+1,a+1+s.content.size),"pointer");else if(z.isSelectable(s))Kr(t,z.create(r,a),"pointer");else continue;return!0}}function $l(t){return Zo(t)}const Dp=ht?"metaKey":"ctrlKey";Ze.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=$l(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&K1(n,t.input.lastClick)&&!n[Dp]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Ps(n));!s||(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new ey(t,s,n,!!r)):(o=="doubleClick"?X1:Z1)(t,s.pos,s.inside,n)?n.preventDefault():Zn(t,"pointer"))};class ey{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Dp],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,s=c.depth?c.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof z&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ut&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Fn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ps(e))),this.allowDefault||!n?Zn(this.view,"pointer"):Y1(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Xe&&this.mightDrag&&!this.mightDrag.node.isAtom||je&&!(this.view.state.selection instanceof W)&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Kr(this.view,q.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Zn(this.view,"pointer")}move(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Zn(this.view,"pointer"),e.buttons==0&&this.done()}}Ze.touchdown=t=>{$l(t),Zn(t,"pointer")};Ze.contextmenu=t=>$l(t);function Cp(t,e){return t.composing?!0:Xe&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const ty=It?5e3:-1;We.compositionstart=We.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Zo(t,!0),t.markCursor=null;else if(Zo(t),Ut&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelection();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){r.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}Ap(t,ty)};We.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,Ap(t,20))};function Ap(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Zo(t),e))}function xp(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=ny());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function ny(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Zo(t,e=!1){if(!(It&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),xp(t),e||t.docView&&t.docView.dirty){let n=lp(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function ry(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const ri=st&&_n<15||ni&&n1<604;Ze.copy=We.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=ri?null:n.clipboardData,s=r.content(),{dom:a,text:l}=pp(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):ry(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function iy(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function oy(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ul(t,r.value,null,e):ul(t,r.textContent,r.innerHTML,e)},50)}function ul(t,e,n,r){let i=hp(t,e,n,t.input.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,r,i||L.empty)))return!0;if(!i)return!1;let o=iy(i),s=o?t.state.tr.replaceSelectionWith(o,t.input.shiftKey):t.state.tr.replaceSelection(i);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}We.paste=(t,e)=>{let n=e;if(t.composing&&!It)return;let r=ri?null:n.clipboardData;r&&ul(t,r.getData("text/plain"),r.getData("text/html"),n)?n.preventDefault():oy(t,n)};class sy{constructor(e,n){this.slice=e,this.move=n}}const kp=ht?"altKey":"ctrlKey";Ze.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Ps(n));if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof z?i.to-1:i.to))){if(r&&r.mightDrag)t.dispatch(t.state.tr.setSelection(z.create(t.state.doc,r.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&t.dispatch(t.state.tr.setSelection(z.create(t.state.doc,u.posBefore)))}}let s=t.state.selection.content(),{dom:a,text:l}=pp(t,s);n.dataTransfer.clearData(),n.dataTransfer.setData(ri?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",ri||n.dataTransfer.setData("text/plain",l),t.dragging=new sy(s,!n[kp])};Ze.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};We.dragover=We.dragenter=(t,e)=>e.preventDefault();We.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Ps(n));if(!i)return;let o=t.state.doc.resolve(i.pos);if(!o)return;let s=r&&r.slice;s?t.someProp("transformPasted",h=>{s=h(s)}):s=hp(t,n.dataTransfer.getData(ri?"Text":"text/plain"),ri?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[kp]);if(t.someProp("handleDrop",h=>h(t,n,s||L.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?Vd(t.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let u=t.state.tr;a&&u.deleteSelection();let c=u.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(d))return;let p=u.doc.resolve(c);if(f&&z.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new z(p));else{let h=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((m,y,D,w)=>h=w),u.setSelection(Pl(t,p,u.doc.resolve(h)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Ze.focus=t=>{t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelection())&&Fn(t)},20))};Ze.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ze.beforeinput=(t,e)=>{if(je&&It&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Ir(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in We)Ze[t]=We[t];function Yi(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class zl{constructor(e,n){this.toDOM=e,this.spec=n||nr,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Je(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof zl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yi(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class On{constructor(e,n){this.attrs=e,this.spec=n||nr}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Je(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof On&&Yi(this.attrs,e.attrs)&&Yi(this.spec,e.spec)}static is(e){return e.type instanceof On}destroy(){}}class jl{constructor(e,n){this.attrs=e,this.spec=n||nr}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Je(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof jl&&Yi(this.attrs,e.attrs)&&Yi(this.spec,e.spec)}destroy(){}}class Je{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Je(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Je(e,e,new zl(n,r))}static inline(e,n,r,i){return new Je(e,n,new On(r,i))}static node(e,n,r,i){return new Je(e,n,new jl(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof On}}const Tr=[],nr={};class De{constructor(e,n){this.local=e.length?e:Tr,this.children=n.length?n:Tr}static create(e,n){return n.length?Qo(n,e,0,nr):Ie}find(e,n,r){let i=[];return this.findInner(e==null?0:e,n==null?1e9:n,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==Ie||e.maps.length==0?this:this.mapInner(e,n,0,0,r||nr)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?ay(this.children,s||[],e,n,r,i,o):s?new De(s.sort(rr),Tr):Ie}add(e,n){return n.length?this==Ie?De.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let u=l+r,c;if(!!(c=Ep(n,a,u))){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,c,u+1):i.splice(o,0,l,l+a.nodeSize,Qo(c,a,u+1,nr)),o+=3}});let s=wp(o?Sp(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new De(s.length?this.local.concat(s).sort(rr):this.local,i||this.children)}remove(e){return e.length==0||this==Ie?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>a&&f.to<l&&(e[c]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,a+1);u!=Ie?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new De(i,r):Ie}forChild(e,n){if(this==Ie)return this;if(n.isLeaf)return De.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof On){let u=Math.max(o,l.from)-o,c=Math.min(s,l.to)-o;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new De(i.sort(rr),Tr);return r?new Cn([a,r]):a}return r||Ie}eq(e){if(this==e)return!0;if(!(e instanceof De)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Wl(this.localsInner(e))}localsInner(e){if(this==Ie)return Tr;if(e.inlineContent||!this.local.some(On.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof On||n.push(this.local[r]);return n}}De.empty=new De([],[]);De.removeOverlap=Wl;const Ie=De.empty;class Cn{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,nr));return Cn.from(r)}forChild(e,n){if(n.isLeaf)return De.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Ie&&(o instanceof Cn?r=r.concat(o.members):r.push(o))}return Cn.from(r)}eq(e){if(!(e instanceof Cn)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(!!o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Wl(r?n:n.sort(rr)):Tr}static from(e){switch(e.length){case 0:return Ie;case 1:return e[0];default:return new Cn(e)}}}function ay(t,e,n,r,i,o,s){let a=t.slice(),l=(c,f,d,p)=>{for(let h=0;h<a.length;h+=3){let m=a[h+1],y;if(m<0||c>m+o)continue;let D=a[h]+o;f>=D?a[h+1]=c<=D?-2:-1:d>=i&&(y=p-d-(f-c))&&(a[h]+=y,a[h+1]+=y)}};for(let c=0;c<n.maps.length;c++)n.maps[c].forEach(l);let u=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){u=!0,a[c+1]=-1;continue}let f=n.map(t[c]+o),d=f-i;if(d<0||d>=r.content.size){u=!0;continue}let p=n.map(t[c+1]+o,-1),h=p-i,{index:m,offset:y}=r.content.findIndex(d),D=r.maybeChild(m);if(D&&y==d&&y+D.nodeSize==h){let w=a[c+2].mapInner(n,D,f+1,t[c]+o+1,s);w!=Ie?(a[c]=d,a[c+1]=h,a[c+2]=w):(a[c+1]=-2,u=!0)}else u=!0}if(u){let c=ly(a,t,e,n,i,o,s),f=Qo(c,r,0,s);e=f.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,p=0;d<f.children.length;d+=3){let h=f.children[d];for(;p<a.length&&a[p]<h;)p+=3;a.splice(p,0,f.children[d],f.children[d+1],f.children[d+2])}}return new De(e.sort(rr),a)}function wp(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Je(i.from+e,i.to+e,i.type))}return n}function ly(t,e,n,r,i,o,s){function a(l,u){for(let c=0;c<l.local.length;c++){let f=l.local[c].map(r,i,u);f?n.push(f):s.onRemove&&s.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function Ep(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function Sp(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Qo(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let u=Ep(t,a,l+n);if(u){o=!0;let c=Qo(u,a,n+l+1,r);c!=Ie&&i.push(l,l+a.nodeSize,c)}});let s=wp(o?Sp(t):t,-n).sort(rr);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new De(s,i):Ie}function rr(t,e){return t.from-e.from||t.to-e.to}function Wl(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),wc(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),wc(e,i,r.copy(o.from,r.to)));break}}}return e}function wc(t,e,n){for(;e<t.length&&rr(n,t[e])>0;)e++;t.splice(e,0,n)}function Sa(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ie&&e.push(r)}),t.cursorWrapper&&e.push(De.create(t.state.doc,[t.cursorWrapper.deco])),Cn.from(e)}const uy={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},cy=st&&_n<=11;class fy{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class dy{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new fy,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);st&&_n<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),cy&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&this.observer.observe(this.view.dom,uy),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!yc(this.view)){if(this.suppressingSelectionUpdates)return Fn(this.view);if(st&&_n<=11&&!this.view.state.selection.empty){let e=this.view.domSelection();if(e.focusNode&&Gi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(e){if(e.rangeCount==0)return!0;let n=e.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}flush(){if(!this.view.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let n=this.view.domSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&yc(this.view)&&!this.ignoreSelectionChange(n),i=-1,o=-1,s=!1,a=[];if(this.view.editable)for(let l=0;l<e.length;l++){let u=this.registerMutation(e[l],a);u&&(i=i<0?u.from:Math.min(u.from,i),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(s=!0))}if(Ut&&a.length>1){let l=a.filter(u=>u.nodeName=="BR");if(l.length==2){let u=l[0],c=l[1];u.parentNode&&u.parentNode.parentNode==c.parentNode?c.remove():u.remove()}}(i>-1||r)&&(i>-1&&(this.view.docView.markDirty(i,o),py(this.view)),this.handleDOMChange(i,o,s,a),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(n)||Fn(this.view),this.currentSelection.set(n))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++)n.push(e.addedNodes[c]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(st&&_n<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==e.target?nt(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?nt(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Ec=!1;function py(t){Ec||(Ec=!0,getComputedStyle(t.dom).whiteSpace=="normal"&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}function hy(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelection(),u,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],Il(l)||u.push({node:l.focusNode,offset:l.focusOffset})),je&&t.input.lastKeyCode===8)for(let y=o;y>i;y--){let D=r.childNodes[y-1],w=D.pmViewDesc;if(D.nodeName=="BR"&&!w){o=y;break}if(!w||w.size)break}let f=t.state.doc,d=t.someProp("domParser")||Qr.fromSchema(t.state.schema),p=f.resolve(s),h=null,m=d.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:my,context:p});if(u&&u[0].pos!=null){let y=u[0].pos,D=u[1]&&u[1].pos;D==null&&(D=y),h={anchor:y+s,head:D+s}}return{doc:m,sel:h,from:s,to:a}}function my(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Xe&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Xe&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}function gy(t,e,n,r,i){if(e<0){let S=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,B=lp(t,S);if(B&&!t.state.selection.eq(B)){let R=t.state.tr.setSelection(B);S=="pointer"?R.setMeta("pointer",!0):S=="key"&&R.scrollIntoView(),t.dispatch(R)}return}let o=t.state.doc.resolve(e),s=o.sharedDepth(n);e=o.before(s+1),n=t.state.doc.resolve(n).after(s+1);let a=t.state.selection,l=hy(t,e,n);if(je&&t.cursorWrapper&&l.sel&&l.sel.anchor==t.cursorWrapper.deco.from){let S=t.cursorWrapper.deco.type.toDOM.nextSibling,B=S&&S.nodeValue?S.nodeValue.length:1;l.sel={anchor:l.sel.anchor+B,head:l.sel.anchor+B}}let u=t.state.doc,c=u.slice(l.from,l.to),f,d;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,d="end"):(f=t.state.selection.from,d="start"),t.input.lastKeyCode=null;let p=by(c.content,l.doc.content,l.from,f,d);if((ni&&t.input.lastIOSEnter>Date.now()-225||It)&&i.some(S=>S.nodeName=="DIV"||S.nodeName=="P")&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",S=>S(t,Ir(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof W&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let S=Sc(t,t.state.doc,l.sel);S&&!S.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(S))}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof W&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=l.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=l.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),st&&_n<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>l.from&&l.doc.textBetween(p.start-l.from-1,p.start-l.from+1)==" \xA0"&&(p.start--,p.endA--,p.endB--);let h=l.doc.resolveNoCache(p.start-l.from),m=l.doc.resolveNoCache(p.endB-l.from),y=u.resolve(p.start),D=h.sameParent(m)&&h.parent.inlineContent&&y.end()>=p.endA,w;if((ni&&t.input.lastIOSEnter>Date.now()-225&&(!D||i.some(S=>S.nodeName=="DIV"||S.nodeName=="P"))||!D&&h.pos<l.doc.content.size&&(w=q.findFrom(l.doc.resolve(h.pos+1),1,!0))&&w.head==m.pos)&&t.someProp("handleKeyDown",S=>S(t,Ir(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&yy(u,p.start,p.endA,h,m)&&t.someProp("handleKeyDown",S=>S(t,Ir(8,"Backspace")))){It&&je&&t.domObserver.suppressSelectionUpdates();return}je&&It&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),It&&!D&&h.start()!=m.start()&&m.parentOffset==0&&h.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==p.endA&&(p.endB-=2,m=l.doc.resolveNoCache(p.endB-l.from),setTimeout(()=>{t.someProp("handleKeyDown",function(S){return S(t,Ir(13,"Enter"))})},20));let M=p.start,v=p.endA,F,E,O;if(D){if(h.pos==m.pos)st&&_n<=11&&h.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Fn(t),20)),F=t.state.tr.delete(M,v),E=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(O=vy(h.parent.content.cut(h.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))F=t.state.tr,O.type=="add"?F.addMark(M,v,O.mark):F.removeMark(M,v,O.mark);else if(h.parent.child(h.index()).isText&&h.index()==m.index()-(m.textOffset?0:1)){let S=h.parent.textBetween(h.parentOffset,m.parentOffset);if(t.someProp("handleTextInput",B=>B(t,M,v,S)))return;F=t.state.tr.insertText(S,M,v)}}if(F||(F=t.state.tr.replace(M,v,l.doc.slice(p.start-l.from,p.endB-l.from))),l.sel){let S=Sc(t,F.doc,l.sel);S&&!(je&&It&&t.composing&&S.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(S.head==M||S.head==F.mapping.map(v)-1)||st&&S.empty&&S.head==M)&&F.setSelection(S)}E&&F.ensureMarks(E),t.dispatch(F.scrollIntoView())}function Sc(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Pl(t,e.resolve(n.anchor),e.resolve(n.head))}function vy(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(_.from(u).eq(t))return{mark:a,type:s}}function yy(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||_a(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(_a(o,!0,!0));return!s.parent.isTextblock||s.pos>n||_a(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function _a(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function by(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}return s<o&&t.size<e.size?(o-=r<=o&&r>=s?o-r:0,a=o+(a-s),s=o):a<o&&(o-=r<=o&&r>=a?o-r:0,s=o+(s-a),a=o),{start:o,endA:s,endB:a}}class Dy{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new z1,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Fc),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Tc(this),Oc(this),this.nodeViews=Mc(this),this.docView=dc(this.state.doc,_c(this),Sa(this),this.dom,this),this.domObserver=new dy(this,(r,i,o,s)=>gy(this,r,i,o,s)),this.domObserver.start(),j1(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ll(this),this._props=e,e.plugins&&(e.plugins.forEach(Fc),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}updateStateInner(e,n){let r=this.state,i=!1,o=!1;if(e.storedMarks&&this.composing&&(xp(this),o=!0),this.state=e,n){let f=Mc(this);Ay(f,this.nodeViews)&&(this.nodeViews=f,i=!0),ll(this)}this.editable=Tc(this),Oc(this);let s=Sa(this),a=_c(this),l=n?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,a,s);(u||!e.selection.eq(r.selection))&&(o=!0);let c=l=="preserve"&&o&&this.dom.style.overflowAnchor==null&&l1(this);if(o){this.domObserver.stop();let f=u&&(st||je)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Cy(r.selection,e.selection);if(u){let d=je?this.trackWrites=this.domSelection().focusNode:null;(i||!this.docView.update(e.doc,a,s,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=dc(e.doc,a,s,this.dom,this)),d&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&B1(this))?Fn(this,f):(cp(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),l=="reset")this.dom.scrollTop=0;else if(l=="to selection"){let f=this.domSelection().focusNode;if(!this.someProp("handleScrollToSelection",d=>d(this)))if(e.selection instanceof z){let d=this.docView.domAfterPos(e.selection.from);d.nodeType==1&&ac(this,d.getBoundingClientRect(),f)}else ac(this,this.coordsAtPos(e.selection.head,1),f)}else c&&u1(c)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&c1(this.dom),Fn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}posAtCoords(e){return m1(this,e)}coordsAtPos(e,n=1){return tp(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return D1(this,n||this.state,e)}destroy(){!this.docView||(W1(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Sa(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return U1(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelection(){return this.root.getSelection()}}function _c(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"&&(e.class+=" "+n[r]),r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),[Je.node(0,t.state.doc.content.size,e)]}function Oc(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Je.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Tc(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Cy(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Mc(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Ay(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Fc(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Bn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},es={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Bc=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),xy=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),ky=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),Lc=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),wy=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ey=Bc&&(Lc||+Bc[1]<57)||ky&&Lc;for(var Be=0;Be<10;Be++)Bn[48+Be]=Bn[96+Be]=String(Be);for(var Be=1;Be<=24;Be++)Bn[Be+111]="F"+Be;for(var Be=65;Be<=90;Be++)Bn[Be]=String.fromCharCode(Be+32),es[Be]=String.fromCharCode(Be);for(var Oa in Bn)es.hasOwnProperty(Oa)||(es[Oa]=Bn[Oa]);function Sy(t){var e=Ey&&(t.ctrlKey||t.altKey||t.metaKey)||(xy||wy)&&t.shiftKey&&t.key&&t.key.length==1,n=!e&&t.key||(t.shiftKey?es:Bn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const _y=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Oy(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))_y?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Ty(t){let e=Object.create(null);for(let n in t)e[Oy(n)]=t[n];return e}function Ta(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}function My(t){return new we({props:{handleKeyDown:_p(t)}})}function _p(t){let e=Ty(t);return function(n,r){let i=Sy(r),o=i.length==1&&i!=" ",s,a=e[Ta(i,r,!o)];if(a&&a(n.state,n.dispatch,n))return!0;if(o&&(r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Bn[r.keyCode])&&s!=i){let l=e[Ta(s,r,!0)];if(l&&l(n.state,n.dispatch,n))return!0}else if(o&&r.shiftKey){let l=e[Ta(i,r,!0)];if(l&&l(n.state,n.dispatch,n))return!0}return!1}}function Fy(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ma(t){return Fy(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Rs(t,e){const n=k({},t);return Ma(t)&&Ma(e)&&Object.keys(e).forEach(r=>{Ma(e[r])?r in t?n[r]=Rs(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function Op(t){return typeof t=="function"}function U(t,e=void 0,...n){return Op(t)?e?t.bind(e)(...n):t(...n):t}function I(t,e,n){return t.config[e]===void 0&&t.parent?I(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind(xe(k({},n),{parent:t.parent?I(t.parent,e,n):null})):t.config[e]}class ke{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=k(k({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=U(I(this,"addOptions",{name:this.name}))),this.storage=U(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ke(e)}configure(e={}){const n=this.extend();return n.options=Rs(this.options,e),n.storage=U(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new ke(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=U(I(n,"addOptions",{name:n.name})),n.storage=U(I(n,"addStorage",{name:n.name,options:n.options})),n}}function Tp(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(u,c,f,d)=>{var p;const h=s==null?void 0:s[u.type.name];h?(u.isBlock&&!l&&(a+=o,l=!0),a+=h({node:u,pos:c,parent:f,index:d,range:e})):u.isText?(a+=(p=u==null?void 0:u.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,i-c),l=!1):u.isBlock&&!l&&(a+=o,l=!0)}),a}function Mp(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const By=ke.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new we({key:new Qe("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),a=Math.max(...o.map(c=>c.$to.pos)),l=Mp(n);return Tp(r,{from:s,to:a},{textSerializers:l})}}})]}}),Ly=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0);var Ny=Object.freeze({__proto__:null,blur:Ly});const Iy=(t=!1)=>({commands:e})=>e.setContent("",t);var Vy=Object.freeze({__proto__:null,clearContent:Iy});const Py=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),d=u.resolve(c.map(l+a.nodeSize)),p=f.blockRange(d);if(!p)return;const h=mi(p);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,m)}(h||h===0)&&e.lift(p,h)})}),!0};var Ry=Object.freeze({__proto__:null,clearNodes:Py});const Hy=t=>e=>t(e);var $y=Object.freeze({__proto__:null,command:Hy});const zy=()=>({state:t,dispatch:e})=>zv(t,e);var jy=Object.freeze({__proto__:null,createParagraphNear:zy});function Oe(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}const Wy=t=>({tr:e,state:n,dispatch:r})=>{const i=Oe(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const l=o.before(s),u=o.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1};var qy=Object.freeze({__proto__:null,deleteNode:Wy});const Uy=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0};var Ky=Object.freeze({__proto__:null,deleteRange:Uy});const Jy=()=>({state:t,dispatch:e})=>Za(t,e);var Gy=Object.freeze({__proto__:null,deleteSelection:Jy});const Yy=()=>({commands:t})=>t.keyboardShortcut("Enter");var Xy=Object.freeze({__proto__:null,enter:Yy});const Zy=()=>({state:t,dispatch:e})=>$v(t,e);var Qy=Object.freeze({__proto__:null,exitCode:Zy});function Vn(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function ql(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ts(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:ql(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function cl(t,e,n={}){return t.find(r=>r.type===e&&ts(r.attrs,n))}function eb(t,e,n={}){return!!cl(t,e,n)}function Ul(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=cl(r.node.marks,e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;for(cl(r.node.marks,e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&eb(t.parent.child(a).marks,e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}const tb=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Vn(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:u,to:c}=a;if(i){const f=Ul(l,o,e);if(f&&f.from<=u&&f.to>=c){const d=W.create(s,f.from,f.to);n.setSelection(d)}}return!0};var nb=Object.freeze({__proto__:null,extendMarkRange:tb});const rb=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};var ib=Object.freeze({__proto__:null,first:rb});function ob(t){var e;return((e=t.constructor)===null||e===void 0?void 0:e.toString().substring(0,5))==="class"}function Fp(t){return t&&typeof t=="object"&&!Array.isArray(t)&&!ob(t)}function Bp(t){return Fp(t)&&t instanceof W}function Hs(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function ln(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Lp(t,e=null){if(!e)return null;const n=q.atStart(t),r=q.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?W.create(t,ln(0,i,o),ln(t.content.size,i,o)):W.create(t,ln(e,i,o),ln(e,i,o))}const sb=(t=null,e)=>({editor:n,view:r,tr:i,dispatch:o})=>{e=k({scrollIntoView:!0},e);const s=()=>{Hs()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!Bp(n.state.selection))return s(),!0;const a=Lp(n.state.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0};var ab=Object.freeze({__proto__:null,focus:sb});const lb=(t,e)=>n=>t.every((r,i)=>e(r,xe(k({},n),{index:i})));var ub=Object.freeze({__proto__:null,forEach:lb});const cb=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);var fb=Object.freeze({__proto__:null,insertContent:cb});function Nc(t){const e=`<body>${t}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function ns(t,e,n){if(n=k({slice:!0,parseOptions:{}},n),typeof t=="object"&&t!==null)try{return Array.isArray(t)?_.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),ns("",e,n)}if(typeof t=="string"){const r=Qr.fromSchema(e);return n.slice?r.parseSlice(Nc(t),n.parseOptions).content:r.parse(Nc(t),n.parseOptions)}return ns("",e,n)}function db(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ve||i instanceof _e))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,l,u,c)=>{s===0&&(s=c)}),t.setSelection(q.near(t.doc.resolve(s),n))}const pb=t=>t.toString().startsWith("<"),hb=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n=k({parseOptions:{},updateSelection:!0},n);const s=ns(e,o.schema,{parseOptions:k({preserveWhitespace:"full"},n.parseOptions)});if(s.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:t,u=!0,c=!0;if((pb(s)?s:[s]).forEach(d=>{d.check(),u=u?d.isText&&d.marks.length===0:!1,c=c?d.isBlock:!1}),a===l&&c){const{parent:d}=r.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}u?r.insertText(e,a,l):r.replaceWith(a,l,s),n.updateSelection&&db(r,r.steps.length-1,-1)}return!0};var mb=Object.freeze({__proto__:null,insertContentAt:hb});const gb=()=>({state:t,dispatch:e})=>Nv(t,e);var vb=Object.freeze({__proto__:null,joinBackward:gb});const yb=()=>({state:t,dispatch:e})=>Vv(t,e);var bb=Object.freeze({__proto__:null,joinForward:yb});function Np(){return typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1}function Db(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Hs()||Np()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const Cb=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=Db(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};var Ab=Object.freeze({__proto__:null,keyboardShortcut:Cb});function Xi(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Oe(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const p=Math.max(r,d),h=Math.min(i,d+f.nodeSize);a.push({node:f,from:p,to:h})});const l=i-r,u=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>ts(f.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((f,d)=>f+d.to-d.from,0)>=l}const xb=(t,e={})=>({state:n,dispatch:r})=>{const i=Oe(t,n.schema);return Xi(n,i,e)?Rv(n,r):!1};var kb=Object.freeze({__proto__:null,lift:xb});const wb=()=>({state:t,dispatch:e})=>jv(t,e);var Eb=Object.freeze({__proto__:null,liftEmptyBlock:wb});const Sb=t=>({state:e,dispatch:n})=>{const r=Oe(t,e.schema);return Xv(r)(e,n)};var _b=Object.freeze({__proto__:null,liftListItem:Sb});const Ob=()=>({state:t,dispatch:e})=>Hv(t,e);var Tb=Object.freeze({__proto__:null,newlineInCode:Ob});function $s(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Ic(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const Mb=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=$s(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Oe(t,r.schema)),a==="mark"&&(s=Vn(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,Ic(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&n.addMark(c,c+u.nodeSize,s.create(Ic(f.attrs,e)))})})}),!0):!1};var Fb=Object.freeze({__proto__:null,resetAttributes:Mb});const Bb=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0);var Lb=Object.freeze({__proto__:null,scrollIntoView:Bb});const Nb=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size});var Ib=Object.freeze({__proto__:null,selectAll:Nb});const Vb=()=>({state:t,dispatch:e})=>Iv(t,e);var Pb=Object.freeze({__proto__:null,selectNodeBackward:Vb});const Rb=()=>({state:t,dispatch:e})=>Pv(t,e);var Hb=Object.freeze({__proto__:null,selectNodeForward:Rb});const $b=()=>({state:t,dispatch:e})=>Wv(t,e);var zb=Object.freeze({__proto__:null,selectParentNode:$b});const jb=()=>({state:t,dispatch:e})=>Kv(t,e);var Wb=Object.freeze({__proto__:null,selectTextblockEnd:jb});const qb=()=>({state:t,dispatch:e})=>Uv(t,e);var Ub=Object.freeze({__proto__:null,selectTextblockStart:qb});function Ip(t,e,n={}){return ns(t,e,{slice:!1,parseOptions:n})}const Kb=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,a=Ip(t,i.schema,n),l=W.create(s,0,s.content.size);return o&&r.setSelection(l).replaceSelectionWith(a,!1).setMeta("preventUpdate",!e),!0};var Jb=Object.freeze({__proto__:null,setContent:Kb});function Kl(t,e){const n=Vn(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?k({},a.attrs):{}}const Gb=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=Vn(t,r.schema);if(i)if(s){const u=Kl(r,l);n.addStoredMark(l.create(k(k({},u),e)))}else a.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(d,p)=>{const h=Math.max(p,c),m=Math.min(p+d.nodeSize,f);d.marks.find(D=>D.type===l)?d.marks.forEach(D=>{l===D.type&&n.addMark(h,m,l.create(k(k({},D.attrs),e)))}):n.addMark(h,m,l.create(e))})});return!0};var Yb=Object.freeze({__proto__:null,setMark:Gb});const Xb=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0);var Zb=Object.freeze({__proto__:null,setMeta:Xb});const Qb=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Oe(t,n.schema);return o.isTextblock?i().command(({commands:s})=>rc(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>rc(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)};var eD=Object.freeze({__proto__:null,setNode:Qb});const tD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=q.atStart(r).from,o=q.atEnd(r).to,s=ln(t,i,o),a=z.create(r,s);e.setSelection(a)}return!0};var nD=Object.freeze({__proto__:null,setNodeSelection:tD});const rD=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=W.atStart(r).from,a=W.atEnd(r).to,l=ln(i,s,a),u=ln(o,s,a),c=W.create(r,l,u);e.setSelection(c)}return!0};var iD=Object.freeze({__proto__:null,setTextSelection:rD});const oD=t=>({state:e,dispatch:n})=>{const r=Oe(t,e.schema);return e1(r)(e,n)};var sD=Object.freeze({__proto__:null,sinkListItem:oD});function Bo(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function aD(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Vc(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const lD=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:l}=o,u=i.extensionManager.attributes,c=Bo(u,a.node().type.name,a.node().attrs);if(o instanceof z&&o.node.isBlock)return!a.parentOffset||!Ur(s,a.pos)?!1:(r&&(t&&Vc(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const f=l.parentOffset===l.parent.content.size;o instanceof W&&e.deleteSelection();const d=a.depth===0?void 0:aD(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=f&&d?[{type:d,attrs:c}]:void 0,h=Ur(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!h&&Ur(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(h=!0,p=d?[{type:d,attrs:c}]:void 0),h&&(e.split(e.mapping.map(a.pos),1,p),d&&!f&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),y=e.doc.resolve(m);a.node(-1).canReplaceWith(y.index(),y.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&Vc(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0};var uD=Object.freeze({__proto__:null,splitBlock:lD});const cD=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;const s=Oe(t,n.schema),{$from:a,$to:l}=n.selection,u=n.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const c=a.node(-1);if(c.type!==s)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let y=_.empty;const D=a.index(-1)?1:a.index(-2)?2:3;for(let O=a.depth-D;O>=a.depth-3;O-=1)y=_.from(a.node(O).copy(y));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,M=Bo(f,a.node().type.name,a.node().attrs),v=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(M))||void 0;y=y.append(_.from(s.createAndFill(null,v)||void 0));const F=a.before(a.depth-(D-1));e.replace(F,a.after(-w),new L(y,4-D,0));let E=-1;e.doc.nodesBetween(F,e.doc.content.size,(O,S)=>{if(E>-1)return!1;O.isTextblock&&O.content.size===0&&(E=S+1)}),E>-1&&e.setSelection(W.near(e.doc.resolve(E))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,p=Bo(f,c.type.name,c.attrs),h=Bo(f,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:s,attrs:p},{type:d,attrs:h}]:[{type:s,attrs:p}];return Ur(e.doc,a.pos,2)?(r&&e.split(a.pos,2,m).scrollIntoView(),!0):!1};var fD=Object.freeze({__proto__:null,splitListItem:cD});function dD(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Jl(t){return e=>dD(e.$from,t)}function zs(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Pc(t,e){const{nodeExtensions:n}=zs(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=U(I(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}const Rc=(t,e)=>{const n=Jl(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&no(t.doc,n.pos)&&t.join(n.pos),!0},Hc=(t,e)=>{const n=Jl(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&no(t.doc,r)&&t.join(r),!0},pD=(t,e)=>({editor:n,tr:r,state:i,dispatch:o,chain:s,commands:a,can:l})=>{const{extensions:u}=n.extensionManager,c=Oe(t,i.schema),f=Oe(e,i.schema),{selection:d}=i,{$from:p,$to:h}=d,m=p.blockRange(h);if(!m)return!1;const y=Jl(D=>Pc(D.type.name,u))(d);if(m.depth>=1&&y&&m.depth-y.depth<=1){if(y.node.type===c)return a.liftListItem(f);if(Pc(y.node.type.name,u)&&c.validContent(y.node.content)&&o)return s().command(()=>(r.setNodeMarkup(y.pos,c),!0)).command(()=>Rc(r,c)).command(()=>Hc(r,c)).run()}return s().command(()=>l().wrapInList(c)?!0:a.clearNodes()).wrapInList(c).command(()=>Rc(r,c)).command(()=>Hc(r,c)).run()};var hD=Object.freeze({__proto__:null,toggleList:pD});function fl(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Vn(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>ts(f.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:f,$to:d})=>{const p=f.pos,h=d.pos;t.doc.nodesBetween(p,h,(m,y)=>{if(!m.isText&&!m.marks.length)return;const D=Math.max(p,y),w=Math.min(h,y+m.nodeSize);s+=w-D,a.push(...m.marks.map(v=>({mark:v,from:D,to:w})))})}),s===0)return!1;const l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>ts(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),u=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(l>0?l+u:l)>=s}const mD=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Vn(t,r.schema);return fl(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)};var gD=Object.freeze({__proto__:null,toggleMark:mD});const vD=(t,e,n={})=>({state:r,commands:i})=>{const o=Oe(t,r.schema),s=Oe(e,r.schema);return Xi(r,o,n)?i.setNode(s):i.setNode(o,n)};var yD=Object.freeze({__proto__:null,toggleNode:vD});const bD=(t,e={})=>({state:n,commands:r})=>{const i=Oe(t,n.schema);return Xi(n,i,e)?r.lift(i):r.wrapIn(i,e)};var DD=Object.freeze({__proto__:null,toggleWrap:bD});const CD=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1};var AD=Object.freeze({__proto__:null,undoInputRule:CD});const xD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0};var kD=Object.freeze({__proto__:null,unsetAllMarks:xD});const wD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Vn(t,r.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&s){let{from:d,to:p}=a;const h=(o=u.marks().find(y=>y.type===l))===null||o===void 0?void 0:o.attrs,m=Ul(u,l,h);m&&(d=m.from,p=m.to),n.removeMark(d,p,l)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0};var ED=Object.freeze({__proto__:null,unsetMark:wD});const SD=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=$s(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Oe(t,r.schema)),a==="mark"&&(s=Vn(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;r.doc.nodesBetween(u,c,(f,d)=>{o&&o===f.type&&n.setNodeMarkup(d,void 0,k(k({},f.attrs),e)),s&&f.marks.length&&f.marks.forEach(p=>{if(s===p.type){const h=Math.max(d,u),m=Math.min(d+f.nodeSize,c);n.addMark(h,m,s.create(k(k({},p.attrs),e)))}})})}),!0):!1};var _D=Object.freeze({__proto__:null,updateAttributes:SD});const OD=(t,e={})=>({state:n,dispatch:r})=>{const i=Oe(t,n.schema);return Jv(i,e)(n,r)};var TD=Object.freeze({__proto__:null,wrapIn:OD});const MD=(t,e={})=>({state:n,dispatch:r})=>{const i=Oe(t,n.schema);return Gv(i,e)(n,r)};var FD=Object.freeze({__proto__:null,wrapInList:MD});const BD=ke.create({name:"commands",addCommands(){return k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k({},Ny),Vy),Ry),$y),jy),qy),Ky),Gy),Xy),Qy),nb),ib),ab),ub),fb),mb),vb),bb),Ab),kb),Eb),_b),Tb),Fb),Lb),Ib),Pb),Hb),zb),Wb),Ub),Jb),Yb),Zb),eD),nD),iD),sD),uD),fD),hD),gD),yD),DD),AD),kD),ED),_D),TD),FD)}}),LD=ke.create({name:"editable",addProseMirrorPlugins(){return[new we({key:new Qe("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ND=ke.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new we({key:new Qe("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});function js(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return xe(k({},e),{schema:e.schema,plugins:e.plugins,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}})}class Ws{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>{const f=l(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,u=e||o.tr,c=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(d=>d===!0)),f=xe(k({},Object.fromEntries(Object.entries(r).map(([d,p])=>[d,(...m)=>{const y=this.buildProps(u,n),D=p(...m)(y);return a.push(D),f}]))),{run:c});return f}createCan(e){const{rawCommands:n,state:r}=this,i=void 0,o=e||r.tr,s=this.buildProps(o,i),a=Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)(xe(k({},s),{dispatch:i}))]));return xe(k({},a),{chain:()=>this.createChain(o,i)})}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i;o.storedMarks&&e.setStoredMarks(o.storedMarks);const a={tr:e,editor:i,view:s,state:js({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}}const ID=ke.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:d,parent:p}=f,h=q.atStart(u).from===d;return!c||!h||!p.type.isTextblock||p.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i=k({},r),o=xe(k({},r),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return Hs()||Np()?o:i},addProseMirrorPlugins(){return[new we({key:new Qe("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(h=>h.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:o,to:s}=e.selection,a=q.atStart(e.doc).from,l=q.atEnd(e.doc).to,u=o===a&&s===l,c=n.doc.textBetween(0,n.doc.content.size," "," ").length===0;if(i||!u||!c)return;const f=n.tr,d=js({state:n,transaction:f}),{commands:p}=new Ws({editor:this.editor,state:d});if(p.clearNodes(),!!f.steps.length)return f}})]}}),VD=ke.create({name:"tabindex",addProseMirrorPlugins(){return[new we({key:new Qe("tabindex"),props:{attributes:()=>{if(this.editor.isEditable)return{tabindex:"0"}}}})]}});var PD=Object.freeze({__proto__:null,ClipboardTextSerializer:By,Commands:BD,Editable:LD,FocusEvents:ND,Keymap:ID,Tabindex:VD});function RD(t,e){const n=Oe(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?k({},s.attrs):{}}function Vp(t,e){const n=$s(typeof e=="string"?e:e.name,t.schema);return n==="node"?RD(t,e):n==="mark"?Kl(t,e):{}}function HD(t,e,n={}){if(!e)return Xi(t,null,n)||fl(t,null,n);const r=$s(e,t.schema);return r==="node"?Xi(t,e,n):r==="mark"?fl(t,e,n):!1}function $D(t,e){const n=Rt.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function zD(t,e){const n={from:0,to:t.content.size};return Tp(t,n,e)}function jD(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function WD(t,e){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}class qs{constructor(e){this.find=e.find,this.handler=e.handler}}const qD=(t,e)=>{if(ql(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[];return r.push(n.text),r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Fa(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!!(!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code)))return!1;let c=!1;const f=500,d=u.parent.textBetween(Math.max(0,u.parentOffset-f),u.parentOffset,void 0," ")+o;return s.forEach(p=>{if(c)return;const h=qD(d,p.find);if(!h)return;const m=l.state.tr,y=js({state:l.state,transaction:m}),D={from:r-(h[0].length-o.length),to:i},{commands:w,chain:M,can:v}=new Ws({editor:n,state:y});p.handler({state:y,range:D,match:h,commands:w,chain:M,can:v})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:r,to:i,text:o}),l.dispatch(m),c=!0)}),c}function UD(t){const{editor:e,rules:n}=t,r=new we({state:{init(){return null},apply(i,o){const s=i.getMeta(this);return s||(i.selectionSet||i.docChanged?null:o)}},props:{handleTextInput(i,o,s,a){return Fa({editor:e,from:o,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Fa({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Fa({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function KD(t){return typeof t=="number"}class JD{constructor(e){this.find=e.find,this.handler=e.handler}}const GD=(t,e)=>{if(ql(e))return[...t.matchAll(e)];const n=e(t);return n?n.map(r=>{const i=[];return i.push(r.text),i.index=r.index,i.input=t,i.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(r.replaceWith)),i}):[]};function YD(t){const{editor:e,state:n,from:r,to:i,rule:o}=t,{commands:s,chain:a,can:l}=new Ws({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,i,(f,d)=>{if(!f.isTextblock||f.type.spec.code)return;const p=Math.max(r,d),h=Math.min(i,d+f.content.size),m=f.textBetween(p-d,h-d,void 0,"\uFFFC");GD(m,o.find).forEach(D=>{if(D.index===void 0)return;const w=p+D.index+1,M=w+D[0].length,v={from:n.tr.mapping.map(w),to:n.tr.mapping.map(M)},F=o.handler({state:n,range:v,match:D,commands:s,chain:a,can:l});u.push(F)})}),u.every(f=>f!==null)}function XD(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1;return n.map(a=>new we({view(l){const u=c=>{var f;r=!((f=l.dom.parentElement)===null||f===void 0)&&f.contains(c.target)?l.dom.parentElement:null};return window.addEventListener("dragstart",u),{destroy(){window.removeEventListener("dragstart",u)}}},props:{handleDOMEvents:{drop:l=>(o=r===l.dom.parentElement,!1),paste:(l,u)=>{var c;const f=(c=u.clipboardData)===null||c===void 0?void 0:c.getData("text/html");return i=!!(f!=null&&f.includes("data-pm-slice")),!1}}},appendTransaction:(l,u,c)=>{const f=l[0],d=f.getMeta("uiEvent")==="paste"&&!i,p=f.getMeta("uiEvent")==="drop"&&!o;if(!d&&!p)return;const h=u.doc.content.findDiffStart(c.doc.content),m=u.doc.content.findDiffEnd(c.doc.content);if(!KD(h)||!m||h===m.b)return;const y=c.tr,D=js({state:c,transaction:y});if(!(!YD({editor:e,state:D,from:Math.max(h-1,0),to:m.b,rule:a})||!y.steps.length))return y}}))}function Pp(t){const e=[],{nodeExtensions:n,markExtensions:r}=zs(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=I(s,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([d,p])=>{e.push({type:f,name:d,attribute:k(k({},o),p)})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=I(s,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,f])=>{e.push({type:s.name,name:c,attribute:k(k({},o),f)})})}),e}function ve(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r=k({},e);return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}i==="class"?r[i]=[r[i],o].join(" "):i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function dl(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>ve(n,r),{})}function ZD(t={}){return Object.keys(t).length===0&&t.constructor===Object}function QD(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function $c(t,e){return t.style?t:xe(k({},t),{getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):QD(n.getAttribute(s.name));return a==null?o:xe(k({},o),{[s.name]:a})},{});return k(k({},r),i)}})}function zc(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&ZD(n)?!1:n!=null))}function eC(t){var e;const n=Pp(t),{nodeExtensions:r,markExtensions:i}=zs(t),o=(e=r.find(l=>I(l,"topNode")))===null||e===void 0?void 0:e.name,s=Object.fromEntries(r.map(l=>{const u=n.filter(y=>y.type===l.name),c={name:l.name,options:l.options,storage:l.storage},f=t.reduce((y,D)=>{const w=I(D,"extendNodeSchema",c);return k(k({},y),w?w(l):{})},{}),d=zc(xe(k({},f),{content:U(I(l,"content",c)),marks:U(I(l,"marks",c)),group:U(I(l,"group",c)),inline:U(I(l,"inline",c)),atom:U(I(l,"atom",c)),selectable:U(I(l,"selectable",c)),draggable:U(I(l,"draggable",c)),code:U(I(l,"code",c)),defining:U(I(l,"defining",c)),isolating:U(I(l,"isolating",c)),attrs:Object.fromEntries(u.map(y=>{var D;return[y.name,{default:(D=y==null?void 0:y.attribute)===null||D===void 0?void 0:D.default}]}))})),p=U(I(l,"parseHTML",c));p&&(d.parseDOM=p.map(y=>$c(y,u)));const h=I(l,"renderHTML",c);h&&(d.toDOM=y=>h({node:y,HTMLAttributes:dl(y,u)}));const m=I(l,"renderText",c);return m&&(d.toText=m),[l.name,d]})),a=Object.fromEntries(i.map(l=>{const u=n.filter(m=>m.type===l.name),c={name:l.name,options:l.options,storage:l.storage},f=t.reduce((m,y)=>{const D=I(y,"extendMarkSchema",c);return k(k({},m),D?D(l):{})},{}),d=zc(xe(k({},f),{inclusive:U(I(l,"inclusive",c)),excludes:U(I(l,"excludes",c)),group:U(I(l,"group",c)),spanning:U(I(l,"spanning",c)),code:U(I(l,"code",c)),attrs:Object.fromEntries(u.map(m=>{var y;return[m.name,{default:(y=m==null?void 0:m.attribute)===null||y===void 0?void 0:y.default}]}))})),p=U(I(l,"parseHTML",c));p&&(d.parseDOM=p.map(m=>$c(m,u)));const h=I(l,"renderHTML",c);return h&&(d.toDOM=m=>h({mark:m,HTMLAttributes:dl(m,u)})),[l.name,d]}));return new tv({topNode:o,nodes:s,marks:a})}function Ba(t,e){return e.nodes[t]||e.marks[t]||null}function jc(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function tC(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Pr{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Pr.resolve(e),this.schema=eC(this.extensions),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const o={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Ba(r.name,this.schema)};r.type==="mark"&&((i=U(I(r,"keepOnSplit",o)))!==null&&i!==void 0?i:!0)&&this.splittableMarks.push(r.name);const s=I(r,"onBeforeCreate",o);s&&this.editor.on("beforeCreate",s);const a=I(r,"onCreate",o);a&&this.editor.on("create",a);const l=I(r,"onUpdate",o);l&&this.editor.on("update",l);const u=I(r,"onSelectionUpdate",o);u&&this.editor.on("selectionUpdate",u);const c=I(r,"onTransaction",o);c&&this.editor.on("transaction",c);const f=I(r,"onFocus",o);f&&this.editor.on("focus",f);const d=I(r,"onBlur",o);d&&this.editor.on("blur",d);const p=I(r,"onDestroy",o);p&&this.editor.on("destroy",p)})}static resolve(e){const n=Pr.sort(Pr.flatten(e)),r=tC(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=I(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=I(r,"priority")||100,s=I(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ba(n.name,this.schema)},i=I(n,"addCommands",r);return i?k(k({},e),i()):e},{})}get plugins(){const{editor:e}=this,n=Pr.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Ba(s.name,this.schema)},l=[],u=I(s,"addKeyboardShortcuts",a);if(u){const p=Object.fromEntries(Object.entries(u()).map(([m,y])=>[m,()=>y({editor:e})])),h=My(p);l.push(h)}const c=I(s,"addInputRules",a);jc(s,e.options.enableInputRules)&&c&&r.push(...c());const f=I(s,"addPasteRules",a);jc(s,e.options.enablePasteRules)&&f&&i.push(...f());const d=I(s,"addProseMirrorPlugins",a);if(d){const p=d();l.push(...p)}return l}).flat();return[UD({editor:e,rules:r}),...XD({editor:e,rules:i}),...o]}get attributes(){return Pp(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=zs(this.extensions);return Object.fromEntries(n.filter(r=>!!I(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Oe(r.name,this.schema)},s=I(r,"addNodeView",o);if(!s)return[];const a=(l,u,c,f)=>{const d=dl(l,i);return s()({editor:e,node:l,getPos:c,decorations:f,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}class nC{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}const rC=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;class iC extends nC{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=WD(rC,this.options.injectNonce))}setOptions(e={}){this.options=k(k({},this.options),e),!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){this.setOptions({editable:e})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Op(n)?n(e,this.state.plugins):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(PD):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Pr(n,this)}createCommandManager(){this.commandManager=new Ws({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Ip(this.options.content,this.schema,this.options.parseOptions),n=Lp(e,this.options.autofocus);this.view=new Dy(this.options.element,xe(k({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:Nr.create({doc:e,selection:n})}));const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Vp(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return HD(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return $D(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return zD(this.state.doc,{blockSeparator:n,textSerializers:k(k({},r),Mp(this.schema))})}get isEmpty(){return jD(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}}class Te{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=k(k({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=U(I(this,"addOptions",{name:this.name}))),this.storage=U(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Te(e)}configure(e={}){const n=this.extend();return n.options=Rs(this.options,e),n.storage=U(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Te(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=U(I(n,"addOptions",{name:n.name})),n.storage=U(I(n,"addStorage",{name:n.name,options:n.options})),n}}class Ot{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=k(k({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=U(I(this,"addOptions",{name:this.name}))),this.storage=U(I(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ot(e)}configure(e={}){const n=this.extend();return n.options=Rs(this.options,e),n.storage=U(I(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Ot(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=U(I(n,"addOptions",{name:n.name})),n.storage=U(I(n,"addStorage",{name:n.name,options:n.options})),n}}class oC{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options=k({stopEvent:null,ignoreMutation:null},r),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return null}get contentDOM(){return null}onDragStart(e){var n,r,i,o,s,a,l;const{view:u}=this.editor,c=e.target,f=c.nodeType===3?(n=c.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||((r=this.contentDOM)===null||r===void 0?void 0:r.contains(c))||!f)return;let d=0,p=0;if(this.dom!==f){const y=this.dom.getBoundingClientRect(),D=f.getBoundingClientRect(),w=(i=e.offsetX)!==null&&i!==void 0?i:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,M=(s=e.offsetY)!==null&&s!==void 0?s:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;d=D.x-y.x+w,p=D.y-y.y+M}(l=e.dataTransfer)===null||l===void 0||l.setDragImage(this.dom,d,p);const h=z.create(u.state.doc,this.getPos()),m=u.state.tr.setSelection(h);u.dispatch(m)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const o=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!o)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,u=!!this.node.type.spec.draggable,c=z.isSelectable(this.node),f=e.type==="copy",d=e.type==="paste",p=e.type==="cut",h=e.type==="mousedown",m=e.type.startsWith("drag");if(!u&&c&&m&&e.preventDefault(),u&&m&&!l)return e.preventDefault(),!1;if(u&&a&&!l&&h){const y=r.closest("[data-drag-handle]");y&&(this.dom===y||this.dom.contains(y))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||o||f||d||p||h&&c)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&Hs()&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return n.setNodeMarkup(r,void 0,k(k({},this.node.attrs),e)),!0})}deleteNode(){const e=this.getPos(),n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Rp(t){return new qs({find:t.find,handler:({state:e,range:n,match:r})=>{const i=U(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;if(r[1]){const l=r[0].lastIndexOf(r[1]);let u=s+l;u>a?u=a:a=u+r[1].length;const c=r[0][r[0].length-1];o.insertText(c,s+r[0].length-1),o.replaceWith(u,a,t.type.create(i))}else r[0]&&o.replaceWith(s,a,t.type.create(i))}})}function rs(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t-1),s=Ul(o,i.type);!s||r.push(k({mark:i},s))}):n.nodesBetween(t,e,(i,o)=>{r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function cr(t){return new qs({find:t.find,handler:({state:e,range:n,match:r})=>{const i=U(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];let l=n.to;if(s){const u=a.search(/\S/),c=n.from+a.indexOf(s),f=c+s.length;if(rs(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>c).length)return null;f<n.to&&o.delete(f,n.to),c>n.from&&o.delete(n.from+u,c),l=n.from+u+s.length,o.addMark(n.from+u,l,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function pl(t){return new qs({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=U(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Us(t){return new qs({find:t.find,handler:({state:e,range:n,match:r})=>{const i=U(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),l=a&&Fl(a,t.type,i);if(!l)return null;o.wrap(a,l);const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&no(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}function Ln(t){return new JD({find:t.find,handler:({state:e,range:n,match:r})=>{const i=U(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];let l=n.to;if(s){const u=a.search(/\S/),c=n.from+a.indexOf(s),f=c+s.length;if(rs(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>c).length)return null;f<n.to&&o.delete(f,n.to),c>n.from&&o.delete(n.from+u,c),l=n.from+u+s.length,o.addMark(n.from+u,l,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function sC(t,e){const n=new zd(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function aC(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function lC(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function uC(t){const e=lC(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function cC(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const u=e.slice(o).map(a,-1),c=e.slice(o).map(l),f=e.invert().map(u,-1),d=e.invert().map(c);r.push({oldRange:{from:f,to:d},newRange:{from:u,to:c}})})}),uC(r)}function fC(t){return Fp(t)&&t instanceof z}function dC(t,e,n){const i=t.state.doc.content.size,o=ln(e,0,i),s=ln(n,0,i),a=t.coordsAtPos(o),l=t.coordsAtPos(s,-1),u=Math.min(a.top,l.top),c=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),d=Math.max(a.right,l.right),p=d-f,h=c-u,D={top:u,bottom:c,left:f,right:d,width:p,height:h,x:f,y:u};return xe(k({},D),{toJSON:()=>D})}var Ge="top",gt="bottom",vt="right",Ye="left",Gl="auto",io=[Ge,gt,vt,Ye],ii="start",Zi="end",pC="clippingParents",Hp="viewport",Ci="popper",hC="reference",Wc=io.reduce(function(t,e){return t.concat([e+"-"+ii,e+"-"+Zi])},[]),$p=[].concat(io,[Gl]).reduce(function(t,e){return t.concat([e,e+"-"+ii,e+"-"+Zi])},[]),mC="beforeRead",gC="read",vC="afterRead",yC="beforeMain",bC="main",DC="afterMain",CC="beforeWrite",AC="write",xC="afterWrite",kC=[mC,gC,vC,yC,bC,DC,CC,AC,xC];function Jt(t){return t?(t.nodeName||"").toLowerCase():null}function Tt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function oi(t){var e=Tt(t).Element;return t instanceof e||t instanceof Element}function mt(t){var e=Tt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Yl(t){if(typeof ShadowRoot=="undefined")return!1;var e=Tt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function wC(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!mt(o)||!Jt(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function EC(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,u){return l[u]="",l},{});!mt(i)||!Jt(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}var zp={name:"applyStyles",enabled:!0,phase:"write",fn:wC,effect:EC,requires:["computeStyles"]};function jt(t){return t.split("-")[0]}var ir=Math.max,is=Math.min,si=Math.round;function ai(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),r=1,i=1;if(mt(t)&&e){var o=t.offsetHeight,s=t.offsetWidth;s>0&&(r=si(n.width)/s||1),o>0&&(i=si(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function Xl(t){var e=ai(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function jp(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Yl(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fn(t){return Tt(t).getComputedStyle(t)}function SC(t){return["table","td","th"].indexOf(Jt(t))>=0}function Pn(t){return((oi(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ks(t){return Jt(t)==="html"?t:t.assignedSlot||t.parentNode||(Yl(t)?t.host:null)||Pn(t)}function qc(t){return!mt(t)||fn(t).position==="fixed"?null:t.offsetParent}function _C(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&mt(t)){var r=fn(t);if(r.position==="fixed")return null}var i=Ks(t);for(Yl(i)&&(i=i.host);mt(i)&&["html","body"].indexOf(Jt(i))<0;){var o=fn(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function oo(t){for(var e=Tt(t),n=qc(t);n&&SC(n)&&fn(n).position==="static";)n=qc(n);return n&&(Jt(n)==="html"||Jt(n)==="body"&&fn(n).position==="static")?e:n||_C(t)||e}function Zl(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Pi(t,e,n){return ir(t,is(e,n))}function OC(t,e,n){var r=Pi(t,e,n);return r>n?n:r}function Wp(){return{top:0,right:0,bottom:0,left:0}}function qp(t){return Object.assign({},Wp(),t)}function Up(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var TC=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,qp(typeof e!="number"?e:Up(e,io))};function MC(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=jt(n.placement),l=Zl(a),u=[Ye,vt].indexOf(a)>=0,c=u?"height":"width";if(!(!o||!s)){var f=TC(i.padding,n),d=Xl(o),p=l==="y"?Ge:Ye,h=l==="y"?gt:vt,m=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],y=s[l]-n.rects.reference[l],D=oo(o),w=D?l==="y"?D.clientHeight||0:D.clientWidth||0:0,M=m/2-y/2,v=f[p],F=w-d[c]-f[h],E=w/2-d[c]/2+M,O=Pi(v,E,F),S=l;n.modifiersData[r]=(e={},e[S]=O,e.centerOffset=O-E,e)}}function FC(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!jp(e.elements.popper,i)||(e.elements.arrow=i))}var BC={name:"arrow",enabled:!0,phase:"main",fn:MC,effect:FC,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function li(t){return t.split("-")[1]}var LC={top:"auto",right:"auto",bottom:"auto",left:"auto"};function NC(t){var e=t.x,n=t.y,r=window,i=r.devicePixelRatio||1;return{x:si(e*i)/i||0,y:si(n*i)/i||0}}function Uc(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,f=t.isFixed,d=s.x,p=d===void 0?0:d,h=s.y,m=h===void 0?0:h,y=typeof c=="function"?c({x:p,y:m}):{x:p,y:m};p=y.x,m=y.y;var D=s.hasOwnProperty("x"),w=s.hasOwnProperty("y"),M=Ye,v=Ge,F=window;if(u){var E=oo(n),O="clientHeight",S="clientWidth";if(E===Tt(n)&&(E=Pn(n),fn(E).position!=="static"&&a==="absolute"&&(O="scrollHeight",S="scrollWidth")),E=E,i===Ge||(i===Ye||i===vt)&&o===Zi){v=gt;var B=f&&E===F&&F.visualViewport?F.visualViewport.height:E[O];m-=B-r.height,m*=l?1:-1}if(i===Ye||(i===Ge||i===gt)&&o===Zi){M=vt;var R=f&&E===F&&F.visualViewport?F.visualViewport.width:E[S];p-=R-r.width,p*=l?1:-1}}var K=Object.assign({position:a},u&&LC),$=c===!0?NC({x:p,y:m}):{x:p,y:m};if(p=$.x,m=$.y,l){var j;return Object.assign({},K,(j={},j[v]=w?"0":"",j[M]=D?"0":"",j.transform=(F.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",j))}return Object.assign({},K,(e={},e[v]=w?m+"px":"",e[M]=D?p+"px":"",e.transform="",e))}function IC(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:jt(e.placement),variation:li(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Uc(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Uc(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var VC={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:IC,data:{}},Ao={passive:!0};function PC(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=Tt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,Ao)}),a&&l.addEventListener("resize",n.update,Ao),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Ao)}),a&&l.removeEventListener("resize",n.update,Ao)}}var RC={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:PC,data:{}},HC={left:"right",right:"left",bottom:"top",top:"bottom"};function Lo(t){return t.replace(/left|right|bottom|top/g,function(e){return HC[e]})}var $C={start:"end",end:"start"};function Kc(t){return t.replace(/start|end/g,function(e){return $C[e]})}function Ql(t){var e=Tt(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function eu(t){return ai(Pn(t)).left+Ql(t).scrollLeft}function zC(t){var e=Tt(t),n=Pn(t),r=e.visualViewport,i=n.clientWidth,o=n.clientHeight,s=0,a=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,a=r.offsetTop)),{width:i,height:o,x:s+eu(t),y:a}}function jC(t){var e,n=Pn(t),r=Ql(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=ir(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=ir(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+eu(t),l=-r.scrollTop;return fn(i||n).direction==="rtl"&&(a+=ir(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function tu(t){var e=fn(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Kp(t){return["html","body","#document"].indexOf(Jt(t))>=0?t.ownerDocument.body:mt(t)&&tu(t)?t:Kp(Ks(t))}function Ri(t,e){var n;e===void 0&&(e=[]);var r=Kp(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Tt(r),s=i?[o].concat(o.visualViewport||[],tu(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(Ri(Ks(s)))}function hl(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function WC(t){var e=ai(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function Jc(t,e){return e===Hp?hl(zC(t)):oi(e)?WC(e):hl(jC(Pn(t)))}function qC(t){var e=Ri(Ks(t)),n=["absolute","fixed"].indexOf(fn(t).position)>=0,r=n&&mt(t)?oo(t):t;return oi(r)?e.filter(function(i){return oi(i)&&jp(i,r)&&Jt(i)!=="body"}):[]}function UC(t,e,n){var r=e==="clippingParents"?qC(t):[].concat(e),i=[].concat(r,[n]),o=i[0],s=i.reduce(function(a,l){var u=Jc(t,l);return a.top=ir(u.top,a.top),a.right=is(u.right,a.right),a.bottom=is(u.bottom,a.bottom),a.left=ir(u.left,a.left),a},Jc(t,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Jp(t){var e=t.reference,n=t.element,r=t.placement,i=r?jt(r):null,o=r?li(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Ge:l={x:s,y:e.y-n.height};break;case gt:l={x:s,y:e.y+e.height};break;case vt:l={x:e.x+e.width,y:a};break;case Ye:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?Zl(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case ii:l[u]=l[u]-(e[c]/2-n[c]/2);break;case Zi:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function Qi(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.boundary,s=o===void 0?pC:o,a=n.rootBoundary,l=a===void 0?Hp:a,u=n.elementContext,c=u===void 0?Ci:u,f=n.altBoundary,d=f===void 0?!1:f,p=n.padding,h=p===void 0?0:p,m=qp(typeof h!="number"?h:Up(h,io)),y=c===Ci?hC:Ci,D=t.rects.popper,w=t.elements[d?y:c],M=UC(oi(w)?w:w.contextElement||Pn(t.elements.popper),s,l),v=ai(t.elements.reference),F=Jp({reference:v,element:D,strategy:"absolute",placement:i}),E=hl(Object.assign({},D,F)),O=c===Ci?E:v,S={top:M.top-O.top+m.top,bottom:O.bottom-M.bottom+m.bottom,left:M.left-O.left+m.left,right:O.right-M.right+m.right},B=t.modifiersData.offset;if(c===Ci&&B){var R=B[i];Object.keys(S).forEach(function(K){var $=[vt,gt].indexOf(K)>=0?1:-1,j=[Ge,gt].indexOf(K)>=0?"y":"x";S[K]+=R[j]*$})}return S}function KC(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?$p:l,c=li(r),f=c?a?Wc:Wc.filter(function(h){return li(h)===c}):io,d=f.filter(function(h){return u.indexOf(h)>=0});d.length===0&&(d=f);var p=d.reduce(function(h,m){return h[m]=Qi(t,{placement:m,boundary:i,rootBoundary:o,padding:s})[jt(m)],h},{});return Object.keys(p).sort(function(h,m){return p[h]-p[m]})}function JC(t){if(jt(t)===Gl)return[];var e=Lo(t);return[Kc(t),e,Kc(e)]}function GC(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,u=n.padding,c=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,h=p===void 0?!0:p,m=n.allowedAutoPlacements,y=e.options.placement,D=jt(y),w=D===y,M=l||(w||!h?[Lo(y)]:JC(y)),v=[y].concat(M).reduce(function(ut,et){return ut.concat(jt(et)===Gl?KC(e,{placement:et,boundary:c,rootBoundary:f,padding:u,flipVariations:h,allowedAutoPlacements:m}):et)},[]),F=e.rects.reference,E=e.rects.popper,O=new Map,S=!0,B=v[0],R=0;R<v.length;R++){var K=v[R],$=jt(K),j=li(K)===ii,te=[Ge,gt].indexOf($)>=0,he=te?"width":"height",le=Qi(e,{placement:K,boundary:c,rootBoundary:f,altBoundary:d,padding:u}),ye=te?j?vt:Ye:j?gt:Ge;F[he]>E[he]&&(ye=Lo(ye));var be=Lo(ye),ne=[];if(o&&ne.push(le[$]<=0),a&&ne.push(le[ye]<=0,le[be]<=0),ne.every(function(ut){return ut})){B=K,S=!1;break}O.set(K,ne)}if(S)for(var re=h?3:1,Re=function(et){var He=v.find(function(Yt){var $e=O.get(Yt);if($e)return $e.slice(0,et).every(function(Xt){return Xt})});if(He)return B=He,"break"},lt=re;lt>0;lt--){var Q=Re(lt);if(Q==="break")break}e.placement!==B&&(e.modifiersData[r]._skip=!0,e.placement=B,e.reset=!0)}}var YC={name:"flip",enabled:!0,phase:"main",fn:GC,requiresIfExists:["offset"],data:{_skip:!1}};function Gc(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Yc(t){return[Ge,vt,gt,Ye].some(function(e){return t[e]>=0})}function XC(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Qi(e,{elementContext:"reference"}),a=Qi(e,{altBoundary:!0}),l=Gc(s,r),u=Gc(a,i,o),c=Yc(l),f=Yc(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var ZC={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:XC};function QC(t,e,n){var r=jt(t),i=[Ye,Ge].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Ye,vt].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function eA(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=$p.reduce(function(c,f){return c[f]=QC(f,e.rects,o),c},{}),a=s[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}var tA={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:eA};function nA(t){var e=t.state,n=t.name;e.modifiersData[n]=Jp({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var rA={name:"popperOffsets",enabled:!0,phase:"read",fn:nA,data:{}};function iA(t){return t==="x"?"y":"x"}function oA(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,f=n.padding,d=n.tether,p=d===void 0?!0:d,h=n.tetherOffset,m=h===void 0?0:h,y=Qi(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),D=jt(e.placement),w=li(e.placement),M=!w,v=Zl(D),F=iA(v),E=e.modifiersData.popperOffsets,O=e.rects.reference,S=e.rects.popper,B=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,R=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),K=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(!!E){if(o){var j,te=v==="y"?Ge:Ye,he=v==="y"?gt:vt,le=v==="y"?"height":"width",ye=E[v],be=ye+y[te],ne=ye-y[he],re=p?-S[le]/2:0,Re=w===ii?O[le]:S[le],lt=w===ii?-S[le]:-O[le],Q=e.elements.arrow,ut=p&&Q?Xl(Q):{width:0,height:0},et=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Wp(),He=et[te],Yt=et[he],$e=Pi(0,O[le],ut[le]),Xt=M?O[le]/2-re-$e-He-R.mainAxis:Re-$e-He-R.mainAxis,ct=M?-O[le]/2+re+$e+Yt+R.mainAxis:lt+$e+Yt+R.mainAxis,Zt=e.elements.arrow&&oo(e.elements.arrow),Rn=Zt?v==="y"?Zt.clientTop||0:Zt.clientLeft||0:0,Hn=(j=K==null?void 0:K[v])!=null?j:0,vr=ye+Xt-Hn-Rn,yr=ye+ct-Hn,$n=Pi(p?is(be,vr):be,ye,p?ir(ne,yr):ne);E[v]=$n,$[v]=$n-ye}if(a){var zn,br=v==="x"?Ge:Ye,Dr=v==="x"?gt:vt,qe=E[F],ft=F==="y"?"height":"width",Ft=qe+y[br],Me=qe-y[Dr],dn=[Ge,Ye].indexOf(D)!==-1,jn=(zn=K==null?void 0:K[F])!=null?zn:0,Cr=dn?Ft:qe-O[ft]-S[ft]-jn+R.altAxis,Ar=dn?qe+O[ft]+S[ft]-jn-R.altAxis:Me,Qt=p&&dn?OC(Cr,qe,Ar):Pi(p?Cr:Ft,qe,p?Ar:Me);E[F]=Qt,$[F]=Qt-qe}e.modifiersData[r]=$}}var sA={name:"preventOverflow",enabled:!0,phase:"main",fn:oA,requiresIfExists:["offset"]};function aA(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function lA(t){return t===Tt(t)||!mt(t)?Ql(t):aA(t)}function uA(t){var e=t.getBoundingClientRect(),n=si(e.width)/t.offsetWidth||1,r=si(e.height)/t.offsetHeight||1;return n!==1||r!==1}function cA(t,e,n){n===void 0&&(n=!1);var r=mt(e),i=mt(e)&&uA(e),o=Pn(e),s=ai(t,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Jt(e)!=="body"||tu(o))&&(a=lA(e)),mt(e)?(l=ai(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=eu(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function fA(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function dA(t){var e=fA(t);return kC.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function pA(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function hA(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Xc={placement:"bottom",modifiers:[],strategy:"absolute"};function Zc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function mA(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?Xc:i;return function(a,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Xc,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],d=!1,p={state:c,setOptions:function(D){var w=typeof D=="function"?D(c.options):D;m(),c.options=Object.assign({},o,c.options,w),c.scrollParents={reference:oi(a)?Ri(a):a.contextElement?Ri(a.contextElement):[],popper:Ri(l)};var M=dA(hA([].concat(r,c.options.modifiers)));return c.orderedModifiers=M.filter(function(v){return v.enabled}),h(),p.update()},forceUpdate:function(){if(!d){var D=c.elements,w=D.reference,M=D.popper;if(!!Zc(w,M)){c.rects={reference:cA(w,oo(M),c.options.strategy==="fixed"),popper:Xl(M)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(R){return c.modifiersData[R.name]=Object.assign({},R.data)});for(var v=0;v<c.orderedModifiers.length;v++){if(c.reset===!0){c.reset=!1,v=-1;continue}var F=c.orderedModifiers[v],E=F.fn,O=F.options,S=O===void 0?{}:O,B=F.name;typeof E=="function"&&(c=E({state:c,options:S,name:B,instance:p})||c)}}}},update:pA(function(){return new Promise(function(y){p.forceUpdate(),y(c)})}),destroy:function(){m(),d=!0}};if(!Zc(a,l))return p;p.setOptions(u).then(function(y){!d&&u.onFirstUpdate&&u.onFirstUpdate(y)});function h(){c.orderedModifiers.forEach(function(y){var D=y.name,w=y.options,M=w===void 0?{}:w,v=y.effect;if(typeof v=="function"){var F=v({state:c,name:D,instance:p,options:M}),E=function(){};f.push(F||E)}})}function m(){f.forEach(function(y){return y()}),f=[]}return p}}var gA=[RC,rA,VC,zp,tA,YC,sA,BC,ZC],vA=mA({defaultModifiers:gA}),yA="tippy-box",Gp="tippy-content",bA="tippy-backdrop",Yp="tippy-arrow",Xp="tippy-svg-arrow",Kn={passive:!0,capture:!0},Zp=function(){return document.body};function La(t,e,n){if(Array.isArray(t)){var r=t[e];return r==null?Array.isArray(n)?n[e]:n:r}return t}function nu(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Qp(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Qc(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function DA(t){return t.split(/\s+/).filter(Boolean)}function Mr(t){return[].concat(t)}function ef(t,e){t.indexOf(e)===-1&&t.push(e)}function CA(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function AA(t){return t.split("-")[0]}function ss(t){return[].slice.call(t)}function tf(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Hi(){return document.createElement("div")}function Js(t){return["Element","Fragment"].some(function(e){return nu(t,e)})}function xA(t){return nu(t,"NodeList")}function kA(t){return nu(t,"MouseEvent")}function wA(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function EA(t){return Js(t)?[t]:xA(t)?ss(t):Array.isArray(t)?t:ss(document.querySelectorAll(t))}function Na(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function nf(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function SA(t){var e,n=Mr(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function _A(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,u=AA(s.placement),c=s.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,d=u==="top"?c.bottom.y:0,p=u==="right"?c.left.x:0,h=u==="left"?c.right.x:0,m=o.top-r+f>l,y=r-o.bottom-d>l,D=o.left-n+p>l,w=n-o.right-h>l;return m||y||D||w})}function Ia(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function rf(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Nt={isTouch:!1},of=0;function OA(){Nt.isTouch||(Nt.isTouch=!0,window.performance&&document.addEventListener("mousemove",eh))}function eh(){var t=performance.now();t-of<20&&(Nt.isTouch=!1,document.removeEventListener("mousemove",eh)),of=t}function TA(){var t=document.activeElement;if(wA(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function MA(){document.addEventListener("touchstart",OA,Kn),window.addEventListener("blur",TA)}var FA=typeof window!="undefined"&&typeof document!="undefined",BA=FA?!!window.msCrypto:!1,LA={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},NA={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},wt=Object.assign({appendTo:Zp,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},LA,NA),IA=Object.keys(wt),VA=function(e){var n=Object.keys(e);n.forEach(function(r){wt[r]=e[r]})};function th(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=t[o]!==void 0?t[o]:(a=wt[o])!=null?a:s}return r},{});return Object.assign({},t,n)}function PA(t,e){var n=e?Object.keys(th(Object.assign({},wt,{plugins:e}))):IA,r=n.reduce(function(i,o){var s=(t.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function sf(t,e){var n=Object.assign({},e,{content:Qp(e.content,[t])},e.ignoreAttributes?{}:PA(t,e.plugins));return n.aria=Object.assign({},wt.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var RA=function(){return"innerHTML"};function ml(t,e){t[RA()]=e}function af(t){var e=Hi();return t===!0?e.className=Yp:(e.className=Xp,Js(t)?e.appendChild(t):ml(e,t)),e}function lf(t,e){Js(e.content)?(ml(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?ml(t,e.content):t.textContent=e.content)}function gl(t){var e=t.firstElementChild,n=ss(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Gp)}),arrow:n.find(function(r){return r.classList.contains(Yp)||r.classList.contains(Xp)}),backdrop:n.find(function(r){return r.classList.contains(bA)})}}function nh(t){var e=Hi(),n=Hi();n.className=yA,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Hi();r.className=Gp,r.setAttribute("data-state","hidden"),lf(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,s){var a=gl(e),l=a.box,u=a.content,c=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&lf(u,t.props),s.arrow?c?o.arrow!==s.arrow&&(l.removeChild(c),l.appendChild(af(s.arrow))):l.appendChild(af(s.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:i}}nh.$$tippy=!0;var HA=1,xo=[],Va=[];function $A(t,e){var n=sf(t,Object.assign({},wt,th(tf(e)))),r,i,o,s=!1,a=!1,l=!1,u=!1,c,f,d,p=[],h=Qc(vr,n.interactiveDebounce),m,y=HA++,D=null,w=CA(n.plugins),M={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},v={id:y,reference:t,popper:Hi(),popperInstance:D,props:n,state:M,plugins:w,clearDelayTimeouts:Cr,setProps:Ar,setContent:Qt,show:ao,hide:lo,hideWithInteractivity:uo,enable:dn,disable:jn,unmount:co,destroy:fo};if(!n.render)return v;var F=n.render(v),E=F.popper,O=F.onUpdate;E.setAttribute("data-tippy-root",""),E.id="tippy-"+v.id,v.popper=E,t._tippy=v,E._tippy=v;var S=w.map(function(x){return x.fn(v)}),B=t.hasAttribute("aria-expanded");return Zt(),re(),ye(),be("onCreate",[v]),n.showOnCreate&&Ft(),E.addEventListener("mouseenter",function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()}),E.addEventListener("mouseleave",function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&te().addEventListener("mousemove",h)}),v;function R(){var x=v.props.touch;return Array.isArray(x)?x:[x,0]}function K(){return R()[0]==="hold"}function $(){var x;return!!((x=v.props.render)!=null&&x.$$tippy)}function j(){return m||t}function te(){var x=j().parentNode;return x?SA(x):document}function he(){return gl(E)}function le(x){return v.state.isMounted&&!v.state.isVisible||Nt.isTouch||c&&c.type==="focus"?0:La(v.props.delay,x?0:1,wt.delay)}function ye(x){x===void 0&&(x=!1),E.style.pointerEvents=v.props.interactive&&!x?"":"none",E.style.zIndex=""+v.props.zIndex}function be(x,V,P){if(P===void 0&&(P=!0),S.forEach(function(G){G[x]&&G[x].apply(G,V)}),P){var X;(X=v.props)[x].apply(X,V)}}function ne(){var x=v.props.aria;if(!!x.content){var V="aria-"+x.content,P=E.id,X=Mr(v.props.triggerTarget||t);X.forEach(function(G){var Ee=G.getAttribute(V);if(v.state.isVisible)G.setAttribute(V,Ee?Ee+" "+P:P);else{var Ue=Ee&&Ee.replace(P,"").trim();Ue?G.setAttribute(V,Ue):G.removeAttribute(V)}})}}function re(){if(!(B||!v.props.aria.expanded)){var x=Mr(v.props.triggerTarget||t);x.forEach(function(V){v.props.interactive?V.setAttribute("aria-expanded",v.state.isVisible&&V===j()?"true":"false"):V.removeAttribute("aria-expanded")})}}function Re(){te().removeEventListener("mousemove",h),xo=xo.filter(function(x){return x!==h})}function lt(x){if(!(Nt.isTouch&&(l||x.type==="mousedown"))){var V=x.composedPath&&x.composedPath()[0]||x.target;if(!(v.props.interactive&&rf(E,V))){if(Mr(v.props.triggerTarget||t).some(function(P){return rf(P,V)})){if(Nt.isTouch||v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else be("onClickOutside",[v,x]);v.props.hideOnClick===!0&&(v.clearDelayTimeouts(),v.hide(),a=!0,setTimeout(function(){a=!1}),v.state.isMounted||He())}}}function Q(){l=!0}function ut(){l=!1}function et(){var x=te();x.addEventListener("mousedown",lt,!0),x.addEventListener("touchend",lt,Kn),x.addEventListener("touchstart",ut,Kn),x.addEventListener("touchmove",Q,Kn)}function He(){var x=te();x.removeEventListener("mousedown",lt,!0),x.removeEventListener("touchend",lt,Kn),x.removeEventListener("touchstart",ut,Kn),x.removeEventListener("touchmove",Q,Kn)}function Yt(x,V){Xt(x,function(){!v.state.isVisible&&E.parentNode&&E.parentNode.contains(E)&&V()})}function $e(x,V){Xt(x,V)}function Xt(x,V){var P=he().box;function X(G){G.target===P&&(Ia(P,"remove",X),V())}if(x===0)return V();Ia(P,"remove",f),Ia(P,"add",X),f=X}function ct(x,V,P){P===void 0&&(P=!1);var X=Mr(v.props.triggerTarget||t);X.forEach(function(G){G.addEventListener(x,V,P),p.push({node:G,eventType:x,handler:V,options:P})})}function Zt(){K()&&(ct("touchstart",Hn,{passive:!0}),ct("touchend",yr,{passive:!0})),DA(v.props.trigger).forEach(function(x){if(x!=="manual")switch(ct(x,Hn),x){case"mouseenter":ct("mouseleave",yr);break;case"focus":ct(BA?"focusout":"blur",$n);break;case"focusin":ct("focusout",$n);break}})}function Rn(){p.forEach(function(x){var V=x.node,P=x.eventType,X=x.handler,G=x.options;V.removeEventListener(P,X,G)}),p=[]}function Hn(x){var V,P=!1;if(!(!v.state.isEnabled||zn(x)||a)){var X=((V=c)==null?void 0:V.type)==="focus";c=x,m=x.currentTarget,re(),!v.state.isVisible&&kA(x)&&xo.forEach(function(G){return G(x)}),x.type==="click"&&(v.props.trigger.indexOf("mouseenter")<0||s)&&v.props.hideOnClick!==!1&&v.state.isVisible?P=!0:Ft(x),x.type==="click"&&(s=!P),P&&!X&&Me(x)}}function vr(x){var V=x.target,P=j().contains(V)||E.contains(V);if(!(x.type==="mousemove"&&P)){var X=ft().concat(E).map(function(G){var Ee,Ue=G._tippy,en=(Ee=Ue.popperInstance)==null?void 0:Ee.state;return en?{popperRect:G.getBoundingClientRect(),popperState:en,props:n}:null}).filter(Boolean);_A(X,x)&&(Re(),Me(x))}}function yr(x){var V=zn(x)||v.props.trigger.indexOf("click")>=0&&s;if(!V){if(v.props.interactive){v.hideWithInteractivity(x);return}Me(x)}}function $n(x){v.props.trigger.indexOf("focusin")<0&&x.target!==j()||v.props.interactive&&x.relatedTarget&&E.contains(x.relatedTarget)||Me(x)}function zn(x){return Nt.isTouch?K()!==x.type.indexOf("touch")>=0:!1}function br(){Dr();var x=v.props,V=x.popperOptions,P=x.placement,X=x.offset,G=x.getReferenceClientRect,Ee=x.moveTransition,Ue=$()?gl(E).arrow:null,en=G?{getBoundingClientRect:G,contextElement:G.contextElement||j()}:t,pn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(xr){var hn=xr.state;if($()){var Zs=he(),vi=Zs.box;["placement","reference-hidden","escaped"].forEach(function(kr){kr==="placement"?vi.setAttribute("data-placement",hn.placement):hn.attributes.popper["data-popper-"+kr]?vi.setAttribute("data-"+kr,""):vi.removeAttribute("data-"+kr)}),hn.attributes.popper={}}}},tn=[{name:"offset",options:{offset:X}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Ee}},pn];$()&&Ue&&tn.push({name:"arrow",options:{element:Ue,padding:3}}),tn.push.apply(tn,(V==null?void 0:V.modifiers)||[]),v.popperInstance=vA(en,E,Object.assign({},V,{placement:P,onFirstUpdate:d,modifiers:tn}))}function Dr(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function qe(){var x=v.props.appendTo,V,P=j();v.props.interactive&&x===Zp||x==="parent"?V=P.parentNode:V=Qp(x,[P]),V.contains(E)||V.appendChild(E),v.state.isMounted=!0,br()}function ft(){return ss(E.querySelectorAll("[data-tippy-root]"))}function Ft(x){v.clearDelayTimeouts(),x&&be("onTrigger",[v,x]),et();var V=le(!0),P=R(),X=P[0],G=P[1];Nt.isTouch&&X==="hold"&&G&&(V=G),V?r=setTimeout(function(){v.show()},V):v.show()}function Me(x){if(v.clearDelayTimeouts(),be("onUntrigger",[v,x]),!v.state.isVisible){He();return}if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(x.type)>=0&&s)){var V=le(!1);V?i=setTimeout(function(){v.state.isVisible&&v.hide()},V):o=requestAnimationFrame(function(){v.hide()})}}function dn(){v.state.isEnabled=!0}function jn(){v.hide(),v.state.isEnabled=!1}function Cr(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Ar(x){if(!v.state.isDestroyed){be("onBeforeUpdate",[v,x]),Rn();var V=v.props,P=sf(t,Object.assign({},V,tf(x),{ignoreAttributes:!0}));v.props=P,Zt(),V.interactiveDebounce!==P.interactiveDebounce&&(Re(),h=Qc(vr,P.interactiveDebounce)),V.triggerTarget&&!P.triggerTarget?Mr(V.triggerTarget).forEach(function(X){X.removeAttribute("aria-expanded")}):P.triggerTarget&&t.removeAttribute("aria-expanded"),re(),ye(),O&&O(V,P),v.popperInstance&&(br(),ft().forEach(function(X){requestAnimationFrame(X._tippy.popperInstance.forceUpdate)})),be("onAfterUpdate",[v,x])}}function Qt(x){v.setProps({content:x})}function ao(){var x=v.state.isVisible,V=v.state.isDestroyed,P=!v.state.isEnabled,X=Nt.isTouch&&!v.props.touch,G=La(v.props.duration,0,wt.duration);if(!(x||V||P||X)&&!j().hasAttribute("disabled")&&(be("onShow",[v],!1),v.props.onShow(v)!==!1)){if(v.state.isVisible=!0,$()&&(E.style.visibility="visible"),ye(),et(),v.state.isMounted||(E.style.transition="none"),$()){var Ee=he(),Ue=Ee.box,en=Ee.content;Na([Ue,en],0)}d=function(){var tn;if(!(!v.state.isVisible||u)){if(u=!0,E.offsetHeight,E.style.transition=v.props.moveTransition,$()&&v.props.animation){var yt=he(),xr=yt.box,hn=yt.content;Na([xr,hn],G),nf([xr,hn],"visible")}ne(),re(),ef(Va,v),(tn=v.popperInstance)==null||tn.forceUpdate(),be("onMount",[v]),v.props.animation&&$()&&$e(G,function(){v.state.isShown=!0,be("onShown",[v])})}},qe()}}function lo(){var x=!v.state.isVisible,V=v.state.isDestroyed,P=!v.state.isEnabled,X=La(v.props.duration,1,wt.duration);if(!(x||V||P)&&(be("onHide",[v],!1),v.props.onHide(v)!==!1)){if(v.state.isVisible=!1,v.state.isShown=!1,u=!1,s=!1,$()&&(E.style.visibility="hidden"),Re(),He(),ye(!0),$()){var G=he(),Ee=G.box,Ue=G.content;v.props.animation&&(Na([Ee,Ue],X),nf([Ee,Ue],"hidden"))}ne(),re(),v.props.animation?$()&&Yt(X,v.unmount):v.unmount()}}function uo(x){te().addEventListener("mousemove",h),ef(xo,h),h(x)}function co(){v.state.isVisible&&v.hide(),v.state.isMounted&&(Dr(),ft().forEach(function(x){x._tippy.unmount()}),E.parentNode&&E.parentNode.removeChild(E),Va=Va.filter(function(x){return x!==v}),v.state.isMounted=!1,be("onHidden",[v]))}function fo(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),Rn(),delete t._tippy,v.state.isDestroyed=!0,be("onDestroy",[v]))}}function so(t,e){e===void 0&&(e={});var n=wt.plugins.concat(e.plugins||[]);MA();var r=Object.assign({},e,{plugins:n}),i=EA(t),o=i.reduce(function(s,a){var l=a&&$A(a,r);return l&&s.push(l),s},[]);return Js(t)?o[0]:o}so.defaultProps=wt;so.setDefaultProps=VA;so.currentInput=Nt;Object.assign({},zp,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});so.setDefaultProps({render:nh});class zA{constructor({editor:e,element:n,view:r,tippyOptions:i={},shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:s,state:a,from:l,to:u})=>{const{doc:c,selection:f}=a,{empty:d}=f,p=!c.textBetween(l,u).length&&Bp(a.selection);return!(!s.hasFocus()||d||p)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var a;if(this.preventHide){this.preventHide=!1;return}(s==null?void 0:s.relatedTarget)&&((a=this.element.parentNode)===null||a===void 0?void 0:a.contains(s.relatedTarget))||this.hide()},this.editor=e,this.element=n,this.view=r,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=so(e,k({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",r=>{this.blurHandler({event:r})}))}update(e,n){var r,i,o;const{state:s,composing:a}=e,{doc:l,selection:u}=s,c=n&&n.doc.eq(l)&&n.selection.eq(u);if(a||c)return;this.createTooltip();const{ranges:f}=u,d=Math.min(...f.map(m=>m.$from.pos)),p=Math.max(...f.map(m=>m.$to.pos));if(!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:s,oldState:n,from:d,to:p}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((o=this.tippyOptions)===null||o===void 0?void 0:o.getReferenceClientRect)||(()=>{if(fC(s.selection)){const m=e.nodeDOM(d);if(m)return m.getBoundingClientRect()}return dC(e,d,p)})}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e;(e=this.tippy)===null||e===void 0||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const rh=t=>new we({key:typeof t.pluginKey=="string"?new Qe(t.pluginKey):t.pluginKey,view:e=>new zA(k({view:e},t))});ke.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[rh({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});const jA={name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},watch:{editor:{immediate:!0,handler(t){!t||this.$nextTick(()=>{t.registerPlugin(rh({pluginKey:this.pluginKey,editor:t,element:this.$el,tippyOptions:this.tippyOptions,shouldShow:this.shouldShow}))})}}},render(t){return t("div",{style:{visibility:"hidden"}},this.$slots.default)},beforeDestroy(){this.editor.unregisterPlugin(this.pluginKey)}};class WA extends iC{constructor(){super(...arguments),this.contentComponent=null}}const qA={name:"EditorContent",props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(t){t&&t.options.element&&this.$nextTick(()=>{const e=this.$el;!e||!t.options.element.firstChild||(e.append(...t.options.element.childNodes),t.contentComponent=this,t.setOptions({element:e}),t.createNodeViews())})}}},render(t){return t("div")},beforeDestroy(){const{editor:t}=this;if(!t||(t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,!t.options.element.firstChild))return;const e=document.createElement("div");e.append(...t.options.element.childNodes),t.setOptions({element:e})}};class UA{constructor(e,n){const r=rt.extend(e);this.ref=new r(n).$mount()}get element(){return this.ref.$el}updateProps(e={}){if(!this.ref.$props)return;const n=rt.config.silent;rt.config.silent=!0,Object.entries(e).forEach(([r,i])=>{this.ref.$props[r]=i}),rt.config.silent=n}destroy(){this.ref.$destroy()}}class KA extends oC{mount(){var e,n;const r={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(a={})=>this.updateAttributes(a),deleteNode:()=>this.deleteNode()},i=this.onDragStart.bind(this);this.decorationClasses=rt.observable({value:this.getDecorationClasses()});const s=((n=(e=this.editor.contentComponent)===null||e===void 0?void 0:e.$options._base)!==null&&n!==void 0?n:rt).extend(this.component).extend({props:Object.keys(r),provide:()=>({onDragStart:i,decorationClasses:this.decorationClasses})});this.renderer=new UA(s,{parent:this.editor.contentComponent,propsData:r})}get dom(){if(!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.dom.querySelector("[data-node-view-content]")||this.dom}update(e,n){const r=i=>{this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps(i)};if(typeof this.options.update=="function"){const i=this.node,o=this.decorations;return this.node=e,this.decorations=n,this.options.update({oldNode:i,oldDecorations:o,newNode:e,newDecorations:n,updateProps:()=>r({node:e,decorations:n})})}return e.type!==this.node.type?!1:(e===this.node&&this.decorations===n||(this.node=e,this.decorations=n,r({node:e,decorations:n})),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}getDecorationClasses(){return this.decorations.map(e=>e.type.attrs.class).flat().join(" ")}destroy(){this.renderer.destroy()}}function JA(t,e){return n=>n.editor.contentComponent?new KA(t,n,e):{}}const GA={props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(t){return t(this.as,{class:this.decorationClasses.value,style:{whiteSpace:"normal"},attrs:{"data-node-view-wrapper":""},on:{dragstart:this.onDragStart}},this.$slots.default)}};var YA="M19,12H17V15H14V17H19V12M7,9H10V7H5V12H7V9M21,3H3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19V5A2,2 0 0,0 21,3M21,19H3V5H21V19Z",XA="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",ru="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",ZA="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M11 8H9V10C9 11.1 8.1 12 7 12C8.1 12 9 12.9 9 14V16H11V18H9C7.9 18 7 17.1 7 16V15C7 13.9 6.1 13 5 13V11C6.1 11 7 10.1 7 9V8C7 6.9 7.9 6 9 6H11V8M19 13C17.9 13 17 13.9 17 15V16C17 17.1 16.1 18 15 18H13V16H15V14C15 12.9 15.9 12 17 12C15.9 12 15 11.1 15 10V8H13V6H15C16.1 6 17 6.9 17 8V9C17 10.1 17.9 11 19 11V13Z",QA="M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z",uf="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",ex="M3,3H21V5H3V3M7,7H17V9H7V7M3,11H21V13H3V11M7,15H17V17H7V15M3,19H21V21H3V19Z",tx="M3,3H21V5H3V3M3,7H21V9H3V7M3,11H21V13H3V11M3,15H21V17H3V15M3,19H21V21H3V19Z",nx="M3,3H21V5H3V3M3,7H15V9H3V7M3,11H21V13H3V11M3,15H15V17H3V15M3,19H21V21H3V19Z",rx="M3,3H21V5H3V3M9,7H21V9H9V7M3,11H21V13H3V11M9,15H21V17H9V15M3,19H21V21H3V19Z",ix="M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z",ox="M6,5V5.18L8.82,8H11.22L10.5,9.68L12.6,11.78L14.21,8H20V5H6M3.27,5L2,6.27L8.97,13.24L6.5,19H9.5L11.07,15.34L16.73,21L18,19.73L3.55,5.27L3.27,5Z",sx="M4,17L6.75,14.25L6.72,14.23C6.14,13.64 6.14,12.69 6.72,12.11L11.46,7.37L15.7,11.61L10.96,16.35C10.39,16.93 9.46,16.93 8.87,16.37L8.24,17H4M15.91,2.91C16.5,2.33 17.45,2.33 18.03,2.91L20.16,5.03C20.74,5.62 20.74,6.57 20.16,7.16L16.86,10.45L12.62,6.21L15.91,2.91Z",ax="M3,7H9V13H3V7M3,3H21V5H3V3M21,7V9H11V7H21M21,11V13H11V11H21M3,15H17V17H3V15M3,19H21V21H3V19Z",lx="M3,7H9V13H3V7M3,3H21V5H3V3M21,11V13H11V11H21M3,15H17V17H3V15M3,19H21V21H3V19Z",ux="M15,7H21V13H15V7M3,3H21V5H3V3M13,7V9H3V7H13M9,11V13H3V11H9M3,15H17V17H3V15M3,19H21V21H3V19Z",cx="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M14,18V16H16V6.31L13.5,7.75V5.44L16,4H18V16H20V18H14Z",fx="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M21,18H15A2,2 0 0,1 13,16C13,15.47 13.2,15 13.54,14.64L18.41,9.41C18.78,9.05 19,8.55 19,8A2,2 0 0,0 17,6A2,2 0 0,0 15,8H13A4,4 0 0,1 17,4A4,4 0 0,1 21,8C21,9.1 20.55,10.1 19.83,10.83L15,16H21V18Z",dx="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H19A2,2 0 0,1 21,6V16A2,2 0 0,1 19,18H15A2,2 0 0,1 13,16V15H15V16H19V12H15V10H19V6H15V7H13V6A2,2 0 0,1 15,4Z",px="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M18,18V13H13V11L18,4H20V11H21V13H20V18H18M18,11V7.42L15.45,11H18Z",hx="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H20V6H15V10H17A4,4 0 0,1 21,14A4,4 0 0,1 17,18H15A2,2 0 0,1 13,16V15H15V16H17A2,2 0 0,0 19,14A2,2 0 0,0 17,12H15A2,2 0 0,1 13,10V6A2,2 0 0,1 15,4Z",mx="M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H19A2,2 0 0,1 21,6V7H19V6H15V10H19A2,2 0 0,1 21,12V16A2,2 0 0,1 19,18H15A2,2 0 0,1 13,16V6A2,2 0 0,1 15,4M15,12V16H19V12H15Z",gx="M11,13H21V11H11M11,9H21V7H11M3,3V5H21V3M3,21H21V19H3M3,12L7,16V8M11,17H21V15H11V17Z",vx="M11,13H21V11H11M11,9H21V7H11M3,3V5H21V3M11,17H21V15H11M3,8V16L7,12M3,21H21V19H3V21Z",yx="M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z",bx="M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z",Dx="M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z",Cx="M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",Ax="M13,4A4,4 0 0,1 17,8A4,4 0 0,1 13,12H11V18H9V4H13M13,10A2,2 0 0,0 15,8A2,2 0 0,0 13,6H11V10H13Z",xx="M10,7L8,11H11V17H5V11L7,7H10M18,7L16,11H19V17H13V11L15,7H18Z",kx="M23,12V14H18.61C19.61,16.14 19.56,22 12.38,22C4.05,22.05 4.37,15.5 4.37,15.5L8.34,15.55C8.37,18.92 11.5,18.92 12.12,18.88C12.76,18.83 15.15,18.84 15.34,16.5C15.42,15.41 14.32,14.58 13.12,14H1V12H23M19.41,7.89L15.43,7.86C15.43,7.86 15.6,5.09 12.15,5.08C8.7,5.06 9,7.28 9,7.56C9.04,7.84 9.34,9.22 12,9.88H5.71C5.71,9.88 2.22,3.15 10.74,2C19.45,0.8 19.43,7.91 19.41,7.89Z",wx="M5,21H19V19H5V21M12,17A6,6 0 0,0 18,11V3H15.5V11A3.5,3.5 0 0,1 12,14.5A3.5,3.5 0 0,1 8.5,11V3H6V11A6,6 0 0,0 12,17Z",Ex="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",Sx="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",_x="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",Gs="M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z",Ox="M19,13H5V11H19V13Z",Tx="M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z",Mx="M9 7V17H15V15H11V7H9Z",Fx="M9 7C7.9 7 7 7.9 7 9V17H9V9H11V16H13V9H15V17H17V9C17 7.9 16.11 7 15 7H9Z",Bx="M11 7C9.9 7 9 7.9 9 9V11C9 12.11 9.9 13 11 13H13V15H9V17H13C14.11 17 15 16.11 15 15V13C15 11.9 14.11 11 13 11H11V9H15V7H11Z",iu="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z",Lx="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z",Nx="M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z",Ix="M12,20A6,6 0 0,1 6,14C6,10 12,3.25 12,3.25C12,3.25 18,10 18,14A6,6 0 0,1 12,20Z";const Vx={bold:ix,italic:yx,underline:wx,strike:kx,color:Ix,highlight:sx,h1:cx,h2:fx,h3:dx,h4:px,h5:hx,h6:mx,p:Ax,left:nx,center:ex,right:rx,justify:tx,bulletList:bx,orderedList:Cx,taskList:Dx,indent:vx,outdent:gx,link:Gs,image:_x,video:Nx,blockquote:xx,rule:Ox,code:QA,codeBlock:ZA,clear:ox,undo:Lx,redo:Tx,fullscreen:Ex};function ee(t){return Vx[t]}const Px=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#000000","#333333","#666666","#999999","#CCCCCC","#D5D5D4","#E8E8E8","#EEEEEE"];var Rx={props:{value:Sn().def(""),nudgeLeft:An([String,Number]).def(0),nudgeTop:An([String,Number]).def(0),more:ge().def(!0),dark:ge().def(!1)},setup(t,{emit:e}){const n=se(!1);function r(i){e("input",i),n.value=!1}return{mdiCircle:XA,colors:Px,menu:n,setColor:r}}},Hx=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(Pm,{attrs:{"offset-y":"",dark:t.dark,"nudge-left":t.nudgeLeft||255,"nudge-top":t.nudgeTop||42,"close-on-content-click":!1,transition:"scale-transition",origin:t.nudgeLeft?"top left":"top right"},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on;return[t._t("button",function(){return[n(Ce,t._g({attrs:{color:t.value,icon:"",small:""}},i),[n(Et,[t._v(t._s(t.mdiCircle))])],1)]},null,{on:i})]}}],null,!0),model:{value:t.menu,callback:function(r){t.menu=r},expression:"menu"}},[n(Rm,[n(Hm,{staticClass:"d-flex flex-wrap justify-between ma-1",attrs:{fluid:"","max-width":230}},[t._l(t.colors,function(r){return[n(Ce,{key:r,attrs:{icon:"",small:""},on:{click:function(i){return t.setColor(r)}}},[n(Et,{attrs:{color:r}},[t._v(t._s(t.mdiCircle))])],1)]})],2)],1)],1)},$x=[];function Mt(t,e,n,r,i,o,s,a){var l=typeof t=="function"?t.options:t;e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o);var u;if(s?(u=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(d=__VUE_SSR_CONTEXT__),i&&i.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(s)},l._ssrRegister=u):i&&(u=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(p,h){return u.call(h),c(p,h)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:l}}const cf={};var zx=Mt(Rx,Hx,$x,!1,jx,null,null,null);function jx(t){for(let e in cf)this[e]=cf[e]}var Wx=function(){return zx.exports}(),qx={components:{ColorPicker:Wx},props:{dark:ge().def(!1),disabled:ge().def(!1),items:sr().def(()=>[])},setup(){const t=se(null),e=se(null);function n(r){const{color:i}=r.getAttributes("textStyle"),{color:o}=r.getAttributes("highlight");t.value=i,e.value=o}return{color:t,highlight:e,onUpdate:n}}},Ux=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(Cl,t._b({staticClass:"py-1 ps-1",attrs:{dense:"",flat:"",height:"auto"}},"v-toolbar",t.$attrs,!1),[t._l(t.items,function(r,i){return[r.type==="spacer"?n(to,{key:`spacer-${i}-${r.type}`}):r.type==="divider"?n($f,{key:`divider-${i}-${r.type}`,staticClass:"mx-1 me-2",attrs:{vertical:""}}):r.type==="slot"?n("div",{key:`slot-${i}-${r.type}`},[t._t(r.slot,null,null,{attrs:{class:"rounded me-1",disabled:t.disabled,icon:!0,small:!0}})],2):n("div",{key:`button-${i}-${r.type}`},[n($m,{attrs:{"open-delay":500,top:"","z-index":201,bottom:"",attach:""},scopedSlots:t._u([{key:"activator",fn:function(o){var s=o.on,a=o.attrs;return[r.type==="color"?n("div",{staticClass:"me-1"},[n("ColorPicker",t._b({attrs:{dark:t.dark,"nudge-top":-4,"nudge-left":8},on:{input:function(l){r.action&&r.action(t.color)}},scopedSlots:t._u([{key:"button",fn:function(l){var u=l.on;return[n(Ce,t._g({staticClass:"rounded",attrs:{disabled:t.disabled,icon:"",small:"","data-testid":r.type}},Object.assign({},u,s)),[n(Et,{attrs:{color:t.color}},[t._v(" "+t._s(r.icon)+" ")])],1)]}}],null,!0),model:{value:t.color,callback:function(l){t.color=l},expression:"color"}},"ColorPicker",a,!1))],1):r.type==="highlight"?n("div",{staticClass:"me-1"},[n("ColorPicker",t._b({attrs:{dark:t.dark,"nudge-top":-4,"nudge-left":8},on:{input:function(l){r.action&&r.action(t.highlight)}},scopedSlots:t._u([{key:"button",fn:function(l){var u=l.on;return[n(Ce,t._g({staticClass:"rounded",attrs:{disabled:t.disabled,icon:"",small:"","data-testid":r.type}},Object.assign({},u,s)),[n(Et,{attrs:{color:t.highlight}},[t._v(" "+t._s(r.icon)+" ")])],1)]}}],null,!0),model:{value:t.highlight,callback:function(l){t.highlight=l},expression:"highlight"}},"ColorPicker",a,!1))],1):n(Ce,t._g(t._b({staticClass:"rounded me-1",class:{"v-btn--active":r.isActive&&r.isActive()},attrs:{disabled:t.disabled,color:r.isActive&&r.isActive()?"primary":void 0,icon:"",small:"","data-testid":r.type},on:{click:r.action}},"v-btn",a,!1),s),[n(Et,[t._v(t._s(r.icon))])],1)]}}],null,!0)},[n("span",[t._v(t._s(r.title))])])],1)]})],2)},Kx=[];const ff={};var Jx=Mt(qx,Ux,Kx,!1,Gx,null,null,null);function Gx(t){for(let e in ff)this[e]=ff[e]}var ih=function(){return Jx.exports}();const Yx={"editor.words":"\u5355\u8BCD","editor.characters":"\u5B57\u7B26","editor.bold.tooltip":"\u7C97\u4F53","editor.italic.tooltip":"\u659C\u4F53","editor.underline.tooltip":"\u4E0B\u5212\u7EBF","editor.strike.tooltip":"\u4E2D\u5212\u7EBF","editor.color.tooltip":"\u6587\u672C\u989C\u8272","editor.highlight.tooltip":"\u6587\u672C\u9AD8\u4EAE","editor.heading.h1.tooltip":"\u6807\u9898 1","editor.heading.h2.tooltip":"\u6807\u9898 2","editor.heading.h3.tooltip":"\u6807\u9898 3","editor.heading.h4.tooltip":"\u6807\u9898 4","editor.heading.h5.tooltip":"\u6807\u9898 5","editor.heading.h6.tooltip":"\u6807\u9898 6","editor.paragraph.tooltip":"\u6B63\u6587","editor.left.tooltip":"\u5DE6\u5BF9\u9F50","editor.center.tooltip":"\u5C45\u4E2D\u5BF9\u9F50","editor.right.tooltip":"\u53F3\u5BF9\u9F50","editor.justify.tooltip":"\u4E24\u7AEF\u5BF9\u9F50","editor.bulletlist.tooltip":"\u65E0\u5E8F\u5217\u8868","editor.orderedlist.tooltip":"\u6709\u5E8F\u5217\u8868","editor.tasklist.tooltip":"\u4EFB\u52A1\u5217\u8868","editor.indent.tooltip":"\u589E\u52A0\u7F29\u8FDB","editor.outdent.tooltip":"\u51CF\u5C11\u7F29\u8FDB","editor.link.tooltip":"\u7F51\u7EDC\u94FE\u63A5","editor.link.dialog.title":"\u63D2\u5165\u94FE\u63A5","editor.link.dialog.link":"\u94FE\u63A5","editor.link.dialog.button.apply":"\u5E94\u7528","editor.image.tooltip":"\u56FE\u7247","editor.image.float.left.tooltip":"\u5DE6\u6D6E\u52A8","editor.image.float.none.tooltip":"\u65E0\u6D6E\u52A8","editor.image.float.right.tooltip":"\u53F3\u6D6E\u52A8","editor.image.size.small.tooltip":"\u5C0F\u5C3A\u5BF8","editor.image.size.medium.tooltip":"\u4E2D\u7B49\u5C3A\u5BF8","editor.image.size.large.tooltip":"\u94FA\u6EE1","editor.image.remove.tooltip":"\u5220\u9664","editor.image.dialog.title":"\u63D2\u5165\u56FE\u7247","editor.image.dialog.tab.url":"\u7F51\u7EDC\u56FE\u7247","editor.image.dialog.tab.upload":"\u672C\u5730\u56FE\u7247","editor.image.dialog.form.link":"\u94FE\u63A5","editor.image.dialog.form.alt":"\u8BF4\u660E","editor.image.dialog.form.aspectRatio":"\u9501\u5B9A\u539F\u6709\u957F\u5BBD\u6BD4","editor.image.dialog.form.file":"\u6587\u4EF6","editor.image.dialog.button.apply":"\u5E94\u7528","editor.video.tooltip":"\u89C6\u9891","editor.video.dialog.title":"\u63D2\u5165\u89C6\u9891","editor.video.dialog.link":"\u7F51\u7EDC\u94FE\u63A5","editor.video.dialog.button.apply":"\u5E94\u7528","editor.video.remove.tooltip":"\u5220\u9664","editor.blockquote.tooltip":"\u5F15\u7528","editor.horizontalrule.tooltip":"\u5206\u9694\u7EBF","editor.code.tooltip":"\u4EE3\u7801","editor.codeblock.tooltip":"\u4EE3\u7801\u5757","editor.clear.tooltip":"\u6E05\u695A\u683C\u5F0F","editor.undo.tooltip":"\u64A4\u9500","editor.redo.tooltip":"\u91CD\u505A","editor.fullscreen.tooltip.fullscreen":"\u5168\u5C4F","editor.fullscreen.tooltip.exit":"\u9000\u51FA\u5168\u5C4F"},Xx={"editor.words":"WORDS","editor.characters":"CHARACTERS","editor.bold.tooltip":"Bold","editor.italic.tooltip":"Italic","editor.underline.tooltip":"Underline","editor.strike.tooltip":"Strike","editor.color.tooltip":"Color","editor.highlight.tooltip":"Highlight","editor.heading.h1.tooltip":"Heading 1","editor.heading.h2.tooltip":"Heading 2","editor.heading.h3.tooltip":"Heading 3","editor.heading.h4.tooltip":"Heading 4","editor.heading.h5.tooltip":"Heading 5","editor.heading.h6.tooltip":"Heading 6","editor.paragraph.tooltip":"Paragraph","editor.left.tooltip":"Left","editor.center.tooltip":"Center","editor.right.tooltip":"Right","editor.justify.tooltip":"Justify","editor.bulletlist.tooltip":"Bullet List","editor.orderedlist.tooltip":"Ordered List","editor.tasklist.tooltip":"Task List","editor.indent.tooltip":"Indent","editor.outdent.tooltip":"Outdent","editor.link.tooltip":"Link","editor.link.dialog.title":"Insert link","editor.link.dialog.link":"link","editor.link.dialog.button.apply":"apply","editor.image.tooltip":"Image","editor.image.float.left.tooltip":"Float left","editor.image.float.none.tooltip":"Float none","editor.image.float.right.tooltip":"Float right","editor.image.size.small.tooltip":"Small","editor.image.size.medium.tooltip":"Medium","editor.image.size.large.tooltip":"Cover","editor.image.remove.tooltip":"Remove","editor.image.dialog.title":"Insert image","editor.image.dialog.tab.url":"url","editor.image.dialog.tab.upload":"upload","editor.image.dialog.form.link":"Link","editor.image.dialog.form.alt":"Alt","editor.image.dialog.form.aspectRatio":"Lock original aspect ratio","editor.image.dialog.form.file":"File","editor.image.dialog.button.apply":"apply","editor.video.tooltip":"Video","editor.video.dialog.title":"Insert video","editor.video.dialog.link":"link","editor.video.dialog.button.apply":"apply","editor.video.remove.tooltip":"Remove","editor.blockquote.tooltip":"Blockquote","editor.horizontalrule.tooltip":"Horizontal Rule","editor.code.tooltip":"Code","editor.codeblock.tooltip":"Code Block","editor.clear.tooltip":"Clear Format","editor.undo.tooltip":"Undo","editor.redo.tooltip":"Redo","editor.fullscreen.tooltip.fullscreen":"Fullscreen","editor.fullscreen.tooltip.exit":"Fullscreen Exit"},Fr={lang:"en",message:{zhHans:Yx,en:Xx}};class Zx{constructor(){t0(this,"bus"),this.bus=new rt}get lang(){return Fr.lang}set lang(e){if(!this.isLangSupported(e)){_l.warn(`Can't find the current language "${e}", Using language "${Fr.lang}" by default`);return}Fr.lang=e,this.bus.$emit("lang",e)}get message(){return Fr.message}set message(e){Fr.message=e}loadLangMessage(e){return this.message[e]}isLangSupported(e){return Object.keys(this.message).includes(e)}setLang(e){this.lang=e}registerWatchLang(){return{subscribe:r=>{this.bus.$on("lang",i=>r(i))},unsubscribe:()=>{this.bus.$off("lang")}}}setMessage(e,n){this.message[e]=n}buildI18nHandler(e){e||(e=this.lang);const n=this.loadLangMessage(e);return function(i){return n[i]||i}}}const as=new Zx,gi=()=>{const t=se(Fr.lang),e=ue(()=>as.buildI18nHandler(A(t))),n=as.registerWatchLang();return n.subscribe(r=>{t.value=r}),Sl(()=>n.unsubscribe()),{lang:t,t:e}};function Qx(t){const{t:e}=gi();function n(o){!o||t.commands.updateAttributes("image",{display:o})}function r(o){!o||t.commands.updateAttributes("image",{width:o,height:null})}return{extMenu:ue(()=>[{title:A(e)("editor.image.float.left.tooltip"),icon:ax,type:"float-left",action:()=>n("left"),isActive:()=>t.isActive("image",{display:"left"})},{title:A(e)("editor.image.float.none.tooltip"),icon:lx,type:"float-none",action:()=>n("inline"),isActive:()=>t.isActive("image",{display:"inline"})},{title:A(e)("editor.image.float.right.tooltip"),icon:ux,type:"float-right",action:()=>n("right"),isActive:()=>t.isActive("image",{display:"right"})},{title:A(e)("editor.image.size.small.tooltip"),icon:Bx,type:"size-small",action:()=>r(200),isActive:()=>t.isActive("image",{width:200})},{title:A(e)("editor.image.size.medium.tooltip"),icon:Fx,type:"size-medium",action:()=>r(500),isActive:()=>t.isActive("image",{width:500})},{title:A(e)("editor.image.size.large.tooltip"),icon:Mx,type:"size-large",action:()=>r("100%"),isActive:()=>t.isActive("image",{width:"100%"})},{title:A(e)("editor.image.dialog.form.aspectRatio"),icon:YA,type:"image-aspect-ratio",action:()=>{const o=t.isActive("image",{lockAspectRatio:!0});t.commands.updateAttributes("image",{lockAspectRatio:!o,height:o?void 0:null})},isActive:()=>t.isActive("image",{lockAspectRatio:!0})},{title:A(e)("editor.image.remove.tooltip"),icon:uf,type:"image-remove",action:()=>{const{state:o,dispatch:s}=t.view;Za(o,s)}},{title:A(e)("editor.video.remove.tooltip"),icon:uf,type:"video-remove",action:()=>{const{state:o,dispatch:s}=t.view;Za(o,s)}}])}}const ek={image:["float-left","float-none","float-right","divider","image","image-aspect-ratio","image-remove","divider","size-small","size-medium","size-large","divider","left","center","right"],text:["bold","italic","underline","strike","color","highlight","divider","h1","h2","h3","p","divider","left","center","right","divider","link"],video:["video","video-remove"]};var tk={components:{TipTapToolbar:ih,BubbleMenu:jA},props:{editor:Ke().isRequired,dark:ge().def(!1),disabled:ge().def(!1),items:sr().def(()=>[])},setup(t){const{extMenu:e}=Qx(t.editor),n=El({maxWidth:"auto",zIndex:20,appendTo:"parent"}),r=ue(()=>{var s,a;const l=t.editor.state.selection,u=((s=l.node)==null?void 0:s.type.name)==="image",c=((a=l.node)==null?void 0:a.type.name)==="iframe",f=l instanceof W;if(u)return"image";if(c)return"video";if(f)return"text"}),i=ue(()=>r.value?ek[r.value]||[]:[]),o=ue(()=>A(i).map(s=>[...t.items,...A(e)].find(a=>a.type===s)).filter(s=>s));return{tippyOptions:n,nodeType:r,menu:o}}},nk=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BubbleMenu",{attrs:{editor:t.editor,tippyOptions:t.tippyOptions}},[n(pi,{staticClass:"vuetify-pro-tiptap-editor__menu-bubble"},[n(Ts,{staticClass:"d-flex pa-0"},[n("TipTapToolbar",{attrs:{items:t.menu,dark:t.dark,disabled:t.disabled,rounded:""}})],1)],1)],1)},rk=[];const df={};var ik=Mt(tk,nk,rk,!1,ok,null,null,null);function ok(t){for(let e in df)this[e]=df[e]}var sk=function(){return ik.exports}();const ak=/^\s*>\s$/,lk=Te.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Us({find:ak,type:this.type})]}}),uk=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,ck=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,fk=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,dk=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,pk=Ot.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[cr({find:uk,type:this.type}),cr({find:fk,type:this.type})]},addPasteRules(){return[Ln({find:ck,type:this.type}),Ln({find:dk,type:this.type})]}}),hk=/^\s*([-+*])\s$/,mk=Te.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Us({find:hk,type:this.type})]}}),gk=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,vk=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,yk=Ot.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[cr({find:gk,type:this.type})]},addPasteRules(){return[Ln({find:vk,type:this.type})]}}),bk=/^```([a-z]+)?[\s\n]$/,Dk=/^~~~([a-z]+)?[\s\n]$/,Ck=Te.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",ve(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[pl({find:bk,type:this.type,getAttributes:t=>({language:t[1]})}),pl({find:Dk,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new we({key:new Qe("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s}=t.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(W.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),Ak=Te.create({name:"doc",topNode:!0,content:"block+"});function xk(t={}){return new we({view(e){return new kk(e,t)}})}class kk{constructor(e,n){this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let i=o=>{this[r](o)};return e.dom.addEventListener(r,i),{name:r,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n;if(!e.parent.inlineContent){let s=e.nodeBefore,a=e.nodeAfter;if(s||a){let l=this.editorView.nodeDOM(this.cursorPos-(s?s.nodeSize:0)).getBoundingClientRect(),u=s?l.bottom:l.top;s&&a&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:l.left,right:l.right,top:u-this.width/2,bottom:u+this.width/2}}}if(!n){let s=this.editorView.coordsAtPos(this.cursorPos);n={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);let i,o;if(!r||r==document.body&&getComputedStyle(r).position=="static")i=-pageXOffset,o=-pageYOffset;else{let s=r.getBoundingClientRect();i=s.left-r.scrollLeft,o=s.top-r.scrollTop}this.element.style.left=n.left-i+"px",this.element.style.top=n.top-o+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(s=Vd(this.editorView.state.doc,s,this.editorView.dragging.slice),s==null))return this.setCursor(null);this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const wk=ke.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:null}},addProseMirrorPlugins(){return[xk(this.options)]}});class me extends q{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return me.valid(r)?new me(r):q.near(r)}content(){return L.empty}eq(e){return e instanceof me&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new me(e.resolve(n.pos))}getBookmark(){return new ou(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Ek(e)||!Sk(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&me.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(me.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!z.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(me.valid(a))return a}return null}}}me.prototype.visible=!1;me.findFrom=me.findGapCursorFrom;q.jsonID("gapcursor",me);class ou{constructor(e){this.pos=e}map(e){return new ou(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return me.valid(n)?new me(n):q.near(n)}}function Ek(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Sk(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function _k(){return new we({props:{decorations:Fk,createSelectionBetween(t,e,n){return e.pos==n.pos&&me.valid(n)?new me(n):null},handleClick:Tk,handleKeyDown:Ok,handleDOMEvents:{beforeinput:Mk}}})}const Ok=_p({ArrowLeft:ko("horiz",-1),ArrowRight:ko("horiz",1),ArrowUp:ko("vert",-1),ArrowDown:ko("vert",1)});function ko(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof W){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=me.findGapCursorFrom(a,e,l);return u?(i&&i(r.tr.setSelection(new me(u))),!0):!1}}function Tk(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!me.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&z.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new me(r))),!0)}function Mk(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof me))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=_.empty;for(let s=r.length-1;s>=0;s--)i=_.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new L(i,0,0));return o.setSelection(W.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function Fk(t){if(!(t.selection instanceof me))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",De.create(t.doc,[Je.widget(t.selection.head,e,{key:"gapcursor"})])}const Bk=ke.create({name:"gapCursor",addProseMirrorPlugins(){return[_k()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=U(I(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),Lk=ke.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;return((t==null?void 0:t.mode)||this.options.mode)==="textSize"?e.textBetween(0,e.content.size,void 0," ").length:e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;return e.textBetween(0,e.content.size," "," ").split(" ").filter(i=>i!=="").length}},addProseMirrorPlugins(){return[new we({key:new Qe("characterCount"),filterTransaction:(t,e)=>{const n=this.options.limit;if(!t.docChanged||n===0||n===null||n===void 0)return!0;const r=this.storage.characters({node:e.doc}),i=this.storage.characters({node:t.doc});if(i<=n||r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r||!t.getMeta("paste"))return!1;const s=t.selection.$head.pos,a=i-n,l=s-a,u=s;return t.deleteRange(l,u),!(this.storage.characters({node:t.doc})>n)}})]}}),Nk=Te.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",ve(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&s){const f=l.filter(d=>a.includes(d.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ik=Te.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,ve(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>k(k({},t),{[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>pl({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var ls=200,Ne=function(){};Ne.prototype.append=function(e){return e.length?(e=Ne.from(e),!this.length&&e||e.length<ls&&this.leafAppend(e)||this.length<ls&&e.leafPrepend(this)||this.appendInner(e)):this};Ne.prototype.prepend=function(e){return e.length?Ne.from(e).append(this):this};Ne.prototype.appendInner=function(e){return new Vk(this,e)};Ne.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ne.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ne.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ne.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ne.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Ne.from=function(e){return e instanceof Ne?e:e&&e.length?new oh(e):Ne.empty};var oh=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ls)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ls)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ne);Ne.empty=new oh([]);var Vk=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ne),sh=Ne;const Pk=500;class xt{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,u=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),o=i.maps.length),o--,c.push(f);return}if(i){c.push(new Bt(f.map));let p=f.step.map(i.slice(o)),h;p&&s.maybeStep(p).doc&&(h=s.mapping.maps[s.mapping.maps.length-1],u.push(new Bt(h,void 0,void 0,u.length+c.length))),o--,h&&i.appendMap(h,o)}else s.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(o)):f.selection,l=new xt(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new Bt(e.mapping.maps[c],f,n),p;(p=l&&l.merge(d))&&(d=p,c?o.pop():a=a.slice(0,a.length-1)),o.push(d),n&&(s++,n=void 0),i||(l=d)}let u=s-r.depth;return u>Hk&&(a=Rk(a,u),s-=u),new xt(a.append(o),s)}remapping(e,n){let r=new qr;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new xt(this.items.append(e.map(n=>new Bt(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let p=o.getMirror(--l);if(p==null)return;s=Math.min(s,p);let h=o.maps[p];if(d.step){let m=e.steps[p].invert(e.docs[p]),y=d.selection&&d.selection.map(o.slice(l+1,p));y&&a++,r.push(new Bt(h,m,y))}else r.push(new Bt(h))},i);let u=[];for(let d=n;d<s;d++)u.push(new Bt(o.maps[d]));let c=this.items.slice(0,i).append(u).append(r),f=new xt(c,a);return f.emptyItemCount()>Pk&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let c=s.selection&&s.selection.map(n.slice(r));c&&o++;let f=new Bt(u.invert(),l,c),d,p=i.length-1;(d=i.length&&i[p].merge(f))?i[p]=d:i.push(f)}}else s.map&&r--},this.items.length,0),new xt(sh.from(i.reverse()),o)}}xt.empty=new xt(sh.empty,0);function Rk(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Bt{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Bt(n.getMap().invert(),n,this.selection)}}}class yn{constructor(e,n,r,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i}}const Hk=20;function $k(t,e,n,r){let i=n.getMeta(Tn),o;if(i)return i.historyState;n.getMeta(jk)&&(t=new yn(t.done,t.undone,null,0));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Tn))return s.getMeta(Tn).redo?new yn(t.done.addTransform(n,void 0,r,No(e)),t.undone,pf(n.mapping.maps[n.steps.length-1]),t.prevTime):new yn(t.done,t.undone.addTransform(n,void 0,r,No(e)),null,t.prevTime);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=t.prevTime==0||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!zk(n,t.prevRanges)),l=s?Pa(t.prevRanges,n.mapping):pf(n.mapping.maps[n.steps.length-1]);return new yn(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,No(e)),xt.empty,l,n.time)}else return(o=n.getMeta("rebased"))?new yn(t.done.rebased(n,o),t.undone.rebased(n,o),Pa(t.prevRanges,n.mapping),t.prevTime):new yn(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Pa(t.prevRanges,n.mapping),t.prevTime)}function zk(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function pf(t){let e=[];return t.forEach((n,r,i,o)=>e.push(i,o)),e}function Pa(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function ah(t,e,n,r){let i=No(e),o=Tn.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),u=new yn(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(Tn,{redo:r,historyState:u}).scrollIntoView())}let Ra=!1,hf=null;function No(t){let e=t.plugins;if(hf!=e){Ra=!1,hf=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ra=!0;break}}return Ra}const Tn=new Qe("history"),jk=new Qe("closeHistory");function Wk(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new we({key:Tn,state:{init(){return new yn(xt.empty,xt.empty,null,0)},apply(e,n,r){return $k(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?lh:r=="historyRedo"?uh:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}const lh=(t,e)=>{let n=Tn.getState(t);return!n||n.done.eventCount==0?!1:(e&&ah(n,t,e,!1),!0)},uh=(t,e)=>{let n=Tn.getState(t);return!n||n.undone.eventCount==0?!1:(e&&ah(n,t,e,!0),!0)},qk=ke.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>lh(t,e),redo:()=>({state:t,dispatch:e})=>uh(t,e)}},addProseMirrorPlugins(){return[Wk(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),Uk=Te.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",ve(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command(({tr:e,dispatch:n})=>{var r;if(n){const{$to:i}=e.selection,o=i.end();if(i.nodeAfter)e.setSelection(W.create(e.doc,i.pos));else{const s=(r=i.parent.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();s&&(e.insert(o,s),e.setSelection(W.create(e.doc,o)))}e.scrollIntoView()}return!0}).run()}},addInputRules(){return[Rp({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Kk=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Jk=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Gk=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,Yk=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Xk=Ot.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[cr({find:Kk,type:this.type}),cr({find:Gk,type:this.type})]},addPasteRules(){return[Ln({find:Jk,type:this.type}),Ln({find:Yk,type:this.type})]}}),Zk=Te.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",ve(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Qk=/^(\d+)\.\s$/,ew=Te.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const e=t,{start:n}=e,r=e0(e,["start"]);return n===1?["ol",ve(this.options.HTMLAttributes,r),0]:["ol",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Us({find:Qk,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]})]}}),tw=Te.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),nw=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,rw=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,iw=Ot.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[cr({find:nw,type:this.type})]},addPasteRules(){return[Ln({find:rw,type:this.type})]}}),ow=Te.create({name:"text",group:"inline"}),sw=ke.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new we({props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!!n)return t.descendants((o,s)=>{const a=r>=s&&r<=s+o.nodeSize,l=!o.isLeaf&&!o.childCount;if((a||!this.options.showOnlyCurrent)&&l){const u=[this.options.emptyNodeClass];this.editor.isEmpty&&u.push(this.options.emptyEditorClass);const c=Je.node(s,s+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:s,hasAnchor:a}):this.options.placeholder});i.push(c)}return this.options.includeChildren}),De.create(t,i)}}})]}}),aw=ke.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>t.style.textAlign||this.options.defaultAlignment,renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.every(n=>e.updateAttributes(n,{textAlign:t})):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.every(e=>t.resetAttributes(e,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),lw=ke.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new we({key:new Qe("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return De.create(t,[]);let s=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;s+=1});let a=0;return t.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&s-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";o.push(Je.node(u,u+l.nodeSize,{class:this.options.className}))}),De.create(t,o)}}})]}}),uw=Ot.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Kl(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),cw=ke.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>t.style.color.replace(/['"]+/g,""),renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),fw=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,dw=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,pw=Ot.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[cr({find:fw,type:this.type})]},addPasteRules(){return[Ln({find:dw,type:this.type})]}});function su(t){this.j={},this.jr=[],this.jd=null,this.t=t}su.prototype={accepts:function(){return!!this.t},tt:function(e,n){if(n&&n.j)return this.j[e]=n,n;var r=n,i=this.j[e];if(i)return r&&(i.t=r),i;i=oe();var o=us(this,e);return o?(Object.assign(i.j,o.j),i.jr.append(o.jr),i.jr=o.jd,i.t=r||o.t):i.t=r,this.j[e]=i,i}};var oe=function(){return new su},H=function(e){return new su(e)},T=function(e,n,r){e.j[n]||(e.j[n]=r)},Se=function(e,n,r){e.jr.push([n,r])},us=function(e,n){var r=e.j[n];if(r)return r;for(var i=0;i<e.jr.length;i++){var o=e.jr[i][0],s=e.jr[i][1];if(o.test(n))return s}return e.jd},J=function(e,n,r){for(var i=0;i<n.length;i++)T(e,n[i],r)},hw=function(e,n){for(var r=0;r<n.length;r++){var i=n[r][0],o=n[r][1];T(e,i,o)}},Un=function(e,n,r,i){for(var o=0,s=n.length,a;o<s&&(a=e.j[n[o]]);)e=a,o++;if(o>=s)return[];for(;o<s-1;)a=i(),T(e,n[o],a),e=a,o++;T(e,n[s-1],r)},bt="DOMAIN",on="LOCALHOST",Lt="TLD",pt="NUM",ui="PROTOCOL",au="MAILTO",ch="WS",lu="NL",Rr="OPENBRACE",$i="OPENBRACKET",zi="OPENANGLEBRACKET",ji="OPENPAREN",Gn="CLOSEBRACE",Hr="CLOSEBRACKET",$r="CLOSEANGLEBRACKET",zr="CLOSEPAREN",cs="AMPERSAND",fs="APOSTROPHE",ds="ASTERISK",jr="AT",ps="BACKSLASH",hs="BACKTICK",ms="CARET",Wi="COLON",uu="COMMA",gs="DOLLAR",bn="DOT",vs="EQUALS",cu="EXCLAMATION",ys="HYPHEN",bs="PERCENT",Ds="PIPE",Cs="PLUS",As="POUND",xs="QUERY",fu="QUOTE",du="SEMI",sn="SLASH",ks="TILDE",ws="UNDERSCORE",Es="SYM",mw=Object.freeze({__proto__:null,DOMAIN:bt,LOCALHOST:on,TLD:Lt,NUM:pt,PROTOCOL:ui,MAILTO:au,WS:ch,NL:lu,OPENBRACE:Rr,OPENBRACKET:$i,OPENANGLEBRACKET:zi,OPENPAREN:ji,CLOSEBRACE:Gn,CLOSEBRACKET:Hr,CLOSEANGLEBRACKET:$r,CLOSEPAREN:zr,AMPERSAND:cs,APOSTROPHE:fs,ASTERISK:ds,AT:jr,BACKSLASH:ps,BACKTICK:hs,CARET:ms,COLON:Wi,COMMA:uu,DOLLAR:gs,DOT:bn,EQUALS:vs,EXCLAMATION:cu,HYPHEN:ys,PERCENT:bs,PIPE:Ds,PLUS:Cs,POUND:As,QUERY:xs,QUOTE:fu,SEMI:du,SLASH:sn,TILDE:ks,UNDERSCORE:ws,SYM:Es}),mf="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),Ai=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,xi=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,ki=/\uFE0F/,wi=/\d/,gf=/\s/;function gw(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=oe(),n=H(pt),r=H(bt),i=oe(),o=H(ch),s=[[wi,r],[Ai,r],[xi,r],[ki,r]],a=function(){var v=H(bt);return v.j={"-":i},v.jr=[].concat(s),v},l=function(v){var F=a();return F.t=v,F};hw(e,[["'",H(fs)],["{",H(Rr)],["[",H($i)],["<",H(zi)],["(",H(ji)],["}",H(Gn)],["]",H(Hr)],[">",H($r)],[")",H(zr)],["&",H(cs)],["*",H(ds)],["@",H(jr)],["`",H(hs)],["^",H(ms)],[":",H(Wi)],[",",H(uu)],["$",H(gs)],[".",H(bn)],["=",H(vs)],["!",H(cu)],["-",H(ys)],["%",H(bs)],["|",H(Ds)],["+",H(Cs)],["#",H(As)],["?",H(xs)],['"',H(fu)],["/",H(sn)],[";",H(du)],["~",H(ks)],["_",H(ws)],["\\",H(ps)]]),T(e,`
`,H(lu)),Se(e,gf,o),T(o,`
`,oe()),Se(o,gf,o);for(var u=0;u<mf.length;u++)Un(e,mf[u],l(Lt),a);var c=a(),f=a(),d=a(),p=a();Un(e,"file",c,a),Un(e,"ftp",f,a),Un(e,"http",d,a),Un(e,"mailto",p,a);var h=a(),m=H(ui),y=H(au);T(f,"s",h),T(f,":",m),T(d,"s",h),T(d,":",m),T(c,":",m),T(h,":",m),T(p,":",y);for(var D=a(),w=0;w<t.length;w++)Un(e,t[w],D,a);return T(D,":",m),Un(e,"localhost",l(on),a),Se(e,wi,n),Se(e,Ai,r),Se(e,xi,r),Se(e,ki,r),Se(n,wi,n),Se(n,Ai,r),Se(n,xi,r),Se(n,ki,r),T(n,"-",i),T(r,"-",i),T(i,"-",i),Se(r,wi,r),Se(r,Ai,r),Se(r,xi,r),Se(r,ki,r),Se(i,wi,r),Se(i,Ai,r),Se(i,xi,r),Se(i,ki,r),e.jd=H(Es),e}function vw(t,e){for(var n=yw(e.replace(/[A-Z]/g,function(p){return p.toLowerCase()})),r=n.length,i=[],o=0,s=0;s<r;){for(var a=t,l=null,u=0,c=null,f=-1,d=-1;s<r&&(l=us(a,n[s]));)a=l,a.accepts()?(f=0,d=0,c=a):f>=0&&(f+=n[s].length,d++),u+=n[s].length,o+=n[s].length,s++;o-=f,s-=d,u-=f,i.push({t:c.t,v:e.substr(o-u,u),s:o-u,e:o})}return i}function yw(t){for(var e=[],n=t.length,r=0;r<n;){var i=t.charCodeAt(r),o=void 0,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}var fh={defaultProtocol:"http",events:null,format:vf,formatHref:vf,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function vf(t){return t}function bw(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Object.create(t.prototype);for(var i in n)r[i]=n[i];return r.constructor=e,e.prototype=r,e}function Ss(){}Ss.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fh.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function hr(t,e){function n(r,i){this.t=t,this.v=r,this.tk=i}return bw(Ss,n,e),n}var dh=hr("email",{isLink:!0}),vl=hr("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),yl=hr("text"),ph=hr("nl"),vn=hr("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fh.defaultProtocol,n=this.tk,r=!1,i=!1,o=[],s=0;n[s].t===ui;)r=!0,o.push(n[s].v),s++;for(;n[s].t===sn;)i=!0,o.push(n[s].v),s++;for(;s<n.length;s++)o.push(n[s].v);return o=o.join(""),r||i||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===ui}}),Dw=Object.freeze({__proto__:null,MultiToken:Ss,Base:Ss,createTokenClass:hr,MailtoEmail:dh,Email:vl,Text:yl,Nl:ph,Url:vn});function Cw(){var t=oe(),e=oe(),n=oe(),r=oe(),i=oe(),o=oe(),s=oe(),a=H(vn),l=oe(),u=H(vn),c=H(vn),f=oe(),d=oe(),p=oe(),h=oe(),m=oe(),y=H(vn),D=H(vn),w=H(vn),M=H(vn),v=oe(),F=oe(),E=oe(),O=oe(),S=oe(),B=oe(),R=H(vl),K=oe(),$=H(vl),j=H(dh),te=oe(),he=oe(),le=oe(),ye=oe(),be=H(ph);T(t,lu,be),T(t,ui,e),T(t,au,n),T(e,sn,r),T(r,sn,i),T(t,Lt,o),T(t,bt,o),T(t,on,a),T(t,pt,o),T(i,Lt,c),T(i,bt,c),T(i,pt,c),T(i,on,c),T(o,bn,s),T(S,bn,B),T(s,Lt,a),T(s,bt,o),T(s,pt,o),T(s,on,o),T(B,Lt,R),T(B,bt,S),T(B,pt,S),T(B,on,S),T(a,bn,s),T(R,bn,B),T(a,Wi,l),T(a,sn,c),T(l,pt,u),T(u,sn,c),T(R,Wi,K),T(K,pt,$);var ne=[cs,ds,jr,ps,hs,ms,gs,bt,vs,ys,on,pt,bs,Ds,Cs,As,ui,sn,Es,ks,Lt,ws],re=[fs,$r,Gn,Hr,zr,Wi,uu,bn,cu,zi,Rr,$i,ji,xs,fu,du];T(c,Rr,d),T(c,$i,p),T(c,zi,h),T(c,ji,m),T(f,Rr,d),T(f,$i,p),T(f,zi,h),T(f,ji,m),T(d,Gn,c),T(p,Hr,c),T(h,$r,c),T(m,zr,c),T(y,Gn,c),T(D,Hr,c),T(w,$r,c),T(M,zr,c),T(v,Gn,c),T(F,Hr,c),T(E,$r,c),T(O,zr,c),J(d,ne,y),J(p,ne,D),J(h,ne,w),J(m,ne,M),J(d,re,v),J(p,re,F),J(h,re,E),J(m,re,O),J(y,ne,y),J(D,ne,D),J(w,ne,w),J(M,ne,M),J(y,re,y),J(D,re,D),J(w,re,w),J(M,re,M),J(v,ne,y),J(F,ne,D),J(E,ne,w),J(O,ne,M),J(v,re,v),J(F,re,F),J(E,re,E),J(O,re,O),J(c,ne,c),J(f,ne,c),J(c,re,f),J(f,re,f),T(n,Lt,j),T(n,bt,j),T(n,pt,j),T(n,on,j),J(j,ne,j),J(j,re,te),J(te,ne,j),J(te,re,te);var Re=[cs,fs,ds,ps,hs,ms,Gn,gs,bt,vs,ys,pt,Rr,bs,Ds,Cs,As,xs,sn,Es,ks,Lt,ws];return J(o,Re,he),T(o,jr,le),J(a,Re,he),T(a,jr,le),J(s,Re,he),J(he,Re,he),T(he,jr,le),T(he,bn,ye),J(ye,Re,he),T(le,Lt,S),T(le,bt,S),T(le,pt,S),T(le,on,R),t}function Aw(t,e,n){for(var r=n.length,i=0,o=[],s=[];i<r;){for(var a=t,l=null,u=null,c=0,f=null,d=-1;i<r&&!(l=us(a,n[i].t));)s.push(n[i++]);for(;i<r&&(u=l||us(a,n[i].t));)l=null,a=u,a.accepts()?(d=0,f=a):d>=0&&d++,i++,c++;if(d<0)for(var p=i-c;p<i;p++)s.push(n[p]);else{s.length>0&&(o.push(Ha(yl,e,s)),s=[]),i-=d,c-=d;var h=f.t,m=n.slice(i-c,i);o.push(Ha(h,e,m))}}return s.length>0&&o.push(Ha(yl,e,s)),o}function Ha(t,e,n){var r=n[0].s,i=n[n.length-1].e,o=e.substr(r,i-r);return new t(o,n)}var Dt={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function xw(){Dt.scanner={start:gw(Dt.customProtocols),tokens:mw},Dt.parser={start:Cw(),tokens:Dw};for(var t={createTokenClass:hr},e=0;e<Dt.pluginQueue.length;e++)Dt.pluginQueue[e][1]({scanner:Dt.scanner,parser:Dt.parser,utils:t});Dt.initialized=!0}function hh(t){return Dt.initialized||xw(),Aw(Dt.parser.start,t,vw(Dt.scanner.start,t))}function pu(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=hh(t),r=[],i=0;i<n.length;i++){var o=n[i];o.isLink&&(!e||o.t===e)&&r.push(o.toObject())}return r}function yf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=hh(t);return n.length===1&&n[0].isLink&&(!e||n[0].t===e)}function kw(t){return new we({key:new Qe("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=e.some(c=>c.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,a=sC(n.doc,e),{mapping:l}=a;if(cC(a).forEach(({oldRange:c,newRange:f})=>{rs(c.from,c.to,n.doc).filter(d=>d.mark.type===t.type).forEach(d=>{const p=l.map(d.from),h=l.map(d.to),m=rs(p,h,r.doc).filter(F=>F.mark.type===t.type);if(!m.length)return;const y=m[0],D=n.doc.textBetween(d.from,d.to,void 0," "),w=r.doc.textBetween(y.from,y.to,void 0," "),M=yf(D),v=yf(w);M&&!v&&s.removeMark(y.from,y.to,t.type)}),aC(r.doc,f,d=>d.isTextblock).forEach(d=>{const p=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");pu(p).filter(h=>h.isLink).filter(h=>t.validate?t.validate(h.value):!0).map(h=>xe(k({},h),{from:d.pos+h.start+1,to:d.pos+h.end+1})).filter(h=>{const m=f.from>=h.from&&f.from<=h.to,y=f.to>=h.from&&f.to<=h.to;return m||y}).forEach(h=>{s.addMark(h.from,h.to,t.type.create({href:h.href}))})})}),!!s.steps.length)return s}})}function ww(t){return new we({key:new Qe("handleClickLink"),props:{handleClick:(e,n,r)=>{var i;const o=Vp(e.state,t.type.name);return((i=r.target)===null||i===void 0?void 0:i.closest("a"))&&o.href?(window.open(o.href,o.target),!0):!1}}})}function Ew(t){return new we({key:new Qe("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let a="";r.content.forEach(u=>{a+=u.textContent});const l=pu(a).find(u=>u.isLink&&u.value===a);return!a||!l?!1:(t.editor.commands.setMark(t.type,{href:l.href}),!0)}}})}const Sw=Ot.create({name:"link",priority:1e3,keepOnSplit:!1,inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:t}){return["a",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ln({find:t=>pu(t).filter(e=>this.options.validate?this.options.validate(e.value):!0).filter(e=>e.isLink).map(e=>({text:e.value,index:e.start,data:e})),type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(kw({type:this.type,validate:this.options.validate})),this.options.openOnClick&&t.push(ww({type:this.type})),this.options.linkOnPaste&&t.push(Ew({editor:this.editor,type:this.type})),t}}),_w=Te.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",ve(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),Ow=/^\s*(\[([( |x])?\])\s$/,Tw=Te.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{}}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>t.getAttribute("data-checked")==="true",renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",ve(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?xe(k({},t),{Tab:()=>this.editor.commands.sinkListItem(this.name)}):t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("change",u=>{if(!r.isEditable){a.checked=!a.checked;return}const{checked:c}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const d=n(),p=f.doc.nodeAt(d);return f.setNodeMarkup(d,void 0,xe(k({},p==null?void 0:p.attrs),{checked:c})),!0}).run()}),Object.entries(this.options.HTMLAttributes).forEach(([u,c])=>{i.setAttribute(u,c)}),i.dataset.checked=t.attrs.checked,t.attrs.checked&&a.setAttribute("checked","checked"),o.append(a,s),i.append(o,l),Object.entries(e).forEach(([u,c])=>{i.setAttribute(u,c)}),{dom:i,contentDOM:l,update:u=>u.type!==this.type?!1:(i.dataset.checked=u.attrs.checked,u.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[Us({find:Ow,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Mw=Ot.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",ve(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Fw(t){return t=t.replace("https://youtu.be/","https://www.youtube.com/watch?v=").replace("watch?v=","embed/"),t=t.replace("https://vimeo.com/","https://player.vimeo.com/video/"),/^https?:\/\/www.bilibili.com\/video\/.*/i.test(t)&&(t=t.replace(/\?.*$/i,"").replace("https://www.bilibili.com/video/","https://player.bilibili.com/player.html?bvid=")),t.includes("drive.google.com")&&(t=t.replace("/view","/preview")),t}var Bw=Te.create({name:"iframe",group:"block",atom:!0,addOptions(){return{allowFullscreen:!0,frameborder:!1,HTMLAttributes:{class:"iframe-wrapper",style:"display: flex;justify-content: center;"}}},addAttributes(){return{src:{default:null,renderHTML:({src:t})=>({src:t?Fw(t):null})},width:{default:"100%"},height:{default:"100%"},frameborder:{default:this.options.frameborder?1:0,parseHTML:()=>this.options.frameborder?1:0},allowfullscreen:{default:this.options.allowFullscreen,parseHTML:()=>this.options.allowFullscreen}}},parseHTML(){return[{tag:"iframe"}]},renderHTML({HTMLAttributes:t}){const o=["div",{style:"position: relative;overflow: hidden;display: flex;flex: 1;max-width: 640px;"},["div",{style:`flex: 1;padding-bottom: ${56.25}%;`}],["iframe",t]];return["div",this.options.HTMLAttributes,o]},addCommands(){return{setIframe:t=>({tr:e,dispatch:n})=>{const{selection:r}=e,i=this.type.create(t);return n&&e.replaceRangeWith(r.from,r.to,i),!0}}}});const Lw=/(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Nw=Te.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",ve(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Rp({find:Lw,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),Iw={editor:Ke().isRequired,node:Ke().isRequired,decorations:Ke().isRequired,selected:ge().isRequired,extension:Ke().isRequired,getPos:En().isRequired,updateAttributes:En().isRequired,deleteNode:En().isRequired};function Vw(t,e,n){return t<e?e:t>n?n:t}const wo={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"},bf=20,Df=1e5,Cf=16;var Pw={components:{NodeViewWrapper:GA},props:xe(k({},Iw),{selected:ge().isRequired}),setup(t){const e=se({width:Df,height:Df}),n=se({width:0,height:0}),r=se([wo.TOP_LEFT,wo.TOP_RIGHT,wo.BOTTOM_LEFT,wo.BOTTOM_RIGHT]),i=se(!1),o=se({x:0,y:0,w:0,h:0,dir:""}),s=ue(()=>t.node.attrs.src||void 0),a=ue(()=>t.node.attrs.alt||void 0),l=ue(()=>t.node.attrs.width||void 0),u=ue(()=>t.node.attrs.height||void 0),c=ue(()=>t.node.attrs.display||void 0),f=ue(()=>{var O;return(O=t.node.attrs.lockAspectRatio)!=null?O:!0}),d=ue(()=>typeof A(c)=="string"?["image-view",`image-view--${A(c)}`]:["image-view"]),p=ue(()=>({width:A(l)==="100%"?A(l):void 0}));function h(O){n.value={width:O.target.width,height:O.target.height}}function m(){const{editor:O,getPos:S}=t;O.commands.setNodeSelection(S())}const y=Lr(function(){const{editor:O}=t,{width:S}=getComputedStyle(O.view.dom);e.value.width=parseInt(S,10)},Cf);function D(O,S){O.preventDefault(),O.stopPropagation(),o.value.x=O.clientX,o.value.y=O.clientY;const B=A(n).width,R=A(n).height,K=B/R;let $=Number(t.node.attrs.width),j=Number(t.node.attrs.height);const te=A(e).width;$&&!j?($=$>te?te:$,j=Math.round($/K)):j&&!$?($=Math.round(j*K),$=$>te?te:$):!$&&!j?($=B>te?te:B,j=Math.round($/K)):$=$>te?te:$,o.value.w=$,o.value.h=j,o.value.dir=S,i.value=!0,v()}const w=Lr(function(O){if(O.preventDefault(),O.stopPropagation(),!A(i))return;const{x:S,y:B,w:R,h:K,dir:$}=A(o),j=(O.clientX-S)*(/l/.test($)?-1:1),te=(O.clientY-B)*(/t/.test($)?-1:1);t.updateAttributes({width:Vw(R+j,bf,A(e).width),height:A(f)?null:Math.max(K+te,bf)})},Cf);function M(O){O.preventDefault(),O.stopPropagation(),A(i)&&(i.value=!1,o.value={x:0,y:0,w:0,h:0,dir:""},F(),m())}function v(){document==null||document.addEventListener("mousemove",w,!0),document==null||document.addEventListener("mouseup",M,!0)}function F(){document==null||document.removeEventListener("mousemove",w,!0),document==null||document.removeEventListener("mouseup",M,!0)}const E=new ResizeObserver(()=>y());return sd(()=>{A(E).observe(t.editor.view.dom)}),Sl(()=>{A(E).disconnect()}),{imageViewClass:d,imageMaxStyle:p,resizing:i,src:s,alt:a,width:l,height:u,resizeDirections:r,selectImage:m,onMouseDown:D,onImageLoad:h}}},Rw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("node-view-wrapper",{class:t.imageViewClass,style:t.imageMaxStyle,attrs:{as:"div"}},[n("div",{staticClass:"image-view__body",class:{"image-view__body--focused":t.selected,"image-view__body--resizing":t.resizing},style:t.imageMaxStyle,attrs:{draggable:"true","data-drag-handle":""}},[n("img",{staticClass:"image-view__body__image",attrs:{src:t.src,alt:t.alt,width:t.width,height:t.height},on:{load:t.onImageLoad,click:t.selectImage}}),t.editor.view.editable?n("div",{directives:[{name:"show",rawName:"v-show",value:t.selected||t.resizing,expression:"selected || resizing"}],staticClass:"image-resizer"},t._l(t.resizeDirections,function(r){return n("span",{key:r,staticClass:"image-resizer__handler",class:`image-resizer__handler--${r}`,on:{mousedown:function(i){return t.onMouseDown(i,r)}}})}),0):t._e()])])},Hw=[];const Af={};var $w=Mt(Pw,Rw,Hw,!1,zw,null,null,null);function zw(t){for(let e in Af)this[e]=Af[e]}var jw=function(){return $w.exports}(),Ww=Nw.extend({addStorage(){return{upload:this.options.upload,imageTabs:this.options.imageTabs,hiddenTabs:this.options.hiddenTabs}},addAttributes(){return{src:{default:null},alt:{default:null},lockAspectRatio:{default:!0},width:{default:"100%"},height:{default:null},display:{default:"inline",renderHTML:({display:t})=>t?{"data-display":t}:{},parseHTML:t=>t.getAttribute("data-display")||"inline"}}},addNodeView(){return JA(jw)}}),qw=ke.create({name:"tiptap-kit",addExtensions(){const t=[];return this.options.placeholder!==!1&&t.push(sw.configure(this.options.placeholder)),this.options.textAlign!==!1&&t.push(aw.configure(this.options.textAlign)),this.options.focus!==!1&&t.push(lw.configure(this.options.focus)),this.options.color!==!1&&t.push(cw.configure(this.options.color)),this.options.highlight!==!1&&t.push(pw.configure(this.options.highlight)),this.options.image!==!1&&t.push(Ww.configure(this.options.image)),this.options.link!==!1&&t.push(Sw.configure(this.options.link)),this.options.taskList!==!1&&t.push(_w.configure(this.options.taskList)),this.options.taskItem!==!1&&t.push(Tw.configure(this.options.taskItem)),this.options.textStyle!==!1&&t.push(uw.configure(this.options.textStyle)),this.options.underline!==!1&&t.push(Mw.configure(this.options.underline)),this.options.video!==!1&&t.push(Bw.configure(this.options.video)),this.options.blockquote!==!1&&t.push(lk.configure(this.options.blockquote)),this.options.bold!==!1&&t.push(pk.configure(this.options.bold)),this.options.bulletList!==!1&&t.push(mk.configure(this.options.bulletList)),this.options.code!==!1&&t.push(yk.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(Ck.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(Ak.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(wk.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(Bk.configure(this.options.gapcursor)),this.options.characterCount!==!1&&t.push(Lk.configure(this.options.characterCount)),this.options.hardBreak!==!1&&t.push(Nk.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(Ik.configure(this.options.heading)),this.options.history!==!1&&t.push(qk.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(Uk.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(Xk.configure(this.options.italic)),this.options.listItem!==!1&&t.push(Zk.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(ew.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(tw.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(iw.configure(this.options.strike)),this.options.text!==!1&&t.push(ow.configure(this.options.text)),t}});const Uw=["bold","italic","underline","strike","color","highlight","|","h1","h2","h3","h4","h5","h6","p","|","left","center","right","justify","|","bulletList","orderedList","taskList","indent","outdent","|","link","image","video","|","blockquote","rule","code","codeBlock","|","clear","fullscreen","undo","redo"];var Kw={props:{value:Ke().def({}),t:En().isRequired},setup(t,{emit:e}){const n=ue({get:()=>t.value,set:r=>e("input",r)});return{mdiLinkVariant:Gs,mdiText:iu,form:n}}},Jw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(zf,[n(Jr,{attrs:{label:t.t("editor.image.dialog.form.link"),autofocus:"","prepend-icon":t.mdiLinkVariant},model:{value:t.form.src,callback:function(r){t.$set(t.form,"src",r)},expression:"form.src"}}),n(Jr,{attrs:{label:t.t("editor.image.dialog.form.alt"),"prepend-icon":t.mdiText},model:{value:t.form.alt,callback:function(r){t.$set(t.form,"alt",r)},expression:"form.alt"}}),n(jf,{attrs:{label:t.t("editor.image.dialog.form.aspectRatio")},model:{value:t.form.lockAspectRatio,callback:function(r){t.$set(t.form,"lockAspectRatio",r)},expression:"form.lockAspectRatio"}})],1)},Gw=[];const xf={};var Yw=Mt(Kw,Jw,Gw,!1,Xw,null,null,null);function Xw(t){for(let e in xf)this[e]=xf[e]}var kf=function(){return Yw.exports}(),Zw={props:{value:Ke().def({}),upload:En(),t:En().isRequired},setup(t,{emit:e}){const n=se(!1),r=ue({get:()=>t.value,set:o=>e("input",o)});async function i(o){var s;if(!!o)try{n.value=!0;const a=await((s=t.upload)==null?void 0:s.call(t,o));if(!a)return;r.value=xe(k({},A(r)),{src:a})}finally{n.value=!1}}return{mdiLinkVariant:Gs,mdiText:iu,form:r,loading:n,onFileSelected:i}}},Qw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(zf,{attrs:{disabled:t.loading}},[n(zm,{attrs:{label:t.t("editor.image.dialog.form.file"),accept:"image/*",loading:t.loading,"prepend-icon":t.mdiLinkVariant},on:{change:t.onFileSelected,"click:clear":function(r){t.form.src=void 0}},model:{value:t.form.file,callback:function(r){t.$set(t.form,"file",r)},expression:"form.file"}}),n(Jr,{attrs:{label:t.t("editor.image.dialog.form.link"),disabled:"",autofocus:"","prepend-icon":t.mdiLinkVariant},model:{value:t.form.src,callback:function(r){t.$set(t.form,"src",r)},expression:"form.src"}}),n(Jr,{attrs:{label:t.t("editor.image.dialog.form.alt"),"prepend-icon":t.mdiText},model:{value:t.form.alt,callback:function(r){t.$set(t.form,"alt",r)},expression:"form.alt"}}),n(jf,{attrs:{label:t.t("editor.image.dialog.form.aspectRatio")},model:{value:t.form.lockAspectRatio,callback:function(r){t.$set(t.form,"lockAspectRatio",r)},expression:"form.lockAspectRatio"}})],1)},eE=[];const wf={};var tE=Mt(Zw,Qw,eE,!1,nE,null,null,null);function nE(t){for(let e in wf)this[e]=wf[e]}var Ef=function(){return tE.exports}(),rE={components:{ImageUrl:kf,ImageUpload:Ef},props:{value:Ke().def({}),editor:Ke().isRequired,show:ge().def(!1),dark:ge().def(!1),upload:En(),imageTabs:sr().def([]),hiddenTabs:sr().def([])},setup(t,{root:e}){const{t:n}=gi(),r=se(!1),i=se({}),o=ue(()=>[...[{name:A(n)("editor.image.dialog.tab.url"),type:"url",component:kf},{name:A(n)("editor.image.dialog.tab.upload"),type:"upload",component:Ef}].filter(f=>f.type?!t.hiddenTabs.includes(f.type):f),...t.imageTabs]),s=ue(()=>{const{src:u}=A(i);return!(typeof u=="string"&&u!=="")});async function a(){const{src:u,lockAspectRatio:c,height:f}=A(i);!u||(t.editor.chain().focus().setImage(xe(k({},A(i)),{src:u,height:c?void 0:f})).run(),l())}function l(){var u;e.$destroy(),(u=e.$el.parentNode)==null||u.removeChild(e.$el)}return sd(()=>{i.value=k(k({},A(i)),t.value)}),{mdiClose:ru,mdiLinkVariant:Gs,mdiText:iu,tab:r,defaultImageTabs:o,disabledApply:s,form:i,t:n,apply:a,close:l}}},iE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(Ms,{attrs:{dark:t.dark,value:t.show,"max-width":"400"}},[n(pi,[n(Al,[n("span",{staticClass:"headline"},[t._v(t._s(t.t("editor.image.dialog.title")))]),n(to),n(Ce,{attrs:{icon:""},on:{click:t.close}},[n(Et,[t._v(t._s(t.mdiClose))])],1)],1),n(qm,{model:{value:t.tab,callback:function(r){t.tab=r},expression:"tab"}},[t._l(t.defaultImageTabs,function(r,i){return[n(Um,{key:"tab-"+i},[t._v(" "+t._s(r.name)+" ")]),n(Km,{key:"tab-item-"+i},[n(Ts,[n(r.component,{tag:"component",attrs:{upload:t.upload,t:t.t},model:{value:t.form,callback:function(o){t.form=o},expression:"form"}})],1)],1)]})],2),n(xl,[n(Ce,{attrs:{text:"",disabled:t.disabledApply},on:{click:t.apply}},[t._v(" "+t._s(t.t("editor.image.dialog.button.apply"))+" ")])],1)],1)],1)},oE=[];const Sf={};var sE=Mt(rE,iE,oE,!1,aE,null,null,null);function aE(t){for(let e in Sf)this[e]=Sf[e]}var lE=function(){return sE.exports}();function uE(t){var e,n,r;const{upload:i,imageTabs:o,hiddenTabs:s}=t.storage.image||{},a={},l=t==null?void 0:t.view.state.selection;if((e=l==null?void 0:l.node)!=null&&e.attrs){const f=l.node.attrs;a.src=f.src||void 0,a.alt=f.alt||void 0,a.title=f.title||void 0,a.lockAspectRatio=(n=f.lockAspectRatio)!=null?n:!0,a.width=f.width||void 0,a.height=f.height||void 0,a.display=f.display||void 0}else a.lockAspectRatio=!0;const u=rt.extend(lE),c=new u({vuetify:Ol(),propsData:{editor:t,value:a,show:!0,upload:i,imageTabs:o,hiddenTabs:s}});c.$mount(),(r=document.querySelector("body"))==null||r.appendChild(c.$el)}var cE={props:{value:Sn(),editor:Ke().isRequired,show:ge().def(!1),dark:ge().def(!1)},setup(t,{root:e}){const{t:n}=gi(),r=se(""),i=ue(()=>t.value===r.value||!A(r));function o(){A(r)&&t.editor.chain().focus().extendMarkRange("link").setLink({href:A(r)}).run(),s()}function s(){var a;e.$destroy(),(a=e.$el.parentNode)==null||a.removeChild(e.$el)}return{mdiClose:ru,url:r,isDisabled:i,t:n,apply:o,close:s}}},fE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(Ms,{attrs:{dark:t.dark,value:t.show,"max-width":"400"}},[n(pi,[n(Al,[n("span",{staticClass:"headline"},[t._v(t._s(t.t("editor.link.dialog.title")))]),n(to),n(Ce,{attrs:{icon:""},on:{click:t.close}},[n(Et,[t._v(t._s(t.mdiClose))])],1)],1),n(Ts,[n(Jr,{attrs:{value:t.value,label:t.t("editor.link.dialog.link"),"hide-details":"",autofocus:""},on:{input:function(r){t.url=r}}})],1),n(xl,[n(Ce,{attrs:{disabled:t.isDisabled,text:""},on:{click:t.apply}},[t._v(" "+t._s(t.t("editor.link.dialog.button.apply"))+" ")])],1)],1)],1)},dE=[];const _f={};var pE=Mt(cE,fE,dE,!1,hE,null,null,null);function hE(t){for(let e in _f)this[e]=_f[e]}var mE=function(){return pE.exports}();function gE(t){var e;const{href:n}=t.getAttributes("link"),r=rt.extend(mE),i=new r({vuetify:Ol(),propsData:{editor:t,value:n,show:!0}});i.$mount(),(e=document.querySelector("body"))==null||e.appendChild(i.$el)}var vE={props:{value:Sn(),editor:Ke().isRequired,show:ge().def(!1),dark:ge().def(!1)},setup(t,{root:e}){const{t:n}=gi(),r=se(""),i=ue(()=>t.value===r.value||!A(r));function o(){A(r)&&t.editor.chain().focus().setIframe({src:r.value}).run(),s()}function s(){var a;e.$destroy(),(a=e.$el.parentNode)==null||a.removeChild(e.$el)}return{mdiClose:ru,url:r,isDisabled:i,t:n,apply:o,close:s}}},yE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(Ms,{attrs:{dark:t.dark,value:t.show,"max-width":"400"}},[n(pi,[n(Al,[n("span",{staticClass:"headline"},[t._v(t._s(t.t("editor.video.dialog.title")))]),n(to),n(Ce,{attrs:{icon:""},on:{click:t.close}},[n(Et,[t._v(t._s(t.mdiClose))])],1)],1),n(Ts,[n(Jr,{attrs:{value:t.value,label:t.t("editor.video.dialog.link"),"hide-details":"",autofocus:""},on:{input:function(r){t.url=r}}})],1),n(xl,[n(Ce,{attrs:{disabled:t.isDisabled,text:""},on:{click:t.apply}},[t._v(" "+t._s(t.t("editor.video.dialog.button.apply"))+" ")])],1)],1)],1)},bE=[];const Of={};var DE=Mt(vE,yE,bE,!1,CE,null,null,null);function CE(t){for(let e in Of)this[e]=Of[e]}var AE=function(){return DE.exports}();function xE(t){var e;const{src:n}=t.getAttributes("iframe"),r=rt.extend(AE),i=new r({vuetify:Ol(),propsData:{editor:t,value:n,show:!0}});i.$mount(),(e=document.querySelector("body"))==null||e.appendChild(i.$el)}function kE({editor:t,isFullscreen:e,toolbar:n}){const{t:r}=gi(),i=ue(()=>({"|":{type:"divider"},divider:{type:"divider"},">":{type:"spacer"},spacer:{type:"spacer"},bold:{title:A(r)("editor.bold.tooltip"),icon:ee("bold"),type:"bold",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleBold().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("bold"))||!1}},italic:{title:A(r)("editor.italic.tooltip"),icon:ee("italic"),type:"italic",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleItalic().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("italic"))||!1}},underline:{title:A(r)("editor.underline.tooltip"),icon:ee("underline"),type:"underline",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleUnderline().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("underline"))||!1}},strike:{title:A(r)("editor.strike.tooltip"),icon:ee("strike"),type:"strike",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleStrike().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("strike"))||!1}},color:{title:A(r)("editor.color.tooltip"),icon:ee("color"),type:"color",action:s=>{var a;return(a=A(t))==null?void 0:a.chain().focus().setColor(s).run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("textStyle"))||!1}},highlight:{title:A(r)("editor.highlight.tooltip"),icon:ee("highlight"),type:"highlight",action:s=>{var a;return(a=A(t))==null?void 0:a.chain().focus().setHighlight({color:s}).run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("highlight"))||!1}},h1:{title:A(r)("editor.heading.h1.tooltip"),icon:ee("h1"),type:"h1",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleHeading({level:1}).run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("heading",{level:1}))||!1}},h2:{title:A(r)("editor.heading.h2.tooltip"),icon:ee("h2"),type:"h2",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleHeading({level:2}).run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("heading",{level:2}))||!1}},h3:{title:A(r)("editor.heading.h3.tooltip"),icon:ee("h3"),type:"h3",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleHeading({level:3}).run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("heading",{level:3}))||!1}},h4:{title:A(r)("editor.heading.h4.tooltip"),icon:ee("h4"),type:"h4",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleHeading({level:4}).run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("heading",{level:4}))||!1}},h5:{title:A(r)("editor.heading.h5.tooltip"),icon:ee("h5"),type:"h5",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleHeading({level:5}).run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("heading",{level:5}))||!1}},h6:{title:A(r)("editor.heading.h6.tooltip"),icon:ee("h6"),type:"h6",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleHeading({level:6}).run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("heading",{level:6}))||!1}},p:{title:A(r)("editor.paragraph.tooltip"),icon:ee("p"),type:"p",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().setParagraph().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("paragraph"))||!1}},left:{title:A(r)("editor.left.tooltip"),icon:ee("left"),type:"left",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().setTextAlign("left").run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive({textAlign:"left"}))||!1}},center:{title:A(r)("editor.center.tooltip"),icon:ee("center"),type:"center",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().setTextAlign("center").run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive({textAlign:"center"}))||!1}},right:{title:A(r)("editor.right.tooltip"),icon:ee("right"),type:"right",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().setTextAlign("right").run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive({textAlign:"right"}))||!1}},justify:{title:A(r)("editor.justify.tooltip"),icon:ee("justify"),type:"justify",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().setTextAlign("justify").run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive({textAlign:"justify"}))||!1}},bulletList:{title:A(r)("editor.bulletlist.tooltip"),icon:ee("bulletList"),type:"bulletList",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleBulletList().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("bulletList"))||!1}},orderedList:{title:A(r)("editor.orderedlist.tooltip"),icon:ee("orderedList"),type:"orderedList",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleOrderedList().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("orderedList"))||!1}},taskList:{title:A(r)("editor.tasklist.tooltip"),icon:ee("taskList"),type:"taskList",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleTaskList().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("taskList"))||!1}},indent:{title:A(r)("editor.indent.tooltip"),icon:ee("indent"),type:"indent",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().sinkListItem("listItem").run()}},outdent:{title:A(r)("editor.outdent.tooltip"),icon:ee("outdent"),type:"outdent",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().liftListItem("listItem").run()}},link:{title:A(r)("editor.link.tooltip"),icon:ee("link"),type:"link",action:()=>{t.value&&gE(t.value)},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("link"))||!1}},image:{title:A(r)("editor.image.tooltip"),icon:ee("image"),type:"image",action:()=>{t.value&&uE(t.value)},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("image"))||!1}},video:{title:A(r)("editor.video.tooltip"),icon:ee("video"),type:"video",action:()=>{t.value&&xE(t.value)},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("iframe"))||!1}},blockquote:{title:A(r)("editor.blockquote.tooltip"),icon:ee("blockquote"),type:"blockquote",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleBlockquote().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("blockquote"))||!1}},rule:{title:A(r)("editor.horizontalrule.tooltip"),icon:ee("rule"),type:"rule",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().setHorizontalRule().run()}},code:{title:A(r)("editor.code.tooltip"),icon:ee("code"),type:"code",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleCode().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("code"))||!1}},codeBlock:{title:A(r)("editor.codeblock.tooltip"),icon:ee("codeBlock"),type:"codeBlock",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().toggleCodeBlock().run()},isActive:()=>{var s;return((s=A(t))==null?void 0:s.isActive("codeBlock"))||!1}},clear:{title:A(r)("editor.clear.tooltip"),icon:ee("clear"),type:"clear",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().focus().clearNodes().unsetAllMarks().run()}},undo:{title:A(r)("editor.undo.tooltip"),icon:ee("undo"),type:"undo",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().undo().run()}},redo:{title:A(r)("editor.redo.tooltip"),icon:ee("redo"),type:"redo",action:()=>{var s;return(s=A(t))==null?void 0:s.chain().redo().run()}},fullscreen:{title:A(e)?A(r)("editor.fullscreen.tooltip.exit"):A(r)("editor.fullscreen.tooltip.fullscreen"),icon:A(e)?Sx:ee("fullscreen"),type:"fullscreen",action:()=>(e.value=!A(e),A(e)?document.documentElement.classList.add("overflow-y-hidden"):document.documentElement.classList.remove("overflow-y-hidden"),A(e))}}));return{items:ue(()=>{if(!A(t))return[];const s=[];for(const a of n){const l=A(i)[a];l?s.push(l):a[0]==="#"&&s.push({type:"slot",slot:a.substring(1)})}return s})}}const Eo=16,$a=t=>{if(!t)return t;const e=parseInt(t,10),n=t.slice(e.toString().length);return e+(n||"px")},za=t=>typeof t=="number";var wE={components:{TipTapToolbar:ih,EditorContent:qA,BubbleMenu:sk},props:{value:Sn().def(""),dark:ge().def(!1),dense:ge().def(!1),outlined:ge().def(!0),disabled:ge().def(!1),label:Sn(),placeholder:Sn(),toolbar:sr().def(Uw),hideToolbar:ge().def(!1),disableToolbar:ge().def(!1),maxWidth:An([String,Number]),minHeight:An([String,Number]),maxHeight:An([String,Number]),extensions:sr().def([]),config:Ke().def({}),editorClass:An([String,Array,Object])},setup(t,{emit:e,listeners:n,root:r}){const i=se(null),o=se(null),s=se(!1),{t:a}=gi(),{items:l}=kE({editor:o,isFullscreen:s,toolbar:t.toolbar}),u=ue(()=>A(l).filter(D=>D.type==="slot")),c=ue(()=>{const D=$a(za(t.maxWidth)?String(t.maxWidth):t.maxWidth),w={maxWidth:D,width:D?"100%":void 0,margin:D?"0 auto":void 0,backgroundColor:t.dark?"#1E1E1E":"#FFFFFF"};if(A(s))return k({height:"100%",overflowY:"auto"},w);const M=$a(za(t.minHeight)?String(t.minHeight):t.minHeight),v=$a(za(t.maxHeight)?String(t.maxHeight):t.maxHeight);return k({minHeight:M,maxHeight:v,overflowY:"auto"},w)}),f=Lr(D=>{var w,M;!A(o)||((w=A(o))==null?void 0:w.getHTML())===D||(M=A(o))==null||M.commands.setContent(D)},Eo),d=D=>{var w;return(w=A(o))==null?void 0:w.setEditable(!D)};Fu(()=>t.value,f),Fu(()=>t.disabled,d);const p=Lr(function(D,w){return w.key==="Enter"&&n.enter&&!w.shiftKey?(e("enter"),!0):!1},Eo),h=Lr(function({editor:D}){var w;(w=A(i))==null||w.onUpdate(D)},Eo),m=Lr(function({editor:D}){e("input",D.getHTML())},Eo);return(()=>{var D;const w=H0({bold:{},blockquote:{HTMLAttributes:{class:"blockquote"}},history:{depth:10},heading:{levels:[1,2,3,4,5,6]},placeholder:{placeholder:()=>t.placeholder||""},textAlign:{types:["heading","paragraph","image"]},focus:{className:"focus"},color:{},highlight:{multicolor:!0},image:{inline:!0},link:{openOnClick:!0},taskList:{HTMLAttributes:{class:"task-list"}},taskItem:{HTMLAttributes:{class:"task-list-item"}},textStyle:{},underline:{},video:{}},(D=r.$vuetifyProTiptap)==null?void 0:D.config,t.config);o.value=new WA({content:t.value,editorProps:{handleKeyDown:p},onSelectionUpdate:h,onUpdate:m,extensions:[qw.configure(w),...t.extensions],autofocus:!1,editable:!0,injectCSS:!0})})(),Sl(()=>{var D;return(D=A(o))==null?void 0:D.destroy()}),{toolbarRef:i,editor:o,isFullscreen:s,items:l,slotItems:u,contentDynamicStyles:c,t:a}}},EE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editor?n("div",{staticClass:"vuetify-pro-tiptap",class:{dense:t.dense}},[n("BubbleMenu",{attrs:{editor:t.editor,dark:t.dark,disabled:t.disableToolbar,items:t.items}}),t.label?n(jm,[t._v(t._s(t.label))]):t._e(),n(Wm,t._b({staticClass:"pt-0",attrs:{"hide-details":"auto"}},"v-input",t.$attrs,!1),[n(pi,t._b({staticClass:"vuetify-pro-tiptap-editor",class:{"vuetify-pro-tiptap-editor--fullscreen":t.isFullscreen},staticStyle:{width:"100%"},style:{borderColor:t.$attrs["error-messages"]?"#ff5252":void 0},attrs:{flat:"",outlined:t.outlined,dark:t.dark,color:t.dark?"#212121":"#EEEEEE"}},"v-card",t.$attrs,!1),[!t.hideToolbar&&t.toolbar&&t.toolbar.length?n("TipTapToolbar",{ref:"toolbarRef",staticClass:"vuetify-pro-tiptap-editor__toolbar",attrs:{dark:t.dark,disabled:t.disableToolbar,items:t.items,color:t.dark?void 0:"grey lighten-4"},scopedSlots:t._u([t._l(t.slotItems,function(r){return{key:r.slot,fn:function(i){var o=i.attrs;return[t._t(r.slot,null,null,{editor:t.editor,attrs:o})]}}})],null,!0)}):t._e(),t._t("editor",function(){return[n("editor-content",{staticClass:"vuetify-pro-tiptap-editor__content",class:t.editorClass,style:t.contentDynamicStyles,attrs:{editor:t.editor,"data-testid":"value"}})]},null,{editor:t.editor,attrs:{class:"vuetify-pro-tiptap-editor__content","data-testid":"value"}}),t._t("bottom",function(){return[n(Cl,{attrs:{dense:"",flat:"",color:t.dark?void 0:"grey lighten-4"}},[n(to),n("span",{staticClass:"text-overline me-4"},[t._v(t._s(t.editor.storage.characterCount.words())+" "+t._s(t.t("editor.words")))]),n("span",{staticClass:"text-overline"},[t._v(t._s(t.editor.storage.characterCount.characters())+" "+t._s(t.t("editor.characters")))])],1)]},null,{editor:t.editor})],2)],1)],1):t._e()},SE=[];const Tf={};var _E=Mt(wE,EE,SE,!1,OE,null,null,null);function OE(t){for(let e in Tf)this[e]=Tf[e]}var mh=function(){return _E.exports}(),bl={exports:{}},pe={},eo={exports:{}},mr={};function gh(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function TE(t,e,n){}function ME(t,e,n){}var FE=/javascript\s*\:/img;function BE(t,e){return FE.test(e)?"":e}mr.whiteList=gh();mr.getDefaultWhiteList=gh;mr.onAttr=TE;mr.onIgnoreAttr=ME;mr.safeAttrValue=BE;var LE={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},Ei=LE;function NE(t,e){t=Ei.trimRight(t),t[t.length-1]!==";"&&(t+=";");var n=t.length,r=!1,i=0,o=0,s="";function a(){if(!r){var c=Ei.trim(t.slice(i,o)),f=c.indexOf(":");if(f!==-1){var d=Ei.trim(c.slice(0,f)),p=Ei.trim(c.slice(f+1));if(d){var h=e(i,s.length,d,p,c);h&&(s+=h+"; ")}}}i=o+1}for(;o<n;o++){var l=t[o];if(l==="/"&&t[o+1]==="*"){var u=t.indexOf("*/",o+2);if(u===-1)break;o=u+1,i=o+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return Ei.trim(s)}var IE=NE,So=mr,VE=IE;function Mf(t){return t==null}function PE(t){var e={};for(var n in t)e[n]=t[n];return e}function vh(t){t=PE(t||{}),t.whiteList=t.whiteList||So.whiteList,t.onAttr=t.onAttr||So.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||So.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||So.safeAttrValue,this.options=t}vh.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onAttr,o=n.onIgnoreAttr,s=n.safeAttrValue,a=VE(t,function(l,u,c,f,d){var p=r[c],h=!1;if(p===!0?h=p:typeof p=="function"?h=p(f):p instanceof RegExp&&(h=p.test(f)),h!==!0&&(h=!1),f=s(c,f),!!f){var m={position:u,sourcePosition:l,source:d,isWhite:h};if(h){var y=i(c,f,m);return Mf(y)?c+":"+f:y}else{var y=o(c,f,m);if(!Mf(y))return y}}});return a};var RE=vh;(function(t,e){var n=mr,r=RE;function i(s,a){var l=new r(a);return l.process(s)}e=t.exports=i,e.FilterCSS=r;for(var o in n)e[o]=n[o];typeof window!="undefined"&&(window.filterCSS=t.exports)})(eo,eo.exports);var hu={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}},HE=eo.exports.FilterCSS,$E=eo.exports.getDefaultWhiteList,_s=hu;function yh(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var bh=new HE;function zE(t,e,n){}function jE(t,e,n){}function WE(t,e,n){}function qE(t,e,n){}function Dh(t){return t.replace(KE,"&lt;").replace(JE,"&gt;")}function UE(t,e,n,r){if(n=Eh(n),e==="href"||e==="src"){if(n=_s.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(e==="background"){if(_o.lastIndex=0,_o.test(n))return""}else if(e==="style"){if(Ff.lastIndex=0,Ff.test(n)||(Bf.lastIndex=0,Bf.test(n)&&(_o.lastIndex=0,_o.test(n))))return"";r!==!1&&(r=r||bh,n=r.process(n))}return n=Sh(n),n}var KE=/</g,JE=/>/g,GE=/"/g,YE=/&quot;/g,XE=/&#([a-zA-Z0-9]*);?/gim,ZE=/&colon;?/gim,QE=/&newline;?/gim,_o=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Ff=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Bf=/u\s*r\s*l\s*\(.*/gi;function Ch(t){return t.replace(GE,"&quot;")}function Ah(t){return t.replace(YE,'"')}function xh(t){return t.replace(XE,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function kh(t){return t.replace(ZE,":").replace(QE," ")}function wh(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return _s.trim(e)}function Eh(t){return t=Ah(t),t=xh(t),t=kh(t),t=wh(t),t}function Sh(t){return t=Ch(t),t=Dh(t),t}function eS(){return""}function tS(t,e){typeof e!="function"&&(e=function(){});var n=!Array.isArray(t);function r(s){return n?!0:_s.indexOf(t,s)!==-1}var i=[],o=!1;return{onIgnoreTag:function(s,a,l){if(r(s))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return i.push([o!==!1?o:l.position,c]),o=!1,u}else return o||(o=l.position),"[removed]";else return e(s,a,l)},remove:function(s){var a="",l=0;return _s.forEach(i,function(u){a+=s.slice(l,u[0]),l=u[1]}),a+=s.slice(l),a}}}function nS(t){for(var e="",n=0;n<t.length;){var r=t.indexOf("<!--",n);if(r===-1){e+=t.slice(n);break}e+=t.slice(n,r);var i=t.indexOf("-->",r);if(i===-1)break;n=i+3}return e}function rS(t){var e=t.split("");return e=e.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}pe.whiteList=yh();pe.getDefaultWhiteList=yh;pe.onTag=zE;pe.onIgnoreTag=jE;pe.onTagAttr=WE;pe.onIgnoreTagAttr=qE;pe.safeAttrValue=UE;pe.escapeHtml=Dh;pe.escapeQuote=Ch;pe.unescapeQuote=Ah;pe.escapeHtmlEntities=xh;pe.escapeDangerHtml5Entities=kh;pe.clearNonPrintableCharacter=wh;pe.friendlyAttrValue=Eh;pe.escapeAttrValue=Sh;pe.onIgnoreTagStripAll=eS;pe.StripTagBody=tS;pe.stripCommentTag=nS;pe.stripBlankChar=rS;pe.cssFilter=bh;pe.getDefaultCSSWhiteList=$E;var Ys={},Dn=hu;function iS(t){var e=Dn.spaceIndex(t),n;return e===-1?n=t.slice(1,-1):n=t.slice(1,e+1),n=Dn.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function oS(t){return t.slice(0,2)==="</"}function sS(t,e,n){var r="",i=0,o=!1,s=!1,a=0,l=t.length,u="",c="";e:for(a=0;a<l;a++){var f=t.charAt(a);if(o===!1){if(f==="<"){o=a;continue}}else if(s===!1){if(f==="<"){r+=n(t.slice(i,a)),o=a,i=a;continue}if(f===">"){r+=n(t.slice(i,o)),c=t.slice(o,a+1),u=iS(c),r+=e(o,r.length,u,c,oS(c)),i=a+1,o=!1;continue}if(f==='"'||f==="'")for(var d=1,p=t.charAt(a-d);p.trim()===""||p==="=";){if(p==="="){s=f;continue e}p=t.charAt(a-++d)}}else if(f===s){s=!1;continue}}return i<t.length&&(r+=n(t.substr(i))),r}var aS=/[^a-zA-Z0-9\\_:.-]/gim;function lS(t,e){var n=0,r=0,i=[],o=!1,s=t.length;function a(d,p){if(d=Dn.trim(d),d=d.replace(aS,"").toLowerCase(),!(d.length<1)){var h=e(d,p||"");h&&i.push(h)}}for(var l=0;l<s;l++){var u=t.charAt(l),c,f;if(o===!1&&u==="="){o=t.slice(n,l),n=l+1,r=t.charAt(n)==='"'||t.charAt(n)==="'"?n:cS(t,l+1);continue}if(o!==!1&&l===r){if(f=t.indexOf(u,l+1),f===-1)break;c=Dn.trim(t.slice(r+1,f)),a(o,c),o=!1,l=f,n=l+1;continue}if(/\s|\n|\t/.test(u))if(t=t.replace(/\s|\n|\t/g," "),o===!1)if(f=uS(t,l),f===-1){c=Dn.trim(t.slice(n,l)),a(c),o=!1,n=l+1;continue}else{l=f-1;continue}else if(f=fS(t,l-1),f===-1){c=Dn.trim(t.slice(n,l)),c=Lf(c),a(o,c),o=!1,n=l+1;continue}else continue}return n<t.length&&(o===!1?a(t.slice(n)):a(o,Lf(Dn.trim(t.slice(n))))),Dn.trim(i.join(" "))}function uS(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="="?e:-1}}function cS(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="'"||n==='"'?e:-1}}function fS(t,e){for(;e>0;e--){var n=t[e];if(n!==" ")return n==="="?e:-1}}function dS(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Lf(t){return dS(t)?t.substr(1,t.length-2):t}Ys.parseTag=sS;Ys.parseAttr=lS;var pS=eo.exports.FilterCSS,Ct=pe,_h=Ys,hS=_h.parseTag,mS=_h.parseAttr,Io=hu;function Oo(t){return t==null}function gS(t){var e=Io.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Io.trim(t.slice(e+1,-1));var n=t[t.length-1]==="/";return n&&(t=Io.trim(t.slice(0,-1))),{html:t,closing:n}}function vS(t){var e={};for(var n in t)e[n]=t[n];return e}function yS(t){var e={};for(var n in t)Array.isArray(t[n])?e[n.toLowerCase()]=t[n].map(function(r){return r.toLowerCase()}):e[n.toLowerCase()]=t[n];return e}function Oh(t){t=vS(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Ct.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=yS(t.whiteList||t.allowList):t.whiteList=Ct.whiteList,t.onTag=t.onTag||Ct.onTag,t.onTagAttr=t.onTagAttr||Ct.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Ct.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Ct.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Ct.safeAttrValue,t.escapeHtml=t.escapeHtml||Ct.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new pS(t.css))}Oh.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onTag,o=n.onIgnoreTag,s=n.onTagAttr,a=n.onIgnoreTagAttr,l=n.safeAttrValue,u=n.escapeHtml,c=e.cssFilter;n.stripBlankChar&&(t=Ct.stripBlankChar(t)),n.allowCommentTag||(t=Ct.stripCommentTag(t));var f=!1;n.stripIgnoreTagBody&&(f=Ct.StripTagBody(n.stripIgnoreTagBody,o),o=f.onIgnoreTag);var d=hS(t,function(p,h,m,y,D){var w={sourcePosition:p,position:h,isClosing:D,isWhite:Object.prototype.hasOwnProperty.call(r,m)},M=i(m,y,w);if(!Oo(M))return M;if(w.isWhite){if(w.isClosing)return"</"+m+">";var v=gS(y),F=r[m],E=mS(v.html,function(O,S){var B=Io.indexOf(F,O)!==-1,R=s(m,O,S,B);return Oo(R)?B?(S=l(m,O,S,c),S?O+'="'+S+'"':O):(R=a(m,O,S,B),Oo(R)?void 0:R):R});return y="<"+m,E&&(y+=" "+E),v.closing&&(y+=" /"),y+=">",y}else return M=o(m,y,w),Oo(M)?u(y):M},u);return f&&(d=f.remove(d)),d};var bS=Oh;(function(t,e){var n=pe,r=Ys,i=bS;function o(a,l){var u=new i(l);return u.process(a)}e=t.exports=o,e.filterXSS=o,e.FilterXSS=i,function(){for(var a in n)e[a]=n[a];for(var l in r)e[l]=r[l]}(),typeof window!="undefined"&&(window.filterXSS=t.exports);function s(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}s()&&(self.filterXSS=t.exports)})(bl,bl.exports);var DS=bl.exports;const CS={a:["href","title","target"],span:["style"],blockquote:["class","style"],p:["class","style"],hr:[],pre:[],code:[],strong:[],img:["src","alt","title","width","height","style","data-display"],label:["contenteditable"],input:["type","value","checked"],div:["class","style"],iframe:["src","allowfullscreen","frameborder","width","height"],em:[],s:[],mark:[],h1:["class","style"],h2:["class","style"],h3:["class","style"],h4:["class","style"],h5:["class","style"],h6:["class","style"],ul:["class","data-type"],li:["class","data-checked","itemtypename"],ol:[],u:[],tr:["class","style"],td:["class","style"],th:["class","style"],tbody:["class","style"],table:["class","style"],br:[]};var AS={props:{value:Sn().def(""),dense:ge().def(!1),xss:An([Boolean,Array]).def(!0),xssOptions:Ke().def(CS)},setup(t){return{cleanValue:ue(()=>{if(t.xss===!1)return t.value;const n=t.value.replace("https://youtu.be/","https://www.youtube.com/watch?v=").replace("watch?v=","embed/").replace("https://vimeo.com/","https://player.vimeo.com/video/"),r=t.xssOptions;return DS(n,{whiteList:r,css:!1})})}}},xS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vuetify-pro-tiptap-editor__content",class:{dense:t.dense,view:!0},staticStyle:{width:"100%"}},[t._t("before"),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.cleanValue)}}),t._t("after")],2)},kS=[];const Nf={};var wS=Mt(AS,xS,kS,!1,ES,null,null,null);function ES(t){for(let e in Nf)this[e]=Nf[e]}var Th=function(){return wS.exports}();typeof window!="undefined"&&window.Vue&&(window.Vue.component("VuetifyTiptap",mh),window.Vue.component("VuetifyViewer",Th));const SS=t=>n=>{const{vuetify:r,lang:i,components:o={},config:s}=t||{};if(!r){_l.warn("The module VuetifyProTipTap needs vuetify instance. Use Vue.use(VuetifyProTipTap, { vuetify })");return}r0(r),i&&as.setLang(i),Object.keys(o).forEach(a=>n.component(a,o[a])),n.prototype.$vuetifyProTiptap={defaultLang:i,config:s}},_S=`<h2 style="text-align: center">Welcome To Vuetify Tiptap Editor Demo</h2><p>\u{1F525} <strong>Vuetify Tiptap Editor </strong>\u{1F525}is a WYSIWYG rich-text editor using&nbsp; <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/scrumpy/tiptap">tiptap</a>&nbsp;and <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/vuetifyjs/vuetify">vuetify</a>&nbsp;for Vue.js <img src="https://i.ibb.co/nbRN3S2/undraw-upload-87y9.png" alt="Test alt" width="200" data-display="right"> that's easy to use, friendly to developers, fully extensible and clean in design.</p><p></p><p style="text-align: right">\u{1F449}Click on the image to get started image features \u{1F449}</p><p></p><p>You can toggle <strong>Fullscreen</strong> \u{1F4FA} in this demo.</p><p></p><blockquote class="blockquote"><p>This demo is simple, switch tab for more features.</p><p>All demos source code: <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/yikoyu/vuetify-pro-tiptap">source code \u{1F517}</a></p></blockquote>`;var OS={setup(){const t=se(_S),e=se(!1),n=se(!0),r=se(!1),i=se(!1),o=se(!1),s=se(!1),a=se(null),l=se(["bold","italic","underline","strike","color","highlight","|","h1","h2","h3","h4","h5","h6","p","|","left","center","right","justify","|","bulletList","orderedList","taskList","indent","outdent","|","link","image","video","|","blockquote","rule","code","codeBlock","|","clear","fullscreen","undo","redo","#clean-btn","#preview","#html"]);return{mdiDeleteCircleOutline:Jg,mdiFileCodeOutline:Gg,mdiSend:Yg,locale:as,content:t,dialog:e,outlined:n,dense:r,editHtml:i,hideToolbar:o,disableToolbar:s,errorMessages:a,toolbar:l}}},Mh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(Jm,{attrs:{id:"app"}},[n(Eu,[n(Ce,{attrs:{color:"primary"},on:{click:function(r){t.$vuetify.theme.dark=!t.$vuetify.theme.dark}}},[t._v(" "+t._s(t.$vuetify.theme.dark?"dark":"light")+" ")]),n(Ce,{staticClass:"ms-2",attrs:{color:"primary"},on:{click:function(r){t.$vuetify.rtl=!t.$vuetify.rtl}}},[t._v(" "+t._s(t.$vuetify.rtl?"RTL":"LTR")+" ")]),n(Ce,{staticClass:"ms-2",attrs:{color:"primary"},on:{click:function(r){return t.locale.setLang("zhHans")}}},[t._v("set Chinese")]),n(Ce,{staticClass:"ms-2",attrs:{color:"primary"},on:{click:function(r){return t.locale.setLang("en")}}},[t._v("set English")]),n("vuetify-tiptap",{attrs:{label:"Title","hide-toolbar":t.hideToolbar,"disable-toolbar":t.disableToolbar,toolbar:t.toolbar,outlined:t.outlined,dense:t.dense,dark:t.$vuetify.theme.dark,placeholder:"Enter some text...","error-messages":t.errorMessages,rounded:"",maxHeight:465,maxWidth:900},scopedSlots:t._u([t.editHtml?{key:"editor",fn:function(r){var i=r.attrs;return[n(Su,t._b({attrs:{height:"auto","hide-details":"",flat:"",solo:""},model:{value:t.content,callback:function(o){t.content=o},expression:"content"}},"v-textarea",i,!1))]}}:null,{key:"preview",fn:function(r){var i=r.attrs;return[n(Ms,{attrs:{fullscreen:"","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function(o){var s=o.on,a=o.attrs;return[n(Ce,t._g(t._b({},"v-btn",Object.assign({},i,a),!1),s),[n(Et,[t._v(t._s(t.mdiFileCodeOutline))])],1)]}}],null,!0),model:{value:t.dialog,callback:function(o){t.dialog=o},expression:"dialog"}},[n(pi,[n(Cl,{attrs:{dark:"",color:"primary"}},[n(Ce,{attrs:{icon:"",dark:""},on:{click:function(o){t.dialog=!1}}},[n(Et,[t._v("$close")])],1)],1),n(Eu,[n("vuetify-viewer",{attrs:{value:t.content}})],1)],1)],1)]}},{key:"html",fn:function(){return[n(Ce,{staticClass:"elevation-0",attrs:{small:"",color:t.editHtml?"primary":void 0,text:""},on:{click:function(r){t.editHtml=!t.editHtml,t.disableToolbar=!t.disableToolbar}}},[t._v(" HTML ")])]},proxy:!0},{key:"clean-btn",fn:function(r){var i=r.editor,o=r.attrs;return[n(Ce,t._b({attrs:{icon:"",small:""},on:{click:function(s){i&&i.commands.setContent(""),t.content=""}}},"v-btn",o,!1),[n(Et,[t._v(t._s(t.mdiDeleteCircleOutline))])],1)]}}],null,!0),model:{value:t.content,callback:function(r){t.content=r},expression:"content"}}),n($f,{staticClass:"my-4"}),n(Su,{attrs:{value:t.content,readonly:"","auto-grow":""}})],1)],1)},TS=[];Mh._withStripped=!0;function Fh(t,e,n,r,i,o,s,a){var l=typeof t=="function"?t.options:t;e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o);var u;if(s?(u=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(d=__VUE_SSR_CONTEXT__),i&&i.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(s)},l._ssrRegister=u):i&&(u=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(p,h){return u.call(h),c(p,h)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:l}}const If={};var Bh=Fh(OS,Mh,TS,!1,MS,null,null,null);function MS(t){for(let e in If)this[e]=If[e]}Bh.options.__file="examples/App.vue";var FS=function(){return Bh.exports}();/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Vf(t){return Object.prototype.toString.call(t)==="[object Object]"}function BS(t){var e,n;return Vf(t)===!1?!1:(e=t.constructor,e===void 0?!0:(n=e.prototype,!(Vf(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}function qi(){return qi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qi.apply(this,arguments)}function Lh(t,e){if(t==null)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}const Dl={silent:!1,logLevel:"warn"},LS=["validator"],Nh=Object.prototype,Ih=Nh.toString,NS=Nh.hasOwnProperty,Vh=/^\s*function (\w+)/;function Pf(t){var e;const n=(e=t==null?void 0:t.type)!==null&&e!==void 0?e:t;if(n){const r=n.toString().match(Vh);return r?r[1]:""}return""}const fr=BS,Ph=t=>t;let Le=Ph;Le=typeof console!="undefined"?function(e,n=Dl.logLevel){Dl.silent===!1&&console[n](`[VueTypes warn]: ${e}`)}:Ph;const ci=(t,e)=>NS.call(t,e),IS=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},fi=Array.isArray||function(t){return Ih.call(t)==="[object Array]"},di=t=>Ih.call(t)==="[object Function]",Os=t=>fr(t)&&ci(t,"_vueTypes_name"),Rh=t=>fr(t)&&(ci(t,"type")||["_vueTypes_name","validator","default","required"].some(e=>ci(t,e)));function mu(t,e){return Object.defineProperty(t.bind(e),"__original",{value:t})}function gr(t,e,n=!1){let r,i=!0,o="";r=fr(t)?t:{type:t};const s=Os(r)?r._vueTypes_name+" - ":"";if(Rh(r)&&r.type!==null){if(r.type===void 0||r.type===!0||!r.required&&e===void 0)return i;fi(r.type)?(i=r.type.some(a=>gr(a,e,!0)===!0),o=r.type.map(a=>Pf(a)).join(" or ")):(o=Pf(r),i=o==="Array"?fi(e):o==="Object"?fr(e):o==="String"||o==="Number"||o==="Boolean"||o==="Function"?function(a){if(a==null)return"";const l=a.constructor.toString().match(Vh);return l?l[1]:""}(e)===o:e instanceof r.type)}if(!i){const a=`${s}value "${e}" should be of type "${o}"`;return n===!1?(Le(a),!1):a}if(ci(r,"validator")&&di(r.validator)){const a=Le,l=[];if(Le=u=>{l.push(u)},i=r.validator(e),Le=a,!i){const u=(l.length>1?"* ":"")+l.join(`
* `);return l.length=0,n===!1?(Le(u),i):u}}return i}function at(t,e){const n=Object.defineProperties(e,{_vueTypes_name:{value:t,writable:!0},isRequired:{get(){return this.required=!0,this}},def:{value(i){return i===void 0?(ci(this,"default")&&delete this.default,this):di(i)||gr(this,i,!0)===!0?(this.default=fi(i)?()=>[...i]:fr(i)?()=>Object.assign({},i):i,this):(Le(`${this._vueTypes_name} - invalid default value: "${i}"`),this)}}}),{validator:r}=n;return di(r)&&(n.validator=mu(r,n)),n}function Wt(t,e){const n=at(t,e);return Object.defineProperty(n,"validate",{value(r){return di(this.validator)&&Le(`${this._vueTypes_name} - calling .validate() will overwrite the current custom validator function. Validator info:
${JSON.stringify(this)}`),this.validator=mu(r,this),this}})}function Rf(t,e,n){const r=function(l){const u={};return Object.getOwnPropertyNames(l).forEach(c=>{u[c]=Object.getOwnPropertyDescriptor(l,c)}),Object.defineProperties({},u)}(e);if(r._vueTypes_name=t,!fr(n))return r;const{validator:i}=n,o=Lh(n,LS);if(di(i)){let{validator:l}=r;l&&(l=(a=(s=l).__original)!==null&&a!==void 0?a:s),r.validator=mu(l?function(u){return l.call(this,u)&&i.call(this,u)}:i,r)}var s,a;return Object.assign(r,o)}function Xs(t){return t.replace(/^(?!\s*$)/gm,"  ")}const VS=()=>Wt("any",{}),PS=()=>Wt("function",{type:Function}),RS=()=>Wt("boolean",{type:Boolean}),HS=()=>Wt("string",{type:String}),$S=()=>Wt("number",{type:Number}),zS=()=>Wt("array",{type:Array}),Hh=()=>Wt("object",{type:Object}),jS=()=>at("integer",{type:Number,validator:t=>IS(t)}),WS=()=>at("symbol",{validator:t=>typeof t=="symbol"});function qS(t,e="custom validation failed"){if(typeof t!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return at(t.name||"<<anonymous function>>",{type:null,validator(n){const r=t(n);return r||Le(`${this._vueTypes_name} - ${e}`),r}})}function US(t){if(!fi(t))throw new TypeError("[VueTypes error]: You must provide an array as argument.");const e=`oneOf - value should be one of "${t.join('", "')}".`,n=t.reduce((r,i)=>{if(i!=null){const o=i.constructor;r.indexOf(o)===-1&&r.push(o)}return r},[]);return at("oneOf",{type:n.length>0?n:void 0,validator(r){const i=t.indexOf(r)!==-1;return i||Le(e),i}})}function KS(t){if(!fi(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");let e=!1,n=[];for(let i=0;i<t.length;i+=1){const o=t[i];if(Rh(o)){if(Os(o)&&o._vueTypes_name==="oneOf"&&o.type){n=n.concat(o.type);continue}if(di(o.validator)&&(e=!0),o.type===!0||!o.type){Le('oneOfType - invalid usage of "true" or "null" as types.');continue}n=n.concat(o.type)}else n.push(o)}n=n.filter((i,o)=>n.indexOf(i)===o);const r=n.length>0?n:null;return at("oneOfType",e?{type:r,validator(i){const o=[],s=t.some(a=>{const l=gr(Os(a)&&a._vueTypes_name==="oneOf"?a.type||null:a,i,!0);return typeof l=="string"&&o.push(l),l===!0});return s||Le(`oneOfType - provided value does not match any of the ${o.length} passed-in validators:
${Xs(o.join(`
`))}`),s}}:{type:r})}function JS(t){return at("arrayOf",{type:Array,validator(e){let n="";const r=e.every(i=>(n=gr(t,i,!0),n===!0));return r||Le(`arrayOf - value validation error:
${Xs(n)}`),r}})}function GS(t){return at("instanceOf",{type:t})}function YS(t){return at("objectOf",{type:Object,validator(e){let n="";const r=Object.keys(e).every(i=>(n=gr(t,e[i],!0),n===!0));return r||Le(`objectOf - value validation error:
${Xs(n)}`),r}})}function XS(t){const e=Object.keys(t),n=e.filter(i=>{var o;return!((o=t[i])===null||o===void 0||!o.required)}),r=at("shape",{type:Object,validator(i){if(!fr(i))return!1;const o=Object.keys(i);if(n.length>0&&n.some(s=>o.indexOf(s)===-1)){const s=n.filter(a=>o.indexOf(a)===-1);return Le(s.length===1?`shape - required property "${s[0]}" is not defined.`:`shape - required properties "${s.join('", "')}" are not defined.`),!1}return o.every(s=>{if(e.indexOf(s)===-1)return this._vueTypes_isLoose===!0||(Le(`shape - shape definition does not include a "${s}" property. Allowed keys: "${e.join('", "')}".`),!1);const a=gr(t[s],i[s],!0);return typeof a=="string"&&Le(`shape - "${s}" property validation error:
 ${Xs(a)}`),a===!0})}});return Object.defineProperty(r,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(r,"loose",{get(){return this._vueTypes_isLoose=!0,this}}),r}const ZS=["name","validate","getter"],QS=(()=>{var t,e;return e=t=class{static get any(){return VS()}static get func(){return PS().def(this.defaults.func)}static get bool(){return RS().def(this.defaults.bool)}static get string(){return HS().def(this.defaults.string)}static get number(){return $S().def(this.defaults.number)}static get array(){return zS().def(this.defaults.array)}static get object(){return Hh().def(this.defaults.object)}static get integer(){return jS().def(this.defaults.integer)}static get symbol(){return WS()}static extend(n){if(fi(n))return n.forEach(u=>this.extend(u)),this;const{name:r,validate:i=!1,getter:o=!1}=n,s=Lh(n,ZS);if(ci(this,r))throw new TypeError(`[VueTypes error]: Type "${r}" already defined`);const{type:a}=s;if(Os(a))return delete s.type,Object.defineProperty(this,r,o?{get:()=>Rf(r,a,s)}:{value(...u){const c=Rf(r,a,s);return c.validator&&(c.validator=c.validator.bind(c,...u)),c}});let l;return l=o?{get(){const u=Object.assign({},s);return i?Wt(r,u):at(r,u)},enumerable:!0}:{value(...u){const c=Object.assign({},s);let f;return f=i?Wt(r,c):at(r,c),c.validator&&(f.validator=c.validator.bind(f,...u)),f},enumerable:!0},Object.defineProperty(this,r,l)}},t.defaults={},t.sensibleDefaults=void 0,t.config=Dl,t.custom=qS,t.oneOf=US,t.instanceOf=GS,t.oneOfType=KS,t.arrayOf=JS,t.objectOf=YS,t.shape=XS,t.utils={validate:(n,r)=>gr(r,n,!0)===!0,toType:(n,r,i=!1)=>i?Wt(n,r):at(n,r)},e})();function e_(t={func:()=>{},bool:!0,string:"",number:0,array:()=>[],object:()=>({}),integer:0}){var e,n;return n=e=class extends QS{static get sensibleDefaults(){return qi({},this.defaults)}static set sensibleDefaults(r){this.defaults=r!==!1?qi({},r!==!0?r:t):{}}},e.defaults=qi({},t),n}class c_ extends e_(){}var t_={props:{value:Hh().def({})},setup(t,{emit:e}){return{form:ue({get:()=>t.value,set:r=>e("input",r)}),items:[{alt:"Test 1",src:"https://i.picsum.photos/id/1069/1920/1080.webp?hmac=cxjVzYK0ihh3VsIEKZ8FIfl6aGr19QO8yehQlPzoPeM"},{alt:"Test 2",src:"https://i.picsum.photos/id/90/1920/1080.webp?hmac=gxjDsn0a57jTpyPG9YRuDhW0YIo5DlqbRSRXpwSAVmw"},{alt:"Test 3",src:"https://i.picsum.photos/id/627/1920/1080.webp?hmac=N91GT9f0ZfCjx4mwrqPYHo-27d_0852EXonU54iCv6o"}]}}},$h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(Gm,{attrs:{label:"Image","return-object":"",items:t.items,"item-text":"alt","item-value":"src"},model:{value:t.form,callback:function(r){t.form=r},expression:"form"}})},n_=[];$h._withStripped=!0;const Hf={};var zh=Fh(t_,$h,n_,!1,r_,null,null,null);function r_(t){for(let e in Hf)this[e]=Hf[e]}zh.options.__file="examples/components/SelectImage.vue";var i_=function(){return zh.exports}();const jh=Kg(rt);rt.use(ld);const o_=SS({vuetify:jh,lang:"zhHans",components:{VuetifyTiptap:mh,VuetifyViewer:Th},config:{image:{imageTabs:[{name:"SELECT",component:i_}],upload(t){return console.log("e :>> ",t),Promise.resolve("https://picsum.photos/1920/1080.webp")}}}});rt.use(o_);const s_=Rg({vuetify:jh,render:()=>Hg(FS)});s_.mount("#app");
